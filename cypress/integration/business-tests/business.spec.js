
//loan flow
import { homePage } from "../../pages/home/HomePage"
import { fplPage } from "../../pages/loan/fpl/FPLPage"
import { fplLoanAmountDetailsPage } from "../../pages/loan/fpl/FPLLoanAmountDetailsPage"
import { fplLoanAmountTenurePage } from "../../pages/loan/fpl/FPLLoanAmountTenurePage"
import { applyCouponCodeOrPointsPage } from "../../pages/generic/ApplyCouponCodeOrPointsPage"
import { repaymentSchedulePage } from "../../pages/loan/RepaymentSchedulePage"
import { loanPurposePage } from "../../pages/loan/LoanPurposePage"
import { selectBankAccountPage } from "../../pages/bank/SelectBankAccountPage"
import { signLoanDocumentPage } from "../../pages/loan/SignLoanDocumentPage"
import { kfsSanctionLetterPage } from "../../pages/loan/KFSSanctionLetterPage"
import { signDocumentPage } from "../../pages/loan/SignDocumentPage"
import { signServicePage } from "../../pages/loan/SignServicePage"
import { signServiceOTPInputPage } from "../../pages/loan/SignServiceOTPInputPage"
import { loanApplicationSubmittedPage } from "../../pages/loan/sa/LoanApplicationSubmittedPage"

// SA loan
import { saLoanAmountTenurePage } from "../../pages/loan/sa/SALoanAmountTenurePage"
import { saLoanAmountDetailsPage } from "../../pages/loan/sa/SALoanAmountDetailsPage"

//insurance 
import { purchaseLoanPage } from "../../pages/loan/PurchaseLoanPage"
import { addBankAccountPage } from "../../pages/bank/AddBankAccountPage"
import { bankAccountVerificationPage } from "../../pages/bank/BankAccountVerificationPage"
import { footerPage } from "../../pages/generic/FooterPage"
import { accountsPage } from "../../pages/accounts/AccountsPage"
import { bankAccountsPage } from "../../pages/bank/bankAccountsPage"
import { insuranceBuyPolicyListPage } from "../../pages/insurance/InsuranceBuyPolicyListPage"
import { insuranceBuyPolicyPage } from "../../pages/insurance/insuranceBuyPolicyPage"
import { insuranceDetailsPage } from "../../pages/insurance/InsuranceDetailsPage"
import { insurancePolicyDetailsPage } from "../../pages/insurance/InsurancePolicyDetailsPage"
import { insuranceTermsAndConditionsPage } from "../../pages/insurance/InsuranceTermsAndConditionsPage"
import { myPoliciesPage } from "../../pages/insurance/myPoliciesPage";
import { insurancePolicyPaymentPage } from "../../pages/insurance/InsurancePolicyPaymentPage";


//Profile status
import { generalInformationPage } from "../../pages/onboarding/profile/generalInformation/GeneralInformationPage"
import { profileInformationPage } from "../../pages/onboarding/profile/ProfileInformationPage"
import { applicationStatusPage } from "../../pages/onboarding/profile/ApplicationStatusPage"
import { assessingLoanEligibilityPage } from "../../pages/onboarding/profile/AssessingLoanEligibilityPage";
import { searchCompanyNamePage } from "../../pages/onboarding/eligibility/SearchCompanyNamePage";
import { incomeDetailsPage } from "../../pages/onboarding/eligibility/IncomeDetailsPage";
import { panInputPage } from "../../pages/onboarding/eligibility/PanInputPage";
import { loaderScreenPage } from "../../pages/generic/LoaderScreenPage";

//account
import { settingsPage } from "../../pages/generic/SettingsPage"
import { headerPage } from "../../pages/generic/HeaderPage"
import { referAndEarn } from "../../pages/accounts/referAndEarn"
import { deleteAccountPage } from "../../pages/accounts/deleteAccountPage"
import { kbPointsPage } from "../../pages/accounts/KBPointsPage"
import { redeemonProcessingFeePage } from "../../pages/accounts/RedeemOnProcessingFeePopPage"
import { otpInputPage } from "../../pages/onboarding/general/OTPInputPage"
import { availableCreditLimitPage } from "../../pages/extraDetails/AvailableCreditLimitPage"
import { profileReverificationPage } from "../../pages/extraDetails/profile-ReverificationPage"
import { verifyHouseholdIncomePage } from "../../pages/extraDetails/verifyHouseholdIncomePage"
import { enterYourNewEmailAddressPage } from "../../pages/accounts/enterYourNewEmailAddressPage"
import { grievanceRedressalPolicyInfoPage } from "../../pages/generic/GrievanceRedressalPolicyInfoPage"
import { lendingPartnersPage } from "../../pages/onboarding/general/LendingPartnersPage"
import { repaymentPage } from "../../pages/repayments/RepaymentPage"
import { paymentHistoryPage } from "../../pages/repayments/PaymentHistoryPage"
import { lendingPartnerBanksPage } from "../../pages/settings/LendingPartnerBanksPage"

//csr
import { csrInfoPage } from "../../pages/creditScoreReport/CSRInfoPage"
import { csrProfileInformationPage } from "../../pages/creditScoreReport/CSRProfileInformationPage"
import { csrOTPInputPage } from "../../pages/creditScoreReport/CSROTPInputPage"
import { csrPaymentOptionsPage } from "../../pages/creditScoreReport/CSRPaymentOptionsPage"
import { csrAnalysisPage } from "../../pages/creditScoreReport/CSRAnalysisPage"
import { csrAccountHistoryPage } from "../../pages/creditScoreReport/CSRAccountHistoryPage";
import { csrCompareInfoPage } from "../../pages/creditScoreReport/CSRCompareInfoPage";

//repayments
import { changeLanguage } from "../../pages/generic/ChangeLanguage"
import { loginPage } from "../../pages/onboarding/general/LoginPage"
import { mobileInputPage } from "../../pages/onboarding/general/MobileInputPage"
import { otpMaximumAttemptsReachedPage } from "../../pages/onboarding/general/OTPMaximumAttemptsReachedPage"
import { referalPopupPage } from "../../pages/onboarding/general/ReferralCodePopUpPage"
import { autoDebitMandidatesPage } from "../../pages/accounts/autoDebit/autoDebitMandatesPage"

import { forecloseLoanPage } from "../../pages/repayments/ForecloseLoanPage";
import { foreclosureReasonPage } from "../../pages/repayments/ForeclosureReasonPage"
import { emailAddressInputPage } from "../../pages/onboarding/profile/generalInformation/EmailAddressInputPage"
import { saProductDetailsPage } from "../../pages/loan/sa/SAProductDetailsPage"
import { saEmpDetailsPage } from "../../pages/loan/sa/SAEmpDetailsPage"
import { saVerifyEmploymentPage } from "../../pages/loan/sa/SA-VerifyEmploymentPage"

import { offersHomePage } from "../../pages/offers/OffersHomePage"
import { goldBuyPage } from "../../pages/gold/GoldBuyPage"
import { goldHomePage } from "../../pages/gold/GoldHomePage"
import { cooldownPeriodPage } from "../../pages/loan/fpl/FPL-CooldownPeriodPage"

//bank
import { bankAccountDetailsPage } from "../../pages/bank/BankAccountDetailsPage"
import { findIFSCPage } from "../../pages/bank/FindIFSCPage"
//header
import { help } from "../../pages/help/helpPage"
import { pdVerifyingDetailsPage } from "../../pages/pd/PDVerifyingDetailsPage"
import { paymentOptionPage } from "../../pages/payments/PaymentOptionPage"
import { verifyWorkEmailInfoPage } from "../../pages/pd/basicDetails/verifyWorkEmail/VerifyWorkEmailInfoPage"
import { verifyWorkEmailPage } from "../../pages/pd/basicDetails/verifyWorkEmail/verifyWorkEmailPage"
import { verifyWorkEmailOTPInputPage } from "../../pages/pd/basicDetails/verifyWorkEmail/VerifyWorkEmailOTPInputPage"
import { saVerifyWorkEmailRefreshPage } from "../../pages/loan/sa/SAVerifyWorkEmailRefreshPage"

//PD
import { pdPage, PDPage } from "../../pages/pd/PDPage"
import { businessDetailsPage } from "../../pages/pd/businessDetails/businessDetailsPage";
import { uploadGSTR3BPage } from "../../pages/pd/businessDetails/uploadGSTR3BPage";
import { assetValidationPage } from "../../pages/pd/assetValidation/AssetValidationPage"
import { selectServiceProviderPage } from "../../pages/pd/assetValidation/SelectServiceProviderPage"
import { verifyElectricityConnectionInfoPage } from "../../pages/pd/assetValidation/VerifyElectricityConnecitonInfoPage"
import { verifyElectricityConnectionPage } from "../../pages/pd/assetValidation/VerifyElectricityConnectionPage"
import { incomeVerificationPage } from "../../pages/pd/incomeVerification/IncomeVerificationPage"
import { itrvValiationInfoPage } from "../../pages/pd/incomeVerification/ITR5ValiationInfoPage"
import { itrvValdiationPage } from "../../pages/pd/incomeVerification/ITR5ValdiationPage"
import { basicDetailsPage } from "../../pages/pd/basicDetails/basicDetailsPage";
import { verifyCommunicationAddressSteps } from "../../pages/pd/basicDetails/verifyCommunicationAddress/VerifyCommunicationAddressSteps";
import { mobileTrustScoreInfoPage } from "../../pages/pd/basicDetails/verifyMobileTrustScore/MobileTrustScoreInfoPage";
import { mobileLetterOfContext } from "../../pages/pd/basicDetails/verifyMobileTrustScore/MobileLetterOfContext";
import { mobileTrustOTPInputPage } from "../../pages/pd/basicDetails/verifyMobileTrustScore/MobileTrustScoreOTPInputPage";
import { emailVerifyingDetailsPage } from "../../pages/pd/basicDetails/verifyWorkEmail/emailVerifyingDetailsPage";
import { calculatingCreditLimitPage } from "../../pages/extraDetails/calculatingCreditLimitpage";
import { autoDebitSetupPage } from "../../pages/pd/autoDebitSetup/AutoDebitSetupPage";
import { autoDebitSetupInfoPage } from "../../pages/pd/autoDebitSetup/AutoDebitSetupInfoPage";
import { autoDebitOptionsInfoPage } from "../../pages/pd/autoDebitSetup/AutoDebitOptionsInfoPage";
import { nachAutoDebitSetupPage, NACHAutoDebitSetupPage } from "../../pages/pd/autoDebitSetup/NACHAutoDebitSetupPage"

//login
import { knowAboutProductPage } from "../../pages/onboarding/general/KnowAboutProductPage"
import { cancelPolicyPage } from "../../pages/insurance/cancelPolicyPage"
import { cancelPolicyPopUpPage } from "../../pages/insurance/cancelPolicyPopUpPage"
import { kycDocumentsPage } from "../../pages/onboarding/profile/kyc/KYCDocumentsPage"
import { referencesPage } from "../../pages/onboarding/profile/referenceContacts/ReferencesPage"
import { verifyConfirmAddressDetails } from "../../pages/pd/basicDetails/verifyCommunicationAddress/VerifyConfirmAddressDetails"


describe('business - Insurance , Purchase Loan ', () => {

    it('KB-T51898 (1.0)ACKO CREDITSHIELD LOAN: Check if the user is eligible for insurance policy Premium then, user is able see the policy in loan amount page (cloned)', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-6.2kFPL.json' })
        cy.intercept('**/category?name=fpl*', { fixture: 'loan/fpl/fplPage-6.2k.json' })
        cy.intercept('**/products?productId=**', { fixture: '/loan/fpl/viewSummayAndChargesPage.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountDetailsPage-FeesCalculation.json' })
        // cy.intercept('**/ins/policies/details?premium_id=**', { fixture: 'insurance/premiumDetailsPage-ICICI.json' })
        cy.visitURL('/newhome', { failOnStatusCode: false })
        homePage.clickFPLGetNowBtn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.verifyInsurancePremiumLabel('Insurance Premium ')
        fplLoanAmountDetailsPage.verifyDeductedFromLoanText('Deducted from loan amount.Know More')
        fplLoanAmountDetailsPage.verifyBuyEMIText('Buy EMI Protect : â‚¹ 73')
    })

    it('KB-T5994 Check if the user is able to raise a claim for Issued policy.', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-FPLInsurancePolicy.json' })
        cy.intercept('**/ecom/offers?type=insuranceHomeBanner', { fixture: 'insurance/buyPolicyPage-Banner.json' })
        cy.intercept('**/vasins/policies', { fixture: 'insurance/buyPolicyPage-MyPolicies.json' })
        cy.intercept('**/vasins/policies/userpolicy', { fixture: 'insurance/myPoliciesPage-RaiseCliam.json' })
        cy.visitURL('/newhome')
        homePage.clickIconInsurance()
        insuranceBuyPolicyListPage.clickMyPoliciesLink()
        myPoliciesPage.verifyPageTitle('My Policies')
        myPoliciesPage.verifyPolicyIssuedLabel('Issued')
        myPoliciesPage.verifyRaiseClaimButton('Raise Claim')
        myPoliciesPage.clickRaiseClaimButton()

    })
    it('KB-T6003 Verify if pop up is displayed to confirm if the user wants to cancel the policy, when she/he clicks on "Cancel Policy" option for issued policy.', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-FPLInsurancePolicy.json' })
        cy.intercept('**/ecom/offers?type=insuranceHomeBanner', { fixture: 'insurance/buyPolicyPage-Banner.json' })
        cy.intercept('**/vasins/policies', { fixture: 'insurance/buyPolicyPage-MyPolicies.json' })
        cy.intercept('**/vasins/policies/userpolicy', { fixture: 'insurance/myPoliciesPage-CancelPolicy.json' })
        cy.intercept('**/vasins/policies/cancel', { fixture: '/insurance/policyPage-CancelPolicy.json' })
        cy.visitURL('/newhome')
        homePage.clickIconInsurance()
        insuranceBuyPolicyListPage.clickMyPoliciesLink()
        myPoliciesPage.verifyPageTitle('My Policies')
        myPoliciesPage.verifyPolicyIssuedLabel('Issued')
        myPoliciesPage.clickCancelPolicyLink()
        cancelPolicyPage.verifyPageTitle('Cancel Policy')
        cancelPolicyPage.clickSelectCancellationReasonLabel()
        cancelPolicyPage.clickIDontNeedThePolicyAnymoreText()
        cancelPolicyPage.clickCheckBox()
        cancelPolicyPage.clickCancelPolicyButton()
        cancelPolicyPopUpPage.verifyPageTitle('Are you sure you want to cancel the policy')
        cancelPolicyPopUpPage.clickYesCancelPolicyButton()
    })

    it('KB-T23988 (1.0) VD: Check if insurance is displayed under My Policies after insurance Payment is Successful', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-FPLInsurancePolicy.json' })
        cy.intercept('**/ecom/offers?type=insuranceHomeBanner', { fixture: 'insurance/buyPolicyPage-Banner.json' })
        cy.intercept('**/vasins/policies', { fixture: 'insurance/buyPolicyPage-MyPolicies.json' })
        cy.intercept('**/vasins/policies/userpolicy', { fixture: 'insurance/myPoliciesPage-RaiseCliam.json' })
        cy.visitURL('/newhome')
        homePage.clickIconInsurance()
        insuranceBuyPolicyListPage.clickMyPoliciesLink()
        myPoliciesPage.verifyPageTitle('My Policies')
        myPoliciesPage.verifyPolicyIssuedLabel('Issued')
    })

    it('1.KB-T28118 (1.0)MY ACCOUNTS: Check if the policy issued successfully with the first premium for the policy.', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-Insurance.json' })
        cy.intercept('**/myaccount', { fixture: 'accounts/accountsPage-Insurance.json' })
        cy.intercept('**/vasins/policies', { fixture: 'insurance/buyPolicyPage.json' })
        cy.intercept('**/vasins/policies/details?policy_id=**', { fixture: 'insurance/policyDetailsPage.json' })
        cy.intercept('**/vasins/policies/states', { fixture: 'insurance/buyInsurancePolicyPage.json' })
        cy.intercept('**/vasins/policies/userpremium?policy_id=10', { fixture: 'insurance/buyInsurancePremiumPolicyPage.json' })
        //cy.intercept('**/me/tnc/insurance', { fixture: 'insurance/insurancePolicyDetailsPage-tnc.json' })
        cy.intercept('**/vasins/policies/paymentdetails?policy_Id=**&premium_Id=**', { fixture: 'insurance/policyPaymentDetailsPage.json' })
        cy.intercept('**/vasins/policies/order', { fixture: 'insurance/PaymentOptionPage.json' })
        cy.visitURL('/newhome')
        footerPage.clickAccountIcon()
        accountsPage.clickInsuranceBtn()
        insuranceBuyPolicyListPage.clickGetNowBtn('Personal Accident + Hospicash (Reimbursement of Rs. 1000 per day)')
        insurancePolicyDetailsPage.verifyPolicyPeriodLabel('POLICY PERIOD')
        insurancePolicyDetailsPage.verifyCoverageUptoLabel('COVERAGE UPTO')
        insurancePolicyDetailsPage.verifyPremiumStartsAtLabel('PREMIUM STARTS AT')
        insurancePolicyDetailsPage.verifyWhatsCoveredLabel("What's Covered")
        insurancePolicyDetailsPage.clickTermsAndConditionsLink()
        insuranceTermsAndConditionsPage.clickInsuranceTermsAndConditionsPageBackButton()
        insurancePolicyDetailsPage.clickGetInsuredInJust5MinutesButton()
        insuranceBuyPolicyPage.verifySelectAPlanLabel('Select a Plan')
        insuranceBuyPolicyPage.verifyCustomerInformationLabel('Customer Information')
        insuranceBuyPolicyPage.verifyAddressEditIcon()
        insuranceBuyPolicyPage.verifyAddANomineeOptionalLabel('Add a nominee')
        insuranceBuyPolicyPage.clickSelectAPlanRadioButton()
        insuranceBuyPolicyPage.clickIAgreeToTermsAndConditionsCheckbox()
        insuranceBuyPolicyPage.clickContinueButton()
        insurancePolicyPaymentPage.verifyPageTitle('Payment')
        insurancePolicyPaymentPage.verifyConfirmAndPayButton('Confirm and Pay')
        insurancePolicyPaymentPage.clickConfirmAndPayButton()
        paymentOptionPage.verifyPageTitle('Payment Option')


    })
    it('2.KB-T28118 (1.0)MY ACCOUNTS: Check if the policy issued successfully with the first premium for the policy.', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-FPLInsurancePolicy.json' })
        cy.intercept('**/ecom/offers?type=insuranceHomeBanner', { fixture: 'insurance/buyPolicyPage-Banner.json' })
        cy.intercept('**/vasins/policies', { fixture: 'insurance/buyPolicyPage-MyPolicies.json' })
        cy.intercept('**/vasins/policies/userpolicy', { fixture: 'insurance/myPoliciesPage-RaiseCliam.json' })
        cy.visitURL('/newhome')
        homePage.clickIconInsurance()
        insuranceBuyPolicyListPage.clickMyPoliciesLink()
        myPoliciesPage.verifyPageTitle('My Policies')
        myPoliciesPage.verifyPolicyIssuedLabel('Issued')
    })

    it('KB-T15732 (1.0)Check if the payment via payu when the feeType is n for the policy', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-Insurance.json' })
        cy.intercept('**/myaccount', { fixture: 'accounts/myAccountPage.json' })
        cy.intercept('**/vasins/policies', { fixture: 'insurance/BuyPolicyPage-INS.json' })
        cy.intercept('**/vasins/policies/details?policy_id=**', { fixture: 'insurance/policyDetailsPage-Insurance.json' })
        cy.intercept('**/vasins/policies/states', { fixture: 'insurance/buyInsurancePolicyPage.json' })
        cy.intercept('**/vasins/policies/userpremium?policy_id=**', { fixture: 'insurance/buyInsurancePremiumPolicyPage.json' })
        cy.intercept('**/me/tnc/insurance', { fixture: 'insurance/insurancePoilcyDetailsPage-TNC.json' })
        cy.intercept('**/vasins/policies/paymentdetails?policy_Id=**&premium_Id=**', { fixture: 'insurance/policyPaymentDetailsPage.json' })
        cy.intercept('**/vasins/policies/order', { fixture: 'insurance/paymentOptionPage-Order.json' })
        cy.visitURL('/newhome')
        footerPage.clickAccountIcon()
        accountsPage.clickInsuranceBtn()
        insuranceBuyPolicyListPage.clickGetNowBtn('Personal Accident + Hospicash (Reimbursement of Rs. 1000 per day)')
        insurancePolicyDetailsPage.verifyPolicyPeriodLabel('POLICY PERIOD')
        insurancePolicyDetailsPage.verifyCoverageUptoLabel('COVERAGE UPTO')
        insurancePolicyDetailsPage.verifyPremiumStartsAtLabel('PREMIUM STARTS AT')
        insurancePolicyDetailsPage.verifyWhatsCoveredLabel("What's Covered")
        insurancePolicyDetailsPage.clickTermsAndConditionsLink()
        insuranceTermsAndConditionsPage.clickInsuranceTermsAndConditionsPageBackButton()
        insurancePolicyDetailsPage.clickGetInsuredInJust5MinutesButton()
        insuranceBuyPolicyPage.verifySelectAPlanLabel('Select a Plan')
        insuranceBuyPolicyPage.verifyCustomerInformationLabel('Customer Information')
        insuranceBuyPolicyPage.verifyAddressEditIcon()
        insuranceBuyPolicyPage.verifyAddANomineeOptionalLabel('Add a nominee')
        insuranceBuyPolicyPage.clickSelectAPlanRadioButton()
        insuranceBuyPolicyPage.clickIAgreeToTermsAndConditionsCheckbox()
        insuranceBuyPolicyPage.clickContinueButton()
        insurancePolicyPaymentPage.verifyPageTitle('Payment')
        insurancePolicyPaymentPage.verifyConfirmAndPayButton('Confirm and Pay')
        insurancePolicyPaymentPage.clickConfirmAndPayButton()
        paymentOptionPage.verifyTitlePaymentOptionPage('Payment Option')
    })

    it('KB-T21042 (1.0)Check if the Cancel Button should only be visible from policy start date and time in my policies page', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-ICICIInsurancePolicy.json' })
        cy.intercept('**/myaccount', { fixture: 'accounts/accountsPage-Insurance.json' })
        cy.intercept('**/ecom/offers?type=insuranceHomeBanner', { fixture: 'insurance/buyPolicyPage-BannerICICI.json' })
        cy.intercept('**/vasins/policies', { fixture: 'insurance/buyPolicyPage-MyPoliciesICICI.json' })
        cy.intercept('**/vasins/policies/userpolicy', { fixture: 'insurance/myPoliciesPage-ICICI-CancelPolicy.json' })
        cy.intercept('**/vasins/policies/cancel', { fixture: 'insurance/cancelPolicyPage-ICICI.json' })
        cy.visitURL('/newhome', { failOnStatusCode: false })
        footerPage.clickAccountIcon()
        accountsPage.clickInsuranceBtn()
        insuranceBuyPolicyListPage.clickMyPoliciesLink()
        myPoliciesPage.verifyCancelPolicyLink('Cancel Policy')
    })

    it('1.KB-T43105 (1.0)ACKO CREDITSHIELD DISBURSAL: Check if the Cover and premium amount is displayed correctly for the Insurance and loan disbursed successfully with PK-SA', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-20kSA.json' })
        cy.intercept('**/preloanre?productId=5&action=getNow&preLoanEvent=preLoanGetNowClick&src=cash', { fixture: 'preLoanRE/preloanREPage-SA.json' })
        cy.intercept('**/products/calcfees?productid=**&loanamt=**&tenure=*', { fixture: 'loan/sa/loanAmountDetailsPage-WaitScreen.json' })
        cy.intercept('**/products?productId=**', { fixture: '/loan/fpl/viewSummayAndChargesPage.json' })
        cy.intercept('**/ins/policies/details?premium_id=**', { fixture: 'insurance/premiumDetailsPage.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/selectBankAccountPage-BankSelected.json' })
        cy.intercept('**/loan/la?updateMFILimit=0&productid=5&pointType=&csrFee=2', { fixture: 'loan/sa/signLoanDocumentPage.json' })
        cy.intercept('**/loan/la?type=kb&productid=**', { fixture: 'loan/sa/sanctionLetterPage.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/sa/loanSanctionLetterPage.json' })
        cy.intercept('**/me/tnc/loanSignService', { fixture: 'loan/sa/signServicePage.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otpPage-SignService.json' })
        cy.intercept('**/me?source=session', { fixture: 'loan/sa/loanApplicationSubmittedPage.json' })
        cy.intercept('**/me/otp?reason=clickwrap', { fixture: 'loan/sa/otpPage-otpsubmit.json' })
        cy.intercept('**/me/loan', { fixture: 'loan/sa/LoanApplicationSubmittedPage-applSubmitted.json' })
        cy.visitURL('/newhome')
        homePage.clickSA20KGetNowBtn()
        saLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        saLoanAmountDetailsPage.clickKnowMoreLink()
        insuranceDetailsPage.verifyCoverageUptoLabel('COVERAGE UPTO')
        insuranceDetailsPage.verifyInsuranceCoverageValue('6,200')
        insuranceDetailsPage.verifyOneTimePremiumLabel('ONE TIME PREMIUM')
        insuranceDetailsPage.verifyOneTimePremiumValue('73')
        insuranceDetailsPage.clickOkBtn()
        saLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.verifyPageTitle('Sign Loan Document')
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.verifypageTitle('KFS & Sanction letter')
        kfsSanctionLetterPage.verifyLoanSanctionedByLabel('Your loan is being sanctioned by:')
        kfsSanctionLetterPage.verifyLenderNameText('Krazybee Services Private Limited.')
        kfsSanctionLetterPage.verifyConsentSanctionLetterText('I have read and understood the Key Fact Statement and Sanction Letter issued by the Lender(s) in respect of my loan application and I accept the same. I also understand and agree to continue receiving promotional communication from the Lenders and in respect of the value added services being offered by KreditBee.')
        kfsSanctionLetterPage.selectBoxSanctionLetter('Continue to Sign Loan Document')
        kfsSanctionLetterPage.verifyContinueToSignLoanDocumentText('Continue to Sign Loan Document')
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        signDocumentPage.verifyPageTitle('Sign Document')
        signDocumentPage.verifyInfoSignDocumentText('These Standard Terms & Conditions along with the Most Important Terms and Conditions form a legal and binding agreement upon acceptance pursuant to the Indian Contract Act, 1872 and the Information Technology Act, 2000.')
        signDocumentPage.verifyContinueText('Continue')
        signDocumentPage.clickContinueButton()
        signServicePage.clickConsentReadText()
        signServicePage.clickConsentUnderstoodText()
        signServicePage.clickConsentLegalAndBindingText()
        signServicePage.clickContinueButton()
        signServiceOTPInputPage.enterOTP('395389')
        loanApplicationSubmittedPage.verifypageTitle('Loan Application submitted')
    })

    it('2.KB-T43105 (1.0)ACKO CREDITSHIELD DISBURSAL: Check if the Cover and premium amount is displayed correctly for the Insurance and loan disbursed successfully with PK-SA', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-SAInsurancePolicy.json' })
        cy.intercept('**/vasins/policies', { fixture: 'insurance/buyPolicyPage-MyPolicies.json' })
        cy.intercept('**/vasins/policies/userpolicy', { fixture: 'insurance/myPoliciesPage.json' })
        cy.visitURL('/newhome')
        homePage.clickIconInsurance()
        insuranceBuyPolicyListPage.clickMyPoliciesLink()
        myPoliciesPage.verifyPageTitle('My Policies')
        myPoliciesPage.verifyPolicyIssuedLabel('Issued')
    })

    it('1-KB-T43013 ACKO CREDITSHIELD LOAN: Check if the policy is issued for Acko Creditshield policy', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-6.2kFPL.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-6.2k.json' })
        cy.intercept('**/preloanre?productId=14&action=getNow&prIeLoanEvent=preLoanGetNowClick&src=cash', { fixture: 'loan/fpl/fpl6.2KPreloanREPage.json' })
        cy.intercept('**/products?productId=**', { fixture: '/loan/fpl/viewSummayAndChargesPage.json' })
        cy.intercept('**/products/calcfees?productid=14&loanamt=6200&tenure=4', { fixture: 'loan/fpl/fplLoanAmountDetailsPage-FeesCalculation.json' })
        cy.intercept('**/ins/policies/details?premium_id=**', { fixture: 'insurance/premiumDetailsPage-FPL.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/selectBankAccountPage-BankSelected.json' })
        cy.intercept('**/loan/la?updateMFILimit=0&productid=5&pointType=&csrFee=2', { fixture: 'loan/sa/signLoanDocumentPage.json' })
        cy.intercept('**/loan/la?type=kb&productid=**', { fixture: 'loan/sa/sanctionLetterPage.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/sa/loanSanctionLetterPage.json' })
        cy.intercept('**/me/tnc/loanSignService', { fixture: 'loan/sa/signServicePage.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otpPage-SignService.json' })
        cy.intercept('**/me?source=session', { fixture: 'loan/sa/loanApplicationSubmittedPage.json' })
        cy.intercept('**/me/otp?reason=clickwrap', { fixture: 'loan/sa/otpPage-otpsubmit.json' })
        cy.intercept('**/me/loan', { fixture: 'loan/sa/LoanApplicationSubmittedPage-applSubmitted.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.clickInsuranceKnowMoreLink()
        insuranceDetailsPage.verifyCoverageUptoLabel('COVERAGE UPTO')
        insuranceDetailsPage.verifyInsuranceCoverageValue('6,200')
        insuranceDetailsPage.verifyOneTimePremiumLabel('ONE TIME PREMIUM')
        insuranceDetailsPage.verifyOneTimePremiumValue('73')
        insuranceDetailsPage.clickOkBtn()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.verifyPageTitle('Sign Loan Document')
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.verifypageTitle('KFS & Sanction letter')
        kfsSanctionLetterPage.verifyLoanSanctionedByLabel('Your loan is being sanctioned by:')
        kfsSanctionLetterPage.verifyLenderNameText('Krazybee Services Private Limited.')
        kfsSanctionLetterPage.verifyConsentSanctionLetterText('I have read and understood the Key Fact Statement and Sanction Letter issued by the Lender(s) in respect of my loan application and I accept the same. I also understand and agree to continue receiving promotional communication from the Lenders and in respect of the value added services being offered by KreditBee.')
        kfsSanctionLetterPage.selectBoxSanctionLetter('Continue to Sign Loan Document')
        kfsSanctionLetterPage.verifyContinueToSignLoanDocumentText('Continue to Sign Loan Document')
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        signDocumentPage.verifyPageTitle('Sign Document')
        signDocumentPage.verifyInfoSignDocumentText('These Standard Terms & Conditions along with the Most Important Terms and Conditions form a legal and binding agreement upon acceptance pursuant to the Indian Contract Act, 1872 and the Information Technology Act, 2000.')
        signDocumentPage.verifyContinueText('Continue')
        signDocumentPage.clickContinueButton()
        signServicePage.clickConsentReadText()
        signServicePage.clickConsentUnderstoodText()
        signServicePage.clickConsentLegalAndBindingText()
        signServicePage.clickContinueButton()
        signServiceOTPInputPage.enterOTP('395389')
    })

    it('2-KB-T43013 ACKO CREDITSHIELD LOAN: Check if the policy is issued for Acko Creditshield policy', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-FPLInsurancePolicy.json' })
        cy.intercept('**/ecom/offers?type=insuranceHomeBanner', { fixture: 'insurance/buyPolicyPage-Banner.json' })
        cy.intercept('**/vasins/policies', { fixture: 'insurance/buyPolicyPage-MyPolicies.json' })
        cy.intercept('**/vasins/policies/userpolicy', { fixture: 'insurance/myPoliciesPage-RaiseCliam.json' })
        cy.visitURL('/newhome')
        homePage.clickIconInsurance()
        insuranceBuyPolicyListPage.clickMyPoliciesLink()
        myPoliciesPage.verifyPageTitle('My Policies')
        myPoliciesPage.verifyPolicyIssuedLabel('Issued')
        myPoliciesPage.verifyRaiseClaimButton('Raise Claim')
    })

    it('KB-T41146 (1.0)check flat type processing fee is applied for the loan, based on the loan amount', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-FPLMFIband.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-5k.json' })
        cy.intercept('**/preloanre?productId=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-preLoanRE-srcCash.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/fpl/Amount6k-Tenure3-MLA-subbandGood.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-feescalculations.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.verifyPageTitle('Flexi Personal Loan')
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.verifyRepaymentShedulePageButton()
        fplLoanAmountDetailsPage.verifyProcessingFee()

    })

    it('1.KB-T55764 (1.0) Ensure User can Activate Checkout from homepage when EWA loan is active', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-PurchaseLoan.json' })
        cy.intercept('**/checkout/topmerchants?onlineBannerCount=25&offlineBannerCount=25', { fixture: 'loan/purchaseLoan-Banner.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'loan/purchaseLoanPage.json' })
        cy.intercept('**/main/me/tnc/loan_bank_add', { fixture: 'bank/addBankAccountPage-PurchaseLoan.json' })
        cy.intercept('**/me/bank', { fixture: 'bank/BankAccountVerificationPage-BankAdded.json' })
        //cy.intercept('**/misc/bank?ifsc=**', { fixture: 'bank/bankAccountVerificationPage-IFSCSearchResult.json' })
        cy.visitURL('/newhome', { failOnStatusCode: false })
        homePage.clickActiveNowButton()
        purchaseLoanPage.clickActiveNowButton()
        addBankAccountPage.enterIFSC('CBIN0283979')
        addBankAccountPage.enterAccountNumber('3379955585')
        addBankAccountPage.enterConfirmAccountNumber('3379955585')
        addBankAccountPage.clickAddAccountBtn()
        bankAccountVerificationPage.verifyPageTitle('Account verification')
        bankAccountVerificationPage.clickContinueBtn()
    })

    it('2.KB-T55764 (1.0)Ensure User can Activate Checkout from homepage when EWA loan is active', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-BankAdded.json' })
        cy.intercept('**/myaccount', { fixture: 'accounts/accountPage-BankAdded.json' })
        cy.intercept('**/bank', { fixture: 'bank/bankAccountPage-BankAdded.json' })
        cy.visitURL('/newhome', { failOnStatusCode: false })
        homePage.verifyProcessingText('PROCESSING')
        footerPage.clickAccountIcon()
        accountsPage.clickBankAccountsBtn()
        bankAccountsPage.verifyPageTitle('Bank Accounts')
        bankAccountsPage.verifyAccountNumberValue('XXXXXXX5585')
    })

    it('KB-T15712 (1.0)Check whether the Terms and Conditions hyperlink is present and working for I agree checkbox in Buy policy page', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-Insurance.json' })
        cy.intercept('**/myaccount', { fixture: 'accounts/myAccountPage.json' })
        cy.intercept('**/vasins/policies', { fixture: 'insurance/BuyPolicyPage-INS.json' })
        cy.intercept('**/vasins/policies/details?policy_id=**', { fixture: 'insurance/policyDetailsPage-Insurance.json' })
        cy.intercept('**/vasins/policies/states', { fixture: 'insurance/buyInsurancePolicyPage.json' })
        cy.intercept('**/vasins/policies/userpremium?policy_id=**', { fixture: 'insurance/buyInsurancePremiumPolicyPage.json' })
        cy.visitURL('/newhome')
        footerPage.clickAccountIcon()
        accountsPage.clickInsuranceBtn()
        insuranceBuyPolicyListPage.verifyPageTitle('Buy Policy')
        insuranceBuyPolicyListPage.clickGetNowBtn('Personal Accident + Hospicash (Reimbursement of Rs.')
        insurancePolicyDetailsPage.verifyInsurancePolicyDetailTitle('Personal Accident + Hospicash (Reimbursement of Rs. ')
        insurancePolicyDetailsPage.verifyPolicyPeriodLabel('POLICY PERIOD')
        insurancePolicyDetailsPage.verifyCoverageUptoLabel('COVERAGE UPTO')
        insurancePolicyDetailsPage.verifyPremiumStartsAtLabel('PREMIUM STARTS AT')
        insurancePolicyDetailsPage.verifyWhatsCoveredLabel("What's Covered")
        insurancePolicyDetailsPage.clickTermsAndConditionsLink()
        insuranceTermsAndConditionsPage.verifyInsuranceTermsAndConditionsPageTitle('Terms & Conditions')
    })

    it('KB-T60522 (1.0)Check if the payment via Debit Card payment for the policy', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-Insurance.json' })
        cy.intercept('**/myaccount', { fixture: 'accounts/accountsPage-Insurance.json' })
        cy.intercept('**/vasins/policies', { fixture: 'insurance/buyPolicyPage.json' })
        cy.intercept('**/vasins/policies/details?policy_id=**', { fixture: 'insurance/policyDetailsPage.json' })
        cy.intercept('**/vasins/policies/states', { fixture: 'insurance/buyInsurancePolicyPage.json' })
        cy.intercept('**/vasins/policies/userpremium?policy_id=**', { fixture: 'insurance/buyInsurancePremiumPolicyPage.json' })
        //  cy.intercept('**/vasme/tnc/insurance', { fixture: 'insurance/insurancePolicyDetailsPage-tnc.json' })
        cy.intercept('**/vasins/policies/paymentdetails?policy_Id=**&premium_Id=**', { fixture: 'insurance/policyPaymentDetailsPage.json' })
        cy.intercept('**/vasins/policies/order', { fixture: '/insurance/paymentOptionPage-Order.json' })
        cy.intercept('**/vasins/policies/insurancereport?user_policy_id=**', { fixture: '/payments/paymentOptionPage-Pay.json' })
        cy.intercept('**/vasins/vaspolicies/paymentdetails?policy_Id=10&premium_Id=**', { fixture: '/insurance/toedit/paymentOptionPage-Ins.json' })
        cy.intercept('**/vasins/vaspolicies/insurancereport?user_policy_id=**', { fixture: '/payments/toedit/paymentOptionPage-Order.json' })
        cy.visitURL('/newhome', { failOnStatusCode: false })
        footerPage.clickAccountIcon()
        accountsPage.clickInsuranceBtn()
        cy.wait(4000)
        insuranceBuyPolicyPage.clickGetNowBtn('Personal Accident + Hospicash (Reimbursement of Rs. 1000 per day)')
        insurancePolicyDetailsPage.clickGetInsuredInJust5MinutesButton()
        insuranceBuyPolicyPage.clickSelectAPlanRadioButton()
        insuranceBuyPolicyPage.clickIAgreeToTermsAndConditionsCheckbox()
        insuranceBuyPolicyPage.clickContinueButton()
        insurancePolicyPaymentPage.verifyPageTitle('Payment')
        insurancePolicyPaymentPage.verifyConfirmAndPayButton('Confirm and Pay')
        insurancePolicyPaymentPage.clickConfirmAndPayButton()
        cy.wait(5000)
        paymentOptionPage.clickPayWithDebitCard()
    })
    it('KB-T60522 (1.0)Check if the payment via Debit Card payment for the policy', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-FPLInsurancePolicy.json' })
        cy.intercept('**/ecom/offers?type=insuranceHomeBanner', { fixture: 'insurance/buyPolicyPage-Banner.json' })
        cy.intercept('**/vasins/policies', { fixture: 'insurance/buyPolicyPage-MyPolicies.json' })
        cy.intercept('**/vasins/policies/userpolicy', { fixture: 'insurance/myPoliciesPage-Requested.json' })
        cy.visitURL('/newhome')
        homePage.clickIconInsurance()
        insuranceBuyPolicyListPage.clickMyPoliciesLink()
        myPoliciesPage.verifyPageTitle('My Policies')
        myPoliciesPage.verifyPolicyRequestedLabel('Requested')
    })

    it('KB-T60523 (1.0)Check if the payment via Net Banking payment for the policy', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-Insurance.json' })
        cy.intercept('**/myaccount', { fixture: 'accounts/accountsPage-Insurance.json' })
        cy.intercept('**/vasins/policies', { fixture: 'insurance/buyPolicyPage.json' })
        cy.intercept('**/vasins/policies/details?policy_id=**', { fixture: 'insurance/policyDetailsPage.json' })
        cy.intercept('**/vasins/policies/states', { fixture: 'insurance/buyInsurancePolicyPage.json' })
        cy.intercept('**/vasins/policies/userpremium?policy_id=**', { fixture: 'insurance/buyInsurancePremiumPolicyPage.json' })
        //  cy.intercept('**/vasme/tnc/insurance', { fixture: 'insurance/insurancePolicyDetailsPage-tnc.json' })
        cy.intercept('**/vasins/policies/paymentdetails?policy_Id=**&premium_Id=**', { fixture: 'insurance/policyPaymentDetailsPage.json' })
        cy.intercept('**/vasins/policies/order', { fixture: '/insurance/paymentOptionPage-Order.json' })
        cy.intercept('**/vasins/policies/insurancereport?user_policy_id=**', { fixture: '/payments/paymentOptionPage-Pay.json' })
        cy.intercept('**/vasins/vaspolicies/paymentdetails?policy_Id=10&premium_Id=**', { fixture: '/insurance/toedit/paymentOptionPage-Ins.json' })
        cy.intercept('**/vasins/vaspolicies/insurancereport?user_policy_id=**', { fixture: '/payments/toedit/paymentOptionPage-Order.json' })
        cy.visitURL('/newhome', { failOnStatusCode: false })
        footerPage.clickAccountIcon()
        accountsPage.clickInsuranceBtn()
        cy.wait(4000)
        insuranceBuyPolicyPage.clickGetNowBtn('Personal Accident + Hospicash (Reimbursement of Rs. 1000 per day)')
        insurancePolicyDetailsPage.clickGetInsuredInJust5MinutesButton()
        insuranceBuyPolicyPage.clickSelectAPlanRadioButton()
        insuranceBuyPolicyPage.clickIAgreeToTermsAndConditionsCheckbox()
        insuranceBuyPolicyPage.clickContinueButton()
        insurancePolicyPaymentPage.verifyPageTitle('Payment')
        insurancePolicyPaymentPage.verifyConfirmAndPayButton('Confirm and Pay')
        insurancePolicyPaymentPage.clickConfirmAndPayButton()
        cy.wait(5000)
        paymentOptionPage.clickPayWithDebitCard()
    })
    it('KB-T60523 (1.0)Check if the payment via Net Banking payment for the policy', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-FPLInsurancePolicy.json' })
        cy.intercept('**/ecom/offers?type=insuranceHomeBanner', { fixture: 'insurance/buyPolicyPage-Banner.json' })
        cy.intercept('**/vasins/policies', { fixture: 'insurance/buyPolicyPage-MyPolicies.json' })
        cy.intercept('**/vasins/policies/userpolicy', { fixture: 'insurance/myPoliciesPage-Requested.json' })
        cy.visitURL('/newhome')
        homePage.clickIconInsurance()
        insuranceBuyPolicyListPage.clickMyPoliciesLink()
        myPoliciesPage.verifyPageTitle('My Policies')
        myPoliciesPage.verifyPolicyRequestedLabel('Requested')
    })

    it('KB-T42993 (1.0)ACKO CREDITSHIELD LOAN: Check if the user is eligible for insurance policy Premium then, user is able see the policy in loan amount page', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-InsuranceDetails.json' })
        cy.intercept('**/category?name=fpl*', { fixture: 'loan/fpl/fplPage-6.2k.json' })
        cy.intercept('**/products?productId=**', { fixture: '/loan/fpl/viewSummayAndChargesPage.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountDetailsPage-FeesCalculation.json' })
        cy.visitURL('/newhome', { failOnStatusCode: false })
        homePage.clickFPL8KGetNow()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.clickInsuranceKnowMoreLink()
        insuranceDetailsPage.verifyPageTitle('Insurance details')
        insuranceDetailsPage.verifyInsurerText('Acko General Insurance Limited')
        insuranceDetailsPage.verifyPolicyPeriodLabel('POLICY PERIOD')
        insuranceDetailsPage.verifyCoverageUptoLabel('COVERAGE UPTO')
        insuranceDetailsPage.verifyOneTimePremiumLabel('ONE TIME PREMIUM')
    })

    it('KB-T44511 (1.0)When Profile is Rejected in Profile, ensure Reject String is shown in Homepage with Date = Reject Datetime + reapplyWindowForEligibilityProfileRejectUsers.', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-Rejected.json' })
        cy.visitURL('/newhome')
        homePage.verifyWarningLabel('We are unable to process your loan at this time either due to certain anomalies in your profile or due to bad repayment behaviour. We suggest you improve your credit profile and retry with us after 6 months')
    })
    it('KB-T44510 (1.0)When Profile is Rejected in Eligibility, ensure Reject String is shown in Homepage with Date = Reject Datetime + reapplyWindowForEligibilityProfileRejectUsers', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-Rejected.json' })
        cy.visitURL('/newhome')
        homePage.verifyWarningLabel('We are unable to process your loan at this time either due to certain anomalies in your profile or due to bad repayment behaviour. We suggest you improve your credit profile and retry with us after 6 months')
    })
    it('KB-T30863 (2.0)Check whether any error is displayed when user enters invalid email domain or emial user <5 character', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-50Percent.json' })
        cy.intercept('**/me', { fixture: 'onBoarding/profile/profileInformationPage-KYCCompleted.json' })
        cy.intercept('**/me/substateinfo', { fixture: 'onBoarding/profile/profileInformationPage-substateInfo.json' })
        cy.intercept('**/me?type=info', { fixture: 'onBoarding/profile/generalInformation-emailVerificationStatus-NotPresent.json' })
        cy.visitURL('/newhome')
        homePage.clickContinueApplicationBtn()
        profileInformationPage.clickGeneralInformation()
        generalInformationPage.enterEmailInput('x@xxx.com')
        generalInformationPage.clickButtonSubmit()
        generalInformationPage.VerifyInvaildEmailText('Invalid Email address')
    })

    it('KB-T45365 [Profile Information] Check "verify Income" is enabled after submission of general information', () => {
        cy.intercept('**/main/home', { fixture: 'home/homepage-continueApplicationGeneralInfo-MailIDPresent.json' })
        cy.intercept('**/me/substateinfo', { fixture: 'onBoarding/profile/generalInformation-Substate-MailIDEnable.json' })
        cy.intercept('**/main/me', { fixture: 'onBoarding/profile/generalInformation-me-MailIDEnable.json' })
        cy.intercept('**/main/me?type=info', { fixture: 'onBoarding/profile/generalInformation-TypeInfo-personalInfo.json' })
        cy.intercept('**/main/misc/pincode?pincode=**', { fixture: 'onBoarding/profile/generalInformation-pincodeEnable.json' })

        cy.visitURL('/newhome')
        applicationStatusPage.clickContinueApplicationButton()
        profileInformationPage.verifyGeneralInformationlabel('General Information')
        profileInformationPage.clickGeneralInformation()
        generalInformationPage.clickSingleRadioButton()
        generalInformationPage.verifyEducationDropDown()
        generalInformationPage.clickEducationDropDown()
        generalInformationPage.verifyEducationDropDownList()
        generalInformationPage.clickEducationDropDownList()
        generalInformationPage.verifyprofessionOrOccupationDropDown()
        generalInformationPage.clickprofessionOrOccupationDropDown()
        generalInformationPage.verifyProfessionOrOccupationDropDownLabel()
        generalInformationPage.clickProfessionOrOccupationDropDownList()
        generalInformationPage.clickTypeOfResidenceDropDown()
        generalInformationPage.verifyTypeOfResidenceDropDownList()
        generalInformationPage.clickTypeOfResidenceDropDownList()
        generalInformationPage.clickContinuebutton()
        cy.intercept('**/me/substateinfo', { fixture: 'onBoarding/profile/profileInformationPage-VerifyIncome-Substate1.json' })
        cy.intercept('**/me', { fixture: 'onBoarding/profile/profileInformationpage-VerifyIncome-Me1.json' })
        cy.visit('/profile/summary', { failOnStatusCode: false });
        profileInformationPage.verifyIncomeVerifyLabel('Verify Income')
    })

    it('KB-T12033 (1.0)Check whether the purpose field is as selected by the customer in Sanction letter', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-6.2kFPL.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-6.2k.json' })
        cy.intercept('**/preloanre?productId=14&action=getNow&preLoanEvent=preLoanGetNowClick&src=cash', { fixture: 'loan/fpl/fpl6.2KPreloanREPage.json' })
        cy.intercept('**/products?productId=**', { fixture: '/loan/fpl/viewSummayAndChargesPage.json' })
        cy.intercept('**/products/calcfees?productid=14&loanamt=6200&tenure=**', { fixture: 'loan/fpl/fplLoanAmountDetailsPage-FeesCalculation.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/selectBankAccountPage-BankSelected.json' })
        cy.intercept('**/loan/la?updateMFILimit=0&productid=5&pointType=&csrFee=**', { fixture: 'loan/sa/signLoanDocumentPage.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-CHOLA.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/sa/loanSanctionLetterPage.json' })
        cy.intercept('**/me?source=session', { fixture: 'loan/sa/loanApplicationSubmittedPage.json' })

        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.verifyPageTitle('Sign Loan Document')
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.verifypageTitle('KFS & Sanction letter')
        kfsSanctionLetterPage.verifyScanctionLetterImage()
    })
    it('KB-T39981 (1.0)Check whether list of all mandates are shown when clicked Auto Debit mandates in the account page', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-AutoDebit.json' })
        cy.intercept('**/accounts', { fixture: 'accounts/accountsPage.json' })
        cy.intercept('**/me/nachmandate', { fixture: 'accounts/autoDebits/autoDebitMandidatesPage.json' })
        cy.visitURL('/newhome')
        footerPage.clickAccountIcon()
        accountsPage.clickAutoDebitMandateBtn()
        autoDebitMandidatesPage.verifyPageTitle('Auto Debit Mandates')
        autoDebitMandidatesPage.verifyCancellationProcessText('Cancellation Processing')
        autoDebitMandidatesPage.verifyActiveText('Active')
        autoDebitMandidatesPage.verifyCancelledText('Cancelled')
    })



})

describe('ProcessingFee', { retries: 1 }, () => {

    it('KB-T45184 [Refer & Earn] Verify the Redeem on Processing Fees popup page is redirected when the Processing Fees tab is clicked in Kreditbee points page', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-RedeemPoints.json' })
        cy.intercept('**/me/offers', { fixture: 'accounts/referAndEarnPage-Available-RedeemPoints.json' })
        cy.visitURL('/newhome', { failOnStatusCode: false })
        homePage.clickReferLabel()
        referAndEarn.clickRedeemPointsLabel()
        kbPointsPage.verifyProcessingFeeLabel('Processing Fees')
        kbPointsPage.clickProcessingFeeLabel()
        redeemonProcessingFeePage.verifypageTile('Redeem on Processing Fees')
        redeemonProcessingFeePage.verifyRedeemKBPointsText('Redeem KreditBee points to get discount on processing fees while availing loan')
        redeemonProcessingFeePage.verifyOkButton('OK')
    })

    it('KB-T45333 [Digital Gold Phase 3] Verify the Cash in Bank Account tab is not displayed in Kreditbee points page when redeem points config is disabled', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-Disbled-RedeemPoints.json' })
        cy.intercept('**/myaccount', { fixture: 'accounts/accountPage-RedeemPoints.json' })
        cy.intercept('**/me/offers', { fixture: 'accounts/referAndEarnPage-AvailablePointsZero.json' })
        cy.visitURL('/newhome', { failOnStatusCode: false })
        homePage.clickMyAccountIcon()
        accountsPage.verifyReferandEarnText('Refer & Earn')
        accountsPage.clickReferAndEarnText()
        referAndEarn.verifyRedeemPointsDesabledLabel()
    })
})

describe('Basic Details', () => {

    it('KB-T21858 Check on clicking the basic information in profile information page', () => {
        cy.intercept('**/main/home', { fixture: 'home/homePage-basicGeneralInformation.json' })
        cy.intercept('**/me/substateinfo', { fixture: 'onBoarding/profile/generalInformationPage-substateInfo.json' })
        cy.intercept('**/main/me', { fixture: 'onBoarding/profile/generalInformationPage-me.json' })
        cy.intercept('**/me?type=info', { fixture: 'onBoarding/profile/generalInformationPage-TypeInfo.json' })
        cy.intercept('**/main/misc/pincode?pincode=**', { fixture: 'onBoarding/profile/generalInformationPage-pinCode.json' })

        cy.visitURL('/newhome', { failOnStatusCode: false })
        applicationStatusPage.verifyContinueApplicationButton('Continue Application')
        applicationStatusPage.clickContinueApplicationButton()
        profileInformationPage.verifyGeneralInformationlabel('General Information')
        profileInformationPage.clickGeneralInformation()
        generalInformationPage.clickSingleRadioButton()
        generalInformationPage.verifyEducationDropDown()
        generalInformationPage.clickEducationDropDown()
        generalInformationPage.verifyEducationDropDownList()
        generalInformationPage.clickEducationDropDownList()
        generalInformationPage.verifyprofessionOrOccupationDropDown()
        generalInformationPage.clickprofessionOrOccupationDropDown()
        generalInformationPage.verifyProfessionOrOccupationDropDownLabel()
        generalInformationPage.clickProfessionOrOccupationDropDownList()
        generalInformationPage.verifyCommunicationAddressLabel('COMMUNICATION ADDRESS')
        generalInformationPage.verifySameAsKYCDocumentCheckBox()
        generalInformationPage.clickTypeOfResidenceDropDown()
        generalInformationPage.verifyTypeOfResidenceDropDownList()
        generalInformationPage.clickTypeOfResidenceDropDownList()
        generalInformationPage.verifyContinuebutton('Continue')

    })

    it('KB-T45310 [Income Details] Check "we are accessing your eligibility" screen is displayed after submitting the income details', function () {

        cy.intercept('**/misc/companies?p=1&batchcount=100&q=finnovation%20', { fixture: 'onboarding/eligibility/SearchCompanyNamePage-CompanySearchResults.json' })
        cy.intercept('**/me/profile/eligible', { fixture: 'onboarding/profile/ApplicationStatusPage-LoanEligibilty.json' })
        cy.visit('/eligibility/city', { failOnStatusCode: false });
        incomeDetailsPage.selectSalariedRb()
        incomeDetailsPage.enterSalaryOrIncome(30000)
        incomeDetailsPage.clickSelectEmploymentCompany()
        searchCompanyNamePage.enterSearchCompanyName('FINNOVATION TECH SOLUTIONS PRIVATE LIMITED')
        searchCompanyNamePage.clickFirstCompanyNameLabel()
        incomeDetailsPage.clickSubmitBtn()
    })

    it('KB-T45816 Verify whether the address fields will be displayed when the user unselects the same as the KYC document checkbox in current addresss section', () => {
        cy.intercept('**/main/misc/pincode?pincode=**', { fixture: 'onBoarding/profile/generalInformation-pincodeEnable.json' })
        generalInformationPage.verifyPageTitle('General Information')
        generalInformationPage.clickSameAsKYCDocumentCheckBox()
        generalInformationPage.verifyUploadAnAddressProofDocLink()
        generalInformationPage.verifyAddressLine1Input('')
        generalInformationPage.verifyAddressLine1Input('')
    })

    it('KB-T36074 (1.0) Ensure that after clicking on Help option from Settings menu user is navigated to detailed Help page', () => {
        cy.intercept('**/home', { fixture: '/onBoarding/profile/ProfileInformationPage-GeneralInformation-GreyoutHomePage.json' })
        cy.intercept('**/me/substateinfo', { fixture: '/onBoarding/profile/profileInformationPage-GeneralInformation-GreyoutSubstate.json' })
        cy.intercept('**/me', { fixture: '//onBoarding/profile/ProfileinformationPage-GeneralInformation-GreyoutMe.json' })
        cy.intercept('**/contactus/rule?categoryId=r_faq', { fixture: 'help/helpPage.json' })
        cy.visitURL('/newhome')
        applicationStatusPage.clickContinueApplicationButton()
        profileInformationPage.clickKYCDocumentsLabel()
        kycDocumentsPage.verifyAadharCardLabel('Aadhaar Card')
        kycDocumentsPage.verifySelfieLabel('Selfie')
        headerPage.clickSettingBtn()
        headerPage.clickHelpBtn()
        help.verifyPageTitle('Help')
        help.verifyCreditLimitEnhancementLabel()
        help.verifyProfileVerificationLabel('Profile Verification')
    })

    it('KB-T45078 Check whether the user able to upload reference contacts and able to continue the flow', () => {

        cy.intercept('**/home', { fixture: 'onboarding/profile/referenceContacts-HomePage.json' })
        cy.intercept('**/me/substateinfo', { fixture: 'onboarding/profile/referenceContacts-SubState.json' })
        cy.intercept('**/me', { fixture: 'onboarding/profile/referenceContacts-me.json' })
        cy.intercept('**/me/profile/reference', { fixture: 'onboarding/profile/referenceContacts-references.json' })

        cy.visitURL('/newhome')
        applicationStatusPage.clickContinueApplicationButton()
        profileInformationPage.clickReferencesLabel()
        referencesPage.EnterFatherName('Nethaji')
        referencesPage.clickMotherRadioButton()
        referencesPage.EnterMotherName('Jagadeeswari')
        referencesPage.EnterFamilyMobileNumber('9095087095')
        referencesPage.EnterReferenceName('Hmaorni')
        referencesPage.EnterReferenceMobileNumber('9344140771')
        referencesPage.clickContinueButton('Continue')
        assessingLoanEligibilityPage.verifyPageTitle('Application submitted for Approval')
        assessingLoanEligibilityPage.verifyRefreshBtn('REFRESH ')
    })

    it('KB-T49357 (1.0)Check whether the Father name field is displaying in references page when the Fathername_mandatory config = 0 in yp_config table', () => {

        cy.intercept('**/home', { fixture: 'onboarding/profile/referenceContacts-FatherNotPresentHomePage.json' })
        cy.intercept('**/me/substateinfo', { fixture: 'onboarding/profile/referenceContacts-FatherNotPresentSubstate.json' })
        cy.intercept('**/me', { fixture: 'onboarding/profile/referenceContacts-FatherNotPresentMe.json' })

        cy.visitURL('/newhome')
        applicationStatusPage.clickContinueApplicationButton()
        profileInformationPage.clickReferencesLabel()
        cy.get('[data-cy="input_app.components.EmergencyContacts.ec_father_name_placeholder"]').should('not.exist')
    })

    it('KB-T49313 (1.0)Check user able to submit the eligibility when company input is enabled', function () {
        cy.intercept('**/me/eligible', { fixture: 'onBoarding/eligibility/eligibility.json' })
        cy.intercept('**/companies?p=**', { fixture: 'onBoarding/eligibility/searchcompany.json' })
        cy.intercept('**/misc/companies?p=1&batchcount=100&q=Finnovation', { fixture: 'onBoarding/eligibility/firstCompanyName.json' })
        cy.intercept('**/profile/eligible', { fixture: 'onBoarding/eligibility/eligiblePending.json' })
        cy.visit('/eligibility/city', { failOnStatusCode: false });
        incomeDetailsPage.selectSalariedRb()
        incomeDetailsPage.enterSalaryOrIncome('50000')
        incomeDetailsPage.clickSelectEmploymentCompany()
        searchCompanyNamePage.enterSearchCompanyName('FINNOVATION TECH SOLUTIONS PRIVATE')
        searchCompanyNamePage.clickFirstCompanyNameLabel()
        searchCompanyNamePage.clickNextBtn()
        assessingLoanEligibilityPage.verifyPageTitle('We are assessing your Loan eligibility')
    })

    it('KB-T49312 (1.0)Check user able to submit the eligibility when company input is disabled', function () {
        cy.visit('/eligibility/verification', { failOnStatusCode: false });
        assessingLoanEligibilityPage.verifyPageTitle('We are assessing your Loan eligibility')
        assessingLoanEligibilityPage.verifyAssessingLoanEligibiltyText('This should only take a few seconds We will notify you (via SMS) once we have assessed your eligibility or you can click the Refresh button to check again')
        assessingLoanEligibilityPage.verifyRefreshBtn('Refresh')
    })

    it('KB-T53008 Check Refrences screen displayed as per the VD when fatherNameMandatory config is set to 1', () => {

        cy.intercept('**/home', { fixture: 'onboarding/profile/referenceContacts-HomePage.json' })
        cy.intercept('**/me/substateinfo', { fixture: 'onboarding/profile/referenceContacts-SubState.json' })
        cy.intercept('**/me', { fixture: 'onboarding/profile/referenceContacts-me.json' })
        cy.intercept('**/me/profile/reference', { fixture: 'onboarding/profile/referenceContacts-references.json' })

        cy.visitURL('/newhome')
        applicationStatusPage.clickContinueApplicationButton()
        profileInformationPage.clickReferencesLabel()
    })
})

describe('ED PD Cases', () => {

    it('KB-T32380 Check ED screen when more than 1 ED offer is enabled and all enabled offers data is available and not expired and offerMode is Mandatory', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-ED.json' })
        cy.intercept('**/me/extradetails/loan', { fixture: 'extraDetails/ED-FPLLoan.json' })
        cy.intercept('**/me/extradetails/loan/householdincome', { fixture: 'extraDetails/extradetailspage-offer.json' })
        cy.visitURL('/newhome', { failOnStatusCode: false })
        homePage.clickBlock2Btn()
        availableCreditLimitPage.clickContinueButton()
        profileReverificationPage.verifyPageTitle('Profile re-verification required')
        profileReverificationPage.clickVerifyHouseHoldIncomeLabel()
        profileReverificationPage.clickContinue()
        verifyHouseholdIncomePage.clickMember3Button()
        verifyHouseholdIncomePage.EnterFamilyMemberIncome()
        verifyHouseholdIncomePage.clickRentCheckBox()
        verifyHouseholdIncomePage.EnterRentInput()
        verifyHouseholdIncomePage.clickContinueButton()
        verifyHouseholdIncomePage.clickLandLabel()
        verifyHouseholdIncomePage.clickSelectAllLabel()
        verifyHouseholdIncomePage.clickSubmitButton()
        cy.intercept('**/me/extradetails/loan', { fixture: 'extraDetails/offerSubmitted.json' })
        pdVerifyingDetailsPage.verifyPageTitle('Verifying Details')
    })

    it('KB-T22484 (1.0) Test case to verify whether "Discover your Credit and Pricing" page is displayed in My Account page', () => {
        cy.intercept('**/main/home', { fixture: 'home/homepage-Notransaction.json' })
        cy.intercept('**/main/myaccount', { fixture: 'accounts/accountPage-Notransction.json' })
        cy.intercept('**/me/pd?type=list', { fixture: 'pd/pdDetailsPage-OfferList.json' })

        cy.visitURL('/newhome')
        footerPage.clickAccountIcon()
        accountsPage.verifyDiscountAndCreditText('Discount & Credit')
        accountsPage.clickDiscountAndCreditText()
        pdPage.verifyBasicDetailsLabel('Basic Details')
        pdPage.verifyIncomeVerificationLabel('Income Verification')
        pdPage.verifyAutoDebitSetupLabel('Auto Debit Setup')
        pdPage.verifyAssetaValidationLabel('Asset Validation')
        pdPage.verifyBuinessDetailsLabel()
    })

    it('KB-T36717 (1.0)Test case to verify the "NACH E-Mandate" page functionality under Setup NACH Auto Debit page(Debit card NACH)', () => {
        cy.intercept('**/home', { fixture: '/home/homePage-pd.json' })
        cy.intercept('**/me/pd?type=list', { fixture: '/pd/pdDetailsPageAccount.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: '/bank/bankAccount-NACH.json' })
        cy.intercept('me/pd?type=list', { fixture: '/pd/basicDetails/AutoDebtSetup/pdAutoDeptPage.json' })

        cy.visitURL('/newhome')
        homePage.clickCreditLimitAndDiscountText()
        pdPage.clickAutoDebitSetupLabel()
        autoDebitSetupPage.clickNACHAAutoDebit()
        autoDebitSetupPage.clickSelectBankAccountButton()
        autoDebitSetupInfoPage.clickSelectBankAaccountBtn()
        selectBankAccountPage.clickSelectMode()
        autoDebitSetupPage.clickSetupUsingDebitCard()
        autoDebitSetupPage.clickContinue()
        autoDebitOptionsInfoPage.clickContinuebtn()
    })


    it('KB-T22809 Ensure that after clicking on Skip for later button check for calculating Credit Limit page is displayed or not', () => {
        cy.intercept('**/home', { fixture: 'extraDetails/AdditionalInfoPage-SkipForlater-HomePage.json' })
        cy.intercept('**/me/extradetails/loan', { fixture: 'extraDetails/AdditionalInfoPage-Loan.json' })
        cy.intercept('**/me/extradetails/loan/skip', { fixture: 'extraDetails/additionalInfoPage-Skipped.json' })
        cy.intercept('**/me/extradetails?type=groupStatus', { fixture: 'extraDetails/extraDetailsPage-SkippedOffer.json' })

        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        availableCreditLimitPage.clickSkipForLaterButton()
        calculatingCreditLimitPage.clickRefreshButton()
    })

    it('KB-T10457 Ensure that on clicking Refresh button from Verifying details page control is navigate to existing home screen on successful validation when RE sends any one offer as mandatory', () => {
        cy.intercept('**/home', { fixture: 'extraDetails/homepage-loanflow.json' })
        cy.intercept('**/me/extradetails/loan', { fixture: 'extraDetails/LoanPage-EDflow.json' })
        cy.intercept('**/me/extradetails/loan/householdincome', { fixture: 'extraDetails/extradetailspage-offer.json' })

        cy.visitURL('/newhome')
        homePage.verifyApplyNowButton('APPLY NOW')
        homePage.verifyBankTransferUptoLabel('BANK TRANSFER UPTO')
        homePage.clickFPLGetNowBtn()
        profileInformationPage.verifyPagetitle('Profile re-verification required')
        profileReverificationPage.verifyHouseHoldIncomeLabel('Verify Household Income')
        profileReverificationPage.clickVerifyHouseHoldIncomeLabel()
        profileReverificationPage.clickContinue()
        verifyHouseholdIncomePage.clickMember3Button()
        verifyHouseholdIncomePage.verifyOtherModesOfSalarylabel('OTHER MODES OF INCOME')
        verifyHouseholdIncomePage.verifyRentLabel('Rent')
        verifyHouseholdIncomePage.verifyPensionLabel('Pension')
        verifyHouseholdIncomePage.verifyOtherLabel('Other')
        verifyHouseholdIncomePage.verifyMonthlyIncomeLabel('My Monthly Income')
        verifyHouseholdIncomePage.EnterMyMonthlyIncomeInput('20000')
        verifyHouseholdIncomePage.EnterFamilyMemberIncome('20000')
        verifyHouseholdIncomePage.clickRentCheckBox()
        verifyHouseholdIncomePage.EnterRentInput()
        verifyHouseholdIncomePage.clickContinueButton()
        verifyHouseholdIncomePage.clickSelectAllLabel()
        verifyHouseholdIncomePage.clickSubmitButton()
        cy.intercept('**/me/extradetails/loan', { fixture: 'extraDetails/offerSubmitted.json' })
        verifyHouseholdIncomePage.clickRefreshButton()
    })

    it('KB-T54367 (1.0) Check whether User is able to see Business Details Group in Discover and Credit page', () => {
        cy.intercept('**/home', { fixture: '/home/homePage-pd.json' })
        //  cy.intercept('**/home',{fixture:'pd/businessDetails/businessDetailsPages-HomePage.json'})
        cy.intercept('**/myaccount', { fixture: 'accounts/accountsPage.json' })
        cy.intercept('**/me/pd?type=list', { fixture: 'pd/pdDetailsPage-OfferList.json' })

        cy.visitURL('/newhome', { failOnStatusCode: false })
        footerPage.clickAccountLabel()

        accountsPage.clickDiscountAndCreditText()
        pdPage.verifyBasicDetailsLabel('Basic Details')
        pdPage.verifyAssestvalidationLabel('Asset Validation')
        pdPage.verifyAutoDebitSetupLabel('Auto Debit Setup')
        pdPage.verifyDiscountAndCreditSubText('Complete any of the below steps which will provide us with a better understanding of who you are. The more steps you complete successfully, the better your Credit and Pricing would be')
        pdPage.verifyIncomeVerificationLabel('Income Verification')
        pdPage.verifyBuinessDetailsLabel('Business Details')
        pdPage.verifyEmploymentVerificationlabel('Employment Verification')
    })

    it('KB-T36625 (1.0)Check whether the Verify Communication Address offer working fine or not', () => {
        cy.intercept('**/home', { fixture: '/home/homePage-PD-BasicDetails.json' })
        cy.intercept('**/me/pd?type=list', { fixture: '/pd/basicDetails/AutoDebtSetup/pd-New_Offres.json' })
        cy.intercept('**/me/profile/pduseraddr', { fixture: '/pd/basicDetails/pdUSerAddress.json' })

        cy.visitURL('/newhome')
        homePage.clickCreditLimitAndDiscountText()
        pdPage.clickBasicDetailsLabel()
        basicDetailsPage.clickVerifyCommunicationAddress()
        basicDetailsPage.clickContinue()
        verifyCommunicationAddressSteps.clickContinuebtn()
        verifyConfirmAddressDetails.clickTypeOfAddress()
        verifyConfirmAddressDetails.selectTypeOfAddress()
        verifyConfirmAddressDetails.clickContinue()
        pdVerifyingDetailsPage.verifyPageTitle()

    })

    it('KB-T36593 (1.0)Check whether the Verify Work Email offer is working fine or not', () => {
        cy.intercept('**/home', { fixture: '/home/homePage-pd.json' })
        cy.intercept('**/me/pd?type=list', { fixture: 'pd/basicDetails/BasicDetailspage.json' })
        cy.intercept('**/me/extradetails/pd/workemailverification/otp?email=**', { fixture: 'pd/basicDetails/workEmailOTP.json' })
        cy.intercept('**/extradetails/pd/workemailverification/otp', { fixture: '/pd/basicDetails/EmailOTPVerification.json' })
        cy.intercept('**/workemailverification/status', { fixture: '/pd/basicDetails/EmailStauts.json' })

        cy.visitURL('/newhome', { failOnStatusCode: false })
        homePage.clickCreditLimitAndDiscountText()
        pdPage.verifyPageTitle('Discover your Credit and Pricing')
        pdPage.clickBasicDetailsLabel()
        basicDetailsPage.clickVerifyWorkEmail()
        basicDetailsPage.clickContinue()
        verifyWorkEmailInfoPage.clickContinueButton()
        verifyWorkEmailPage.enterWorkEmail('komodheen.mastan@krazybee.com')
        verifyWorkEmailPage.clickSendOTP()
        verifyWorkEmailOTPInputPage.enterOTP('123456')
        verifyWorkEmailOTPInputPage.clickSubmitButton()
        emailVerifyingDetailsPage.verifyPageTitleText()
        emailVerifyingDetailsPage.verifySubTextOfVerifyingDetails(' We are verifying the provided information. This may take a few minutes. ')
        emailVerifyingDetailsPage.verifyRefreshbtn()

    })

    it('KB-T36607 (1.0)Check whether the Verify Mobile Trust Score offer is working fine or not', () => {
        cy.intercept('**/home', { fixture: '/home/homePage-pd.json' })
        cy.intercept('**/me/pd?type=list', { fixture: '/pd/pdDetailsPageAccount.json' })
        cy.intercept('**/me/pd?type=list', { fixture: 'pd/basicDetails/BasicDetailspage.json' })
        //        cy.intercept('**/me/pd?type=list',{fixture:'/pd/basicDetails/BasiciDeatilPageOffers.json'})
        cy.intercept('**/me/offers/pd/homepage/basicmobauth?isMock=**', { fixture: '/pd/basicDetails/PdMobilContextPage.json' })
        cy.intercept('**/pd/homepage/basicmobauth', { fixture: '/pd/basicDetails/pdVerifyingDetailspage.json' })


        cy.visitURL('/newhome')
        homePage.clickCreditLimitAndDiscountText()
        pdPage.clickBasicDetailsLabel()
        basicDetailsPage.clickOnMobileTrustScoreLabel()
        basicDetailsPage.clickContinue()
        mobileTrustScoreInfoPage.clickContinuebtn()
        mobileLetterOfContext.clickAcceptAndContinuebtn()
        mobileTrustOTPInputPage.enterOTP('1234')
        mobileTrustOTPInputPage.clickSubmitbtn()
        pdVerifyingDetailsPage.verifyPageTitle()
        pdVerifyingDetailsPage.verifyOKBtn('OK')
    })

    it('KB-T36712 (1.0) Test case to verify the "NACH E-Mandate" page functionality under Setup NACH Auto Debit page(Netbanking)', () => {
        cy.intercept('**/home', { fixture: 'home/homepage-ExtraDetails.json' })
        cy.intercept('**/me/extradetails/loan', { fixture: 'pd/LoanFlow-ExtraDetails.json' })
        cy.intercept('**/me/nachmandate/status', { fixture: 'pd/pdStatus-InActive.json' })
        cy.intercept('**/me/pd?type=list&source=loan', { fixture: 'pd/pdStatus-Inactive-ExtraDetails.json' })
        cy.intercept('**/me/bank?productid=****', { fixture: 'bank/bankAccountPage-Pd.json' })
        cy.intercept('**/loan/enach?mandateType=**', { fixture: 'pd/pd-Nach.json' })

        cy.visitURL('/newhome', { failOnStatusCode: false })
        homePage.clickBlock2Btn()
        profileReverificationPage.verifyAutoDebitSetupLabel('Setup Auto Debit')
        profileReverificationPage.clickAutoDebitSetupLabel()
        profileReverificationPage.clickContinueButton()
        nachAutoDebitSetupPage.clickNACHAutoDebitLabel()
        nachAutoDebitSetupPage.clickSelectBankAccountButton()
        autoDebitSetupInfoPage.clickSelectBankAaccountButton()
        selectBankAccountPage.clickSelectModeButton()
        autoDebitSetupPage.clickSetupNetBanking()
        autoDebitSetupPage.clickContinueButton()
        autoDebitOptionsInfoPage.verifyPageTitle('Setup Auto Debit using Netbanking')
        autoDebitOptionsInfoPage.verifyNetbankingSubSteps('Login with your Netbanking username and password on your Bank page to authorize the setup')
        autoDebitOptionsInfoPage.clickContinuebtn()

    })

    it('KB-T23062 (1.0) Check whether the Profile Reverification required page is displayed or not when edGroupAction column is set as userNotActed ', function () {
        cy.intercept('**/home', { fixture: 'extraDetails/homepage-loanflow.json' })
        cy.intercept('**/me/extradetails/loan', { fixture: 'extraDetails/LoanPage-EDflow.json' })

        cy.visitURL('/newhome')
        homePage.verifyApplyNowButton('APPLY NOW')
        homePage.verifyBankTransferUptoLabel('BANK TRANSFER UPTO')
        homePage.clickFPLGetNowBtn()
        profileInformationPage.verifyPagetitle('Profile re-verification required')
        profileReverificationPage.verifyHouseHoldIncomeLabel('Verify Household Income')
    })

    it('KB-T38047 Check whether the the "Verifying details" screen displayed when user have an active mandate', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-ExtraDetails-VerifyingDetails.json' })

        cy.visitURL('/newhome', { failOnStatusCode: false })
        homePage.clickBlock2Btn()
        pdVerifyingDetailsPage.verifyPageTitle()
        pdVerifyingDetailsPage.verifyRefreshButton()
    })

    it('1.KB-T36844 Check whether the ITR-V validation offer is working fine or not', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-pd.json' })
        cy.intercept('**/me/pd?type=list', { fixture: 'pd/pdBusinessDetails.json' })
        cy.intercept('**/me?type=pddocs', { fixture: 'pd/incomeVerificationPage-DocUpload.json' })
        cy.intercept('**/me/profile/doc', { fixture: 'pd/itrvUpload.json' })

        cy.visitURL('/newhome', { failOnStatusCode: false })
        homePage.clickCreditLimitAndDiscountText()
        pdPage.verifyPageTitle('Discover your Credit and Pricing')
        pdPage.clickIncomeVerificationLabel()
        incomeVerificationPage.verifyPageTitle('Income Verification')
        incomeVerificationPage.verifyITRVLabel('ITR-V validation')
        incomeVerificationPage.clickITRVLabel()
        incomeVerificationPage.clickContinueButton()
        itrvValiationInfoPage.clickContinueButton()
        cy.wait(3000)
        itrvValdiationPage.clickContinueButton()
        pdVerifyingDetailsPage.clickOKButton()
    })

    it('2.KB-T36844 Check whether the ITR-V validation offer is working fine or not', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-pd.json' })
        cy.intercept('**/me/pd?type=list', { fixture: 'pd/incomeverificationPage-UploadedSucess-ITRV.json' })

        cy.visitURL('/newhome', { failOnStatusCode: false })
        homePage.clickCreditLimitAndDiscountText()
        pdPage.verifyPageTitle('Discover your Credit and Pricing')
        pdPage.clickIncomeVerificationLabel()
        incomeVerificationPage.verifyPageTitle('Income Verification')
        incomeVerificationPage.verifyITRVLabel('ITR-V validation')
        incomeVerificationPage.verifyITRVSubText('Complete')
    })

    it('2.KB-T36844 Check whether the ITR-V validation offer is working fine or not', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-pd.json' })
        cy.intercept('**/me/pd?type=list', { fixture: 'pd/incomeverificationPage-UploadedSucess-ITRV.json' })

        cy.visitURL('/newhome', { failOnStatusCode: false })
        homePage.clickCreditLimitAndDiscountText()
        pdPage.verifyPageTitle('Discover your Credit and Pricing')
        pdPage.clickIncomeVerificationLabel()
        incomeVerificationPage.verifyPageTitle('Income Verification')
        incomeVerificationPage.verifyITRVLabel('ITR-V validation')
        incomeVerificationPage.verifyITRVSubText('Complete')
    })

    it('KB-T37108 Check whether the Electricity Connection offer is working fine or not', () => {
        cy.intercept('**/home', { fixture: 'home/homePageED-Fpl.json' })
        cy.intercept('**/me/pd?type=list', { fixture: 'pd/pdVKYCPage.json' })

        cy.visitURL('/newhome', { failOnStatusCode: false })
        homePage.clickCreditLimitAndDiscountText()
        pdPage.verifyAssestvalidationLabel('Asset Validation')
        pdPage.clickAssestValidationLabel()
        assetValidationPage.clickOnElectricityConnection()
        assetValidationPage.clickOnContinueBtn()
        verifyElectricityConnectionInfoPage.verifyPageTitle(' Verify Electricity Connection ')
        verifyElectricityConnectionInfoPage.clickContinueButton()
        verifyElectricityConnectionPage.verifypageTitle('Verify Electricity ConnectionVerify Electricity Connection')
        verifyElectricityConnectionPage.EnterSelectElectricityBoardInput()
        selectServiceProviderPage.clickListOfServicesDropDown()
        selectServiceProviderPage.clickContinueButton()
        verifyElectricityConnectionPage.EnterRegistrationNumberInput()
        verifyElectricityConnectionPage.clickSubmitButton()
        pdVerifyingDetailsPage.verifyPageTitle('Verifying details')
        pdVerifyingDetailsPage.clickOKButton()
        assetValidationPage.verifyPageTitle('Asset Validation')
    })

    it('KB-T51725 Check whether Business Details option is showing in Discover and Credit page', () => {

        cy.intercept('**/home', { fixture: 'pd/businessDetails/businessDetailsPages-HomePage.json' })
        cy.intercept('**/myaccount', { fixture: 'accounts/accountsPage.json' })
        cy.intercept('**/me/pd?type=list', { fixture: 'pd/pdDetailsPage-OfferList.json' })

        cy.visit('/newhome', { failOnStatusCode: false })
        footerPage.clickAccountIcon()
        accountsPage.clickDiscountAndCreditText()
        pdPage.verifyBasicDetailsLabel('Basic Details')
        pdPage.verifyIncomeVerificationLabel('Income Verification')
        pdPage.verifyAutoDebitSetupLabel('Auto Debit Setup')
        pdPage.verifyAssestvalidationLabel('Asset Validation')
        pdPage.verifyBuinessDetailsLabel('Business Details')
    })

    it('KB-T54369 (1.0) Check when config is enabled for " GST Details Verification" Offer it should be displayed in Business Details Group', () => {
        cy.intercept('**/home', { fixture: '/home/homePage-pd.json' })
        // cy.intercept('**/home',{fixture:'pd/businessDetails/businessDetailsPages-HomePage.json'})
        cy.intercept('**/myaccount', { fixture: 'accounts/accountsPage.json' })
        //cy.intercept('**/me/pd?type=list',{fixture:'pd/pdDetailsPage-WithoutEmploymentVerification'})
        cy.intercept('**/me/pd?type=list', { fixture: '/pd/pdBusinessDetails.json' })
        cy.intercept('**/me/pd?type=googleSync&mobile=***', { fixture: 'pd/basicDetails/RegisteredMobileNumber-LetterOfConsent.json' })
        cy.visitURL('/newhome', { failOnStatusCode: false })
        footerPage.clickAccountLabel()

        accountsPage.clickDiscountAndCreditText()
        pdPage.verifyBasicDetailsLabel('Basic Details')
        pdPage.verifyBuinessDetailsLabel()
        pdPage.clickBusinessDetailsLabel()
        businessDetailsPage.verifyGSTVerificationSubText('Avail discount upto')
        businessDetailsPage.verifyGSTNumberVerificationLabel('GST Details Verification')
        businessDetailsPage.verifyPageTitle('Business Details')
    })

    it('KB-T51815 Check whether â€œGSTR-3Bâ€ offer is displayed in â€œBusiness Detailsâ€ when config is Enabled', () => {
        cy.intercept('**/home', { fixture: 'pd/businessDetails/businessDetailsPages-HomePage.json' })
        cy.intercept('**/myaccount', { fixture: 'accounts/accountsPage.json' })
        cy.intercept('**/me/pd?type=list', { fixture: 'pd/pdDetailsPage-OfferList.json' })

        cy.visit('/newhome', { failOnStatusCode: false })
        footerPage.clickAccountIcon()
        accountsPage.clickDiscountAndCreditText()
        pdPage.clickBusinessDetailsLabel()
        businessDetailsPage.verifyUploadGSTText('Upload GSTR-3B')
        businessDetailsPage.verifyGSTNumberVerificationLabel('GST Number Verification')
        businessDetailsPage.clickOnUploadGSTR()
        businessDetailsPage.clickContinueButton()
        uploadGSTR3BPage.verifyPageTitle(' Upload GSTR-3B ')
        uploadGSTR3BPage.verifyStepsText('STEPS')
    })

    it('KB-T32408 Ensure ED offer is displayed when already submittted data available and expired for the user and offerMode is Skippable', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-ED.json' })
        cy.intercept('**/me/extradetails/loan', { fixture: 'extraDetails/ED-FPLLoan.json' })
        cy.intercept('**/me/extradetails/loan/skip', { fixture: 'extraDetails/AdditionalInfoPage-SkipForlater-HomePage.json' })
        cy.visitURL('/newhome', { failOnStatusCode: false })
        homePage.clickBlock2Btn()
        availableCreditLimitPage.clickContinueButton()
        profileReverificationPage.verifyPageTitle('Profile re-verification required')
        profileReverificationPage.verifyMobileTrustScoreLabel()
        profileReverificationPage.verifyHouseHoldIncomeLabel('Verify Household Income')
        profileReverificationPage.verifySkipForLaterButton('Skip for Later')
        profileReverificationPage.clickSkipForLaterButton()
        pdVerifyingDetailsPage.verifyPageTitle('Verifying Details')
    })

    it('KB-T32492 Ensure ED offer is displayed when already submittted data available and expired for the user and offerMode is Optional', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-ED.json' })
        cy.intercept('**/me/extradetails/loan', { fixture: 'extraDetails/ED-FPLLoan.json' })
        cy.intercept('**/me/extradetails/loan/householdincome', { fixture: 'extraDetails/extradetailspage-offer.json' })
        cy.visitURL('/newhome', { failOnStatusCode: false })
        homePage.clickBlock2Btn()
        availableCreditLimitPage.clickContinueButton()
        profileReverificationPage.verifyPageTitle('Profile re-verification required')
        profileReverificationPage.clickVerifyHouseHoldIncomeLabel()
        profileReverificationPage.clickContinue()
        verifyHouseholdIncomePage.clickMember3Button()
        verifyHouseholdIncomePage.EnterFamilyMemberIncome()
        verifyHouseholdIncomePage.clickRentCheckBox()
        verifyHouseholdIncomePage.EnterRentInput()
        verifyHouseholdIncomePage.clickContinueButton()
        verifyHouseholdIncomePage.clickLandLabel()
        verifyHouseholdIncomePage.clickSelectAllLabel()
        verifyHouseholdIncomePage.clickSubmitButton()
        cy.intercept('**/me/extradetails/loan', { fixture: 'extraDetails/offerSubmitted.json' })
        pdVerifyingDetailsPage.verifyPageTitle('Verifying Details')
    })
})

describe('APR Calculation, MLAX Product Loan', () => {

    it('KB-T51319 Check APR calculation for MLAX products in loan summary page,LFA and sanction doc, when processing fee,reassessment fee , Agreement fee and KB Points is applied', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-MLASILVER.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/mlax/MLAX-15K.json' })
        cy.intercept('**/preloanre?productId=**',
            { fixture: 'loan/fpl/fplLoanAmountTenurePage-preLoanRE-srcCash.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/mlax/MLAXLoanAmountTenurePage-productID6.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/mlax/MLAXLoanAmountDetailsPage-FeesCalculation.json' })
        cy.intercept('**/products/verifycoupon?productid=**', { fixture: 'loan/repaymentSchedulePage/verifyCouponcode.json' })
        cy.intercept('**/me/bank?couponCode=**', { fixture: 'bank/bankAccountVerificationPage-CouponCode.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-KreditBeePVTLTD.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/loanSanctionLetterPage.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otp-sanctionOTP.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.verifyAnnualPercentageRateLabel('Annual Perccentage Rate')
        fplLoanAmountDetailsPage.verifyProcessingFeeLabel('Processing Fee')
        fplLoanAmountDetailsPage.verifyCreditReAssessmentFeeLabel('Credit re-assessment Fees')
        fplLoanAmountDetailsPage.verifyLoanDocumantSigningFee('Loan Document Fee')
        fplLoanAmountDetailsPage.verifyApplyCouponCodeLabel()
        fplLoanAmountDetailsPage.clickApplyCouponCodeLabel()
        applyCouponCodeOrPointsPage.enterCouponCodeInput('ABC35')
        applyCouponCodeOrPointsPage.clickApplyBtn()
        fplLoanAmountDetailsPage.verifyAnnualPercentageRateValue()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        //kfs sanction letter - validation
        kfsSanctionLetterPage.verifyDetailsOfFeeAndChargesPageImage('https://kimaginary.buynsta.com/path//537Y72Gf7TfGEE7yLBQfSu31pkW2/docs/KBST230309OXU/SANC66b4871d-0838-cfbf-1cb3-0cd949769ee9.pdf?page=1')
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        // sanction letter -validation
        signDocumentPage.verifyPageTitle('Sign Document')
        signDocumentPage.verifyInfoSignDocumentText('These Standard Terms & Conditions along with the Most Important Terms and Conditions form a legal and binding agreement upon acceptance pursuant to the Indian Contract Act, 1872 and the Information Technology Act, 2000.')
        signDocumentPage.verifyContinueText('Continue')
        signDocumentPage.clickContinueButton()
        //signServicePage - validation
        signServicePage.verifyPageTitle('Sign Service')
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.verifyContinueButtonText('Continue ')
        signServicePage.clickContinueButton()
        // //OTP service validation
        cy.clock()
        signServiceOTPInputPage.verifyEnterOTPLabel('Enter OTP sent to number xxxxxxx281') //number changes w.r.t user logged in
        signServiceOTPInputPage.verifySignDocumentLabel('Sign Document with Face ID verification in the next step')
        signServiceOTPInputPage.enterOTP('123456')
        cy.tick(4000)
        signServiceOTPInputPage.verifyTimerValue('(00:26)')
    })

    it('KB-T56017 When proc_fee_flag = 0, ensure entire Processing fee is charged by KB for KB fund', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-MLASILVER-ColendingPercaentage80.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-5k.json' })
        cy.intercept('**/preloanre?productId=14&action=getNow&preLoanEvent=preLoanGetNowClick&src=cash',
            { fixture: 'loan/fpl/fplLoanAmountTenurePage-preLoanRE-srcCash.json' })
        cy.intercept('**/products?productId=14', { fixture: 'loan/fpl/fplLoanAmountTenurePage-productID14.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-feescalculations.json' })
        cy.intercept('**/me/bank?productid=14', { fixture: 'bank/bankAccountVerifiedPage.json' })
        cy.intercept('**/loan/la?updateMFILimit=0&productid=14&pointType=&csrFee=2', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=kb&productid=14&loanamt=**', { fixture: 'loan/fpl/sanctionPage-fund-KreditBeePVTLTD.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otp-sanctionOTP.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        //kfs sanction letter - validation
        // kfsSanctionLetterPage.verifyPageTitle('KFS & Sanction letter')
        // kfsSanctionLetterPage.verifyLoanSanctionedByLabel('Your loan is being sanctioned by:')
        // kfsSanctionLetterPage.verifyLenderNameText('Krazybee Services Private Limited.')
        // kfsSanctionLetterPage.verifyContinueToSignLoanDocumentText('Continue to Sign Loan Document')
        // kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        //sanction letter -validation
        signDocumentPage.verifyPageTitle('Sign Document')
        signDocumentPage.verifyInfoSignDocumentText('These Standard Terms & Conditions along with the Most Important Terms and Conditions form a legal and binding agreement upon acceptance pursuant to the Indian Contract Act, 1872 and the Information Technology Act, 2000.')
        signDocumentPage.verifyContinueText('Continue')
        signDocumentPage.clickContinueButton()
        //signServicePage - validation
        signServicePage.verifyPageTitle('Sign Service')
        signServicePage.verifyTransactionIDLabel('Transaction ID:')
        signServicePage.verifyTransactionIDValue('KBDID20221124RQzHneocfB811837')
        signServicePage.verifyDateAndTimeLabel('Date & Time:')
        signServicePage.verifyDeviceIDLabel('Device ID:')
        signServicePage.verifyDeviceIDValue('')
        signServicePage.verifyIPAddressLabel('IP Address:')
        signServicePage.verifyIPAddressValue('122.185.107.110')
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.verifyContinueButtonText('Continue ')
        signServicePage.clickContinueButton()
        // //OTP service page
        cy.clock()
        signServiceOTPInputPage.verifyEnterOTPLabel('Enter OTP sent to number xxxxxxx896') //number changes w.r.t user logged in
        signServiceOTPInputPage.verifySignDocumentLabel('Sign Document with Face ID verification in the next step')
        signServiceOTPInputPage.enterOTP('123456')
        cy.tick(4000)
        signServiceOTPInputPage.verifyTimerValue('(00:26)')
    })

    it('KB-T56044 When proc_fee_flag = 2, ensure entire Processing fee is charged by Partner for non KB fund', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-MLASILVER.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-5k.json' })
        cy.intercept('**/preloanre?productId=**',
            { fixture: 'loan/fpl/fplLoanAmountTenurePage-preLoanRE-srcCash.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-productID14.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-feescalculations.json' })
        cy.intercept('**/products/verifycoupon?productid=**', { fixture: 'loan/repaymentSchedulePage/verifyCouponcode.json' })
        cy.intercept('**/me/bank?couponCode=**', { fixture: 'bank/bankAccountVerificationPage-CouponCode.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-KreditBeePVTLTD.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/loanSanctionLetterPage.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otp-sanctionOTP.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.verifyAnnualPercentageRateLabel('Annual Percentage Rate')
        fplLoanAmountDetailsPage.verifyApplyCouponCodeLabel()
        applyCouponCodeOrPointsPage.enterCuponCodeInput('MHAO14')
        applyCouponCodeOrPointsPage.clickApplyBtn()
        fplLoanAmountDetailsPage.verifyDiscountAppliedOnTheProcessingFee('Discount applied on the processing fees')
        fplLoanAmountDetailsPage.verifyProcessingFeeLabel('Processing Fee')
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        //kfs sanction letter - validation
        kfsSanctionLetterPage.verifyPageTitle('KFS & Sanction letter')
        kfsSanctionLetterPage.verifyLoanSanctionedByLabel('Your loan is being sanctioned by:')
        kfsSanctionLetterPage.verifyLenderNameText('Krazybee Services Private Limited.')
        kfsSanctionLetterPage.verifyContinueToSignLoanDocumentText('Continue to Sign Loan Document')
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        //sanction letter -validation
        signDocumentPage.verifyPageTitle('Sign Document')
        signDocumentPage.verifyInfoSignDocumentText('These Standard Terms & Conditions along with the Most Important Terms and Conditions form a legal and binding agreement upon acceptance pursuant to the Indian Contract Act, 1872 and the Information Technology Act, 2000.')
        signDocumentPage.verifyContinueText('Continue')
        signDocumentPage.clickContinueButton()
        //signServicePage - validation
        signServicePage.verifyPageTitle('Sign Service')
        signServicePage.verifyTransactionIDLabel('Transaction ID:')
        signServicePage.verifyTransactionIDValue('KBDID20221124RQzHneocfB811837')
        signServicePage.verifyDateAndTimeLabel('Date & Time:')
        signServicePage.verifyDeviceIDLabel('Device ID:')
        signServicePage.verifyDeviceIDValue('')
        signServicePage.verifyIPAddressLabel('IP Address:')
        signServicePage.verifyIPAddressValue('122.185.107.110')
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.verifyContinueButtonText('Continue ')
        signServicePage.clickContinueButton()
        // //OTP service validation
        cy.clock()
        signServiceOTPInputPage.verifyEnterOTPLabel('Enter OTP sent to number xxxxxxx896') //number changes w.r.t user logged in
        signServiceOTPInputPage.verifySignDocumentLabel('Sign Document with Face ID verification in the next step')
        signServiceOTPInputPage.enterOTP('123456')
        cy.tick(4000)
        signServiceOTPInputPage.verifyTimerValue('(00:26)')
    })

    it('KB-T41411 (1.0) Verify MLAX Product loan creation with coupon code', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-MLASILVER.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-5k.json' })
        cy.intercept('**/preloanre?productId=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-preLoanRE-srcCash.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-productID14.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-feescalculations.json' })
        cy.intercept('**/products/verifycoupon?productid=**', { fixture: 'loan/repaymentSchedulePage/verifyCouponcode.json' })
        cy.intercept('**/me/bank?couponCode=**', { fixture: 'bank/bankAccountVerificationPage-CouponCode.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-KreditBeePVTLTD.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/loanSanctionLetterPage.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otp-sanctionOTP.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.scrollSliderselectLoanAmount()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.clickApplyCouponCodeLabel()
        applyCouponCodeOrPointsPage.enterCouponCodeInput('MHAO16')
        applyCouponCodeOrPointsPage.clickApplyBtn()
        fplLoanAmountDetailsPage.verifyCouponAppliedLabel('applied successfully !')
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        signDocumentPage.verifyContinueText('Continue')
        signDocumentPage.clickContinueButton()
        signServicePage.verifyIPAddressValue('122.185.107.110')
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.verifyContinueButtonText('Continue ')
        signServicePage.clickContinueButton()
        cy.clock()
        signServiceOTPInputPage.enterOTP('123456')
        cy.tick(4000)
        signServiceOTPInputPage.verifyTimerValue('(00:26)')

        cy.visitURL('/newhome')

    })

    it('KB-T51760 Check APR calculation for SA products in loan summary page,LFA and sanction doc, when processing fee,DocCollect Fee, agreement fee and Coupon code are applied', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-SA.json' })
        cy.intercept('**/preloanre?productId=**', { fixture: 'loan/sa/SA-Amount15k-Tenure6.json' })
        cy.intercept('**/products?productId=5', { fixture: 'loan/sa/SA-Amount15k-Tenure6-MLA2-SubbandGood-APR-Enabled.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/sa/SA-LoanAmountTenurePage-feescalculations.json' })
        cy.intercept('**/products/verifycoupon?productid=**', { fixture: 'loan/repaymentSchedulePage/verifyCouponcode-MHAO16.json' })
        cy.intercept('**/me/bank?couponCode=**', { fixture: 'bank/bankAccountVerificationPage-CouponCode.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/sanctionPage-fund-KreditBeePVTLTD.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/loanSanctionLetterPage.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otp-sanctionOTP.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock1Btn()
        saLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        saLoanAmountDetailsPage.verifyAnnualPercentageRateLabel('Annual Percentage Rate')
        saLoanAmountDetailsPage.verifyDocumentCollectFeeLabel('Document Collect Fee')
        saLoanAmountDetailsPage.verifyApplyCouponCodeLabel()
        applyCouponCodeOrPointsPage.enterCuponCodeInput('MHAO16')
        applyCouponCodeOrPointsPage.clickApplyBtn()
        saLoanAmountDetailsPage.verifyAnnualPercentageRateValue()
        saLoanAmountDetailsPage.verifyAnnualPercentageRateLabel('Annual Percentage Rate')
        saLoanAmountDetailsPage.verifyDocumentCollectFeeLabel('Document Collect Fee')
        saLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        //kfs sanction letter - validation
        kfsSanctionLetterPage.verifyPageTitle('KFS & Sanction letter')
        kfsSanctionLetterPage.verifyLoanSanctionedByLabel('Your loan is being sanctioned by:')
        kfsSanctionLetterPage.verifyLenderNameText('Krazybee Services Private Limited.')
        kfsSanctionLetterPage.verifyContinueToSignLoanDocumentText('Continue to Sign Loan Document')
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        //sanction letter -validation
        signDocumentPage.verifyPageTitle('Sign Document')
        signDocumentPage.verifyInfoSignDocumentText('These Standard Terms & Conditions along with the Most Important Terms and Conditions form a legal and binding agreement upon acceptance pursuant to the Indian Contract Act, 1872 and the Information Technology Act, 2000.')
        signDocumentPage.verifyContinueText('Continue')
        signDocumentPage.clickContinueButton()
        //signServicePage - validation
        signServicePage.verifyPageTitle('Sign Service')
        signServicePage.verifyTransactionIDLabel('Transaction ID:')
        signServicePage.verifyTransactionIDValue('KBDID20221124RQzHneocfB811837')
        signServicePage.verifyDateAndTimeLabel('Date & Time:')
        signServicePage.verifyDeviceIDLabel('Device ID:')
        signServicePage.verifyDeviceIDValue('')
        signServicePage.verifyIPAddressLabel('IP Address:')
        signServicePage.verifyIPAddressValue('122.185.107.110')
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.verifyContinueButtonText('Continue ')
        signServicePage.clickContinueButton()
        // //OTP service validation
        cy.clock()
        signServiceOTPInputPage.verifyEnterOTPLabel('Enter OTP sent to number xxxxxxx281') //number changes w.r.t user logged in
        signServiceOTPInputPage.verifySignDocumentLabel('Sign Document with Face ID verification in the next step')
        signServiceOTPInputPage.enterOTP('123456')
        cy.tick(4000)
        signServiceOTPInputPage.verifyTimerValue('(00:26)')
    })

    it('KB-T51748 Check APR calculation for SA products in loan summary page,LFA and sanction doc, when processing fee,Agreement fee and KB Points is applied', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-SA.json' })
        cy.intercept('**/preloanre?productId=**', { fixture: 'loan/sa/SA-Amount15k-Tenure6.json' })
        cy.intercept('**/products?productId=5', { fixture: 'loan/sa/SA-Amount15k-Tenure6-MLA2-SubbandGood-APR-Enabled.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/sa/SA-LoanAmountTenurePage-feescalculations.json' })
        cy.intercept('**/products/verifycoupon?productid=**', { fixture: 'loan/repaymentSchedulePage/verifyCouponcode-MHAO16.json' })
        cy.intercept('**/me/bank?couponCode=**', { fixture: 'bank/bankAccountVerificationPage-CouponCode.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/sanctionPage-fund-KreditBeePVTLTD.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/loanSanctionLetterPage.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otp-sanctionOTP.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock1Btn()
        saLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        saLoanAmountDetailsPage.verifyAnnualPercentageRateLabel('Annual Percentage Rate')
        saLoanAmountDetailsPage.verifyDocumentCollectFeeLabel('Document Collect Fee')
        saLoanAmountDetailsPage.verifyApplyCouponCodeLabel()
        applyCouponCodeOrPointsPage.clickApplyPointsBtn()
        saLoanAmountDetailsPage.verifyAnnualPercentageRateValue()
        saLoanAmountDetailsPage.verifyAnnualPercentageRateLabel('Annual Percentage Rate')
        saLoanAmountDetailsPage.verifyDocumentCollectFeeLabel('Document Collect Fee')
        saLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        //kfs sanction letter - validation
        kfsSanctionLetterPage.verifyPageTitle('KFS & Sanction letter')
        kfsSanctionLetterPage.verifyLoanSanctionedByLabel('Your loan is being sanctioned by:')
        kfsSanctionLetterPage.verifyLenderNameText('Krazybee Services Private Limited.')
        kfsSanctionLetterPage.verifyContinueToSignLoanDocumentText('Continue to Sign Loan Document')
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        //sanction letter -validation
        signDocumentPage.verifyPageTitle('Sign Document')
        signDocumentPage.verifyInfoSignDocumentText('These Standard Terms & Conditions along with the Most Important Terms and Conditions form a legal and binding agreement upon acceptance pursuant to the Indian Contract Act, 1872 and the Information Technology Act, 2000.')
        signDocumentPage.verifyContinueText('Continue')
        signDocumentPage.clickContinueButton()
        //signServicePage - validation
        signServicePage.verifyPageTitle('Sign Service')
        signServicePage.verifyTransactionIDLabel('Transaction ID:')
        signServicePage.verifyTransactionIDValue('KBDID20221124RQzHneocfB811837')
        signServicePage.verifyDateAndTimeLabel('Date & Time:')
        signServicePage.verifyDeviceIDLabel('Device ID:')
        signServicePage.verifyDeviceIDValue('')
        signServicePage.verifyIPAddressLabel('IP Address:')
        signServicePage.verifyIPAddressValue('122.185.107.110')
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.verifyContinueButtonText('Continue ')
        signServicePage.clickContinueButton()
        // //OTP service validation
        cy.clock()
        signServiceOTPInputPage.verifyEnterOTPLabel('Enter OTP sent to number xxxxxxx281') //number changes w.r.t user logged in
        signServiceOTPInputPage.verifySignDocumentLabel('Sign Document with Face ID verification in the next step')
        signServiceOTPInputPage.enterOTP('123456')
        cy.tick(4000)
        signServiceOTPInputPage.verifyTimerValue('(00:26)')
    })

    it('KB-T41419 Verify MLAX product loan creation with CSR fee', () => {
        cy.intercept('**/home', { fixture: 'home/homepage-MLAX.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/mlax/MLAXPage-15k.json' })
        cy.intercept('**/preloanre?productId=**', { fixture: 'loan/mlax/Amount15k-Tenure6-MLAX-SubbandGood.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/mlax/MLAXLoanAmountTenurePage-ProductID6.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/mlax/mlaxLoanAmountTenurePage-feescalculations.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/bankAccountVerifiedPage.json' })
        cy.intercept('**/loan/la?updateMFILimit=0&productid=**', { fixture: 'loan/signLoanDocumentPage-DigFaceID.json' })
        cy.intercept('**/loan/la?type=kb&productid=6&loanamt=**', { fixture: 'loan/loanSanctionPage.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otp-sanctionOTP.json' })
        cy.intercept('**/me/otp?reason=clickwrap', { fixture: 'otp/otpSignServicePage.json' })
        cy.intercept('**/me/loan', { fixture: 'otp/loanApplicationPage-Submitted.json' })
        cy.intercept('**/me?source=session', { fixture: 'otp/loanApplicationPage-InsSubmit.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.verifyCSRFeeLabel('Credit Score Report Fee')
        fplLoanAmountDetailsPage.verifyCSRFeeValue()
        fplLoanAmountDetailsPage.verifyCSRText('Get my Credit Score Report : â‚¹ 50')
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        signDocumentPage.clickContinueButton()
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.verifyContinueButtonText('Continue ')
        signServicePage.clickContinueButton()
        signServiceOTPInputPage.verifyEnterOTPLabel('Enter OTP sent to number xxxxxxx253') //number changes w.r.t user logged in
        signServiceOTPInputPage.verifySignDocumentLabel('Sign Document with Face ID verification in the next step')
        signServiceOTPInputPage.enterOTP('123456')
        loanApplicationSubmittedPage.verifypageTitle('Loan Application submitted')
    })
})

describe('RepaymentPage , My AccountPage , OffersPage ,SignServiceOTPPage', () => {
    it('1.KB-T21697 Verify Repayment through through billdesk Net Banking in app', () => {

        cy.intercept('**/home', { fixture: 'home/repaymentPage-wallets-HomePage.json' })
        cy.intercept('**/me/loans', { fixture: 'loan/repayment/repaymentPage-wallets-Loans.json' })
        cy.intercept('**/me/loan?id=**', { fixture: 'loan/repayment/repaymentPage-wallets-Loanid.json' })
        cy.intercept('**/me/payment?v=sp3&reqId=**', { fixture: 'loan/repayment/repaymentPage-paymentPage.json' })

        cy.visitURL('/newhome')
        homePage.verifyPayNowText('PAY NOW')
        footerPage.clickRepaymentIcon()
        repaymentPage.clickPayNowBtn()
        paymentOptionPage.clickNetBankingBlock()
        paymentOptionPage.clickSBIBankText()
    })

    it('2.KB-T21697 Verify Repayment through through billdesk Net Banking in app', () => {

        cy.intercept('**/home', { fixture: 'home/repaymentPage-InstallmentClosed-HomePage.json' })
        cy.intercept('**/me/loans', { fixture: 'loan/repayment/repaymentPage-InstallmentClosed-Loan.json' })
        cy.intercept('**/me/loan?id=**', { fixture: 'loan/repayment/repaymentPage-InstallmentClosed-LoanID.json' })

        cy.visitURL('/newhome')
        homePage.verifyPayNowText('PAY NOW')
        footerPage.clickRepaymentIcon()
        repaymentPage.verifyPaidInstallmentText('Paid')
    })

    it('KB-T21673 (1.0) Verify the offers added from admin panel and are refelcted in the app', () => {

        cy.intercept('**/home', { fixture: 'home/homepage-SAEnabled-NoActiveLoan' })
        cy.intercept('**/membership/city?user_id=**', { fixture: 'offers/offers-membership.json' })
        cy.intercept('**/membership/coupon/available?role=ROLE_USER&user_id=**', { fixture: 'offers/offers-membership-availableCoupon.json' })
        cy.visitURL('/newhome', { failOnStatusCode: false })
        footerPage.clickOffersIcon()
        offersHomePage.verifyOffersLabel('Offers')
        offersHomePage.verifyElectronicsRadioButton()
        offersHomePage.clickElectronicsRadioButton()
        offersHomePage.verifyFoodAndBeveragesRadioButton()
        offersHomePage.clickFoodAndBeveragesRadioButton()
        offersHomePage.verifyHealthCareRadioButton()
        offersHomePage.clickHealthCareRadioButton()
        offersHomePage.verifyTravelRadioButton()
        offersHomePage.clickTravelRadioButton()
        offersHomePage.verifyOthersRadioButton()
    })

    it('1.KB-T21703 Verify the Repayments through Billdesk wallet', () => {

        cy.intercept('**/home', { fixture: 'home/repaymentPage-wallets-HomePage.json' })
        cy.intercept('**/me/loans', { fixture: 'loan/repayment/repaymentPage-wallets-Loans.json' })
        cy.intercept('**/me/loan?id=**', { fixture: 'loan/repayment/repaymentPage-wallets-Loanid.json' })
        cy.intercept('**/me/payment?v=sp3&reqId=**', { fixture: 'loan/repayment/repaymentPage-paymentPage.json' })

        cy.visitURL('/newhome')
        homePage.verifyPayNowText('PAY NOW')
        footerPage.clickRepaymentIcon()
        repaymentPage.clickPayNowBtn()
        paymentOptionPage.clickBlockWalletsBlock()
        paymentOptionPage.clickPayTMText()
    })

    it('2.KB-T21703 Verify the Repayments through Billdesk wallet', () => {

        cy.intercept('**/home', { fixture: 'home/repaymentPage-InstallmentClosed-HomePage.json' })
        cy.intercept('**/me/loans', { fixture: 'loan/repayment/repaymentPage-InstallmentClosed-Loan.json' })
        cy.intercept('**/me/loan?id=**', { fixture: 'loan/repayment/repaymentPage-InstallmentClosed-LoanID.json' })

        cy.visitURL('/newhome')
        homePage.verifyPayNowText('PAY NOW')
        footerPage.clickRepaymentIcon()
        repaymentPage.verifyPaidInstallmentText('Paid')
    })

    it('1.KB-T21703 Verify the Repayments through Billdesk wallet', () => {

        cy.intercept('**/home', { fixture: 'home/repaymentPage-wallets-HomePage.json' })
        cy.intercept('**/me/loans', { fixture: 'loan/repayment/repaymentPage-wallets-Loans.json' })
        cy.intercept('**/me/loan?id=**', { fixture: 'loan/repayment/repaymentPage-wallets-Loanid.json' })
        cy.intercept('**/me/payment?v=sp3&reqId=**', { fixture: 'loan/repayment/repaymentPage-paymentPage.json' })

        cy.visitURL('/newhome')
        homePage.verifyPayNowText('PAY NOW')
        footerPage.clickRepaymentIcon()
        repaymentPage.clickPayNowBtn()
        paymentOptionPage.clickBlockWalletsBlock()
        paymentOptionPage.clickPayTMText()
    })

    it('2.KB-T21703 Verify the Repayments through Billdesk wallet', () => {

        cy.intercept('**/home', { fixture: 'home/repaymentPage-InstallmentClosed-HomePage.json' })
        cy.intercept('**/me/loans', { fixture: 'loan/repayment/repaymentPage-InstallmentClosed-Loan.json' })
        cy.intercept('**/me/loan?id=**', { fixture: 'loan/repayment/repaymentPage-InstallmentClosed-LoanID.json' })

        cy.visitURL('/newhome')
        homePage.verifyPayNowText('PAY NOW')
        footerPage.clickRepaymentIcon()
        repaymentPage.verifyPaidInstallmentText('Paid')
    })

    it('1.KB-T38588 Verify Repayment through Debit Card via Payu Payment Gateway', () => {

        cy.intercept('**/home', { fixture: 'home/repaymentPage-wallets-HomePage.json' })
        cy.intercept('**/me/loans', { fixture: 'loan/repayment/repaymentPage-wallets-Loans.json' })
        cy.intercept('**/me/loan?id=**', { fixture: 'loan/repayment/repaymentPage-wallets-Loanid.json' })
        cy.intercept('**/me/payment?v=sp3&reqId=**', { fixture: 'loan/repayment/repaymentPage-paymentPage.json' })

        cy.visitURL('/newhome')
        homePage.verifyPayNowText('PAY NOW')
        footerPage.clickRepaymentIcon()
        repaymentPage.clickPayNowBtn()
        paymentOptionPage.clickDebitCardBlock()
    })


    it('2.KB-T38588 Verify Repayment through Debit Card via Payu Payment Gateway', () => {

        cy.intercept('**/home', { fixture: 'home/repaymentPage-InstallmentClosed-HomePage.json' })
        cy.intercept('**/me/loans', { fixture: 'loan/repayment/repaymentPage-InstallmentClosed-Loan.json' })
        cy.intercept('**/me/loan?id=**', { fixture: 'loan/repayment/repaymentPage-InstallmentClosed-LoanID.json' })

        cy.visitURL('/newhome')
        homePage.verifyPayNowText('PAY NOW')
        footerPage.clickRepaymentIcon()
        repaymentPage.verifyPaidInstallmentText('Paid')
    })

    it('KB-T2933 Check whether Help field is displayed at 11th position in My accounts page', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-gold.json' })
        cy.intercept('**/myaccount', { fixture: 'accounts/accountsPage.json' })
        cy.visitURL('/newhome', { failOnStatusCode: false })
        homePage.clickMyAccountIcon()
        accountsPage.verifyHelpText('Help')
    })

    it('KB-T21690 (1.0) check the csr option present in my accounts page', () => {
        cy.intercept('**/main/home', { fixture: 'home/homepage-Notransaction.json' })
        cy.intercept('**/main/myaccount', { fixture: 'accounts/accountPage-Notransction.json' })

        cy.visitURL('/newhome')
        footerPage.clickAccountIcon()
        accountsPage.verifyCreditScoreLink('https://ik.imagekit.io/kreditbee/app-static/icons/C/ic-chevron-right.svg')
        cy.wait(500)
        accountsPage.verifyCreditScoreIcon('https://ik.imagekit.io/kreditbee/app-static/icons/C/ic-credit-meter.svg')
        accountsPage.verifyCreditScoreText('Credit Score')
    })

    it('KB-T21694 (1.0) check help icon in homepage and settings option present in my accounts page', () => {
        cy.intercept('**/main/home', { fixture: 'home/homepage-Notransaction.json' })
        cy.intercept('**/main/myaccount', { fixture: 'accounts/accountPage-Notransction.json' })
        cy.intercept('**/contactus/rule?categoryId=r_faq', { fixture: 'help/helpPage.json' })
        cy.visitURL('/newhome')
        headerPage.clickHelpBtn()
        help.verifyPageTitle('Help')
        help.verifyCreditLimitEnhancementLabel()
        help.verifyProfileVerificationLabel('Profile Verification')
        cy.go('back')
        footerPage.clickAccountIcon()
        accountsPage.verifySettingsText('Settings')
        headerPage.clickSettingBtn()
        settingsPage.verifyDeleteAccountText('Delete Account')
        settingsPage.verifyChangeEmailText('Change email')
    })

    it('KB-T46294 Ensure Delete Button is displaying for the confirmed users', () => {
        cy.intercept('**/main/home', { fixture: 'home/homepage-Notransaction.json' })
        cy.intercept('**/main/myaccount', { fixture: 'accounts/accountPage-Notransction.json' })
        cy.visitURL('/newhome')
        footerPage.clickAccountIcon()
        accountsPage.verifySettingsText('Settings')
        accountsPage.clickSettingsBtn()
        settingsPage.verifyDeleteAccountText('Delete Account')
    })

    it('KB-T37708 To Verify offers', () => {
        cy.intercept('**/home', { fixture: 'home/homepage-SAEnabled-NoActiveLoan' })
        cy.intercept('**/membership/city?user_id=**', { fixture: 'offers/offers-membership.json' })
        cy.intercept('**/membership/coupon/available?role=ROLE_USER&user_id=**', { fixture: 'offers/offers-membership-availableCoupon.json' })
        cy.visitURL('/newhome', { failOnStatusCode: false })
        footerPage.clickOffersIcon()
        offersHomePage.verifyOffersLabel('Offers')
        offersHomePage.verifyElectronicsRadioButton()
        offersHomePage.clickElectronicsRadioButton()
        offersHomePage.verifyFoodAndBeveragesRadioButton()
        offersHomePage.clickFoodAndBeveragesRadioButton()
        offersHomePage.verifyHealthCareRadioButton()
        offersHomePage.clickHealthCareRadioButton()
        offersHomePage.verifyTravelRadioButton()
        offersHomePage.clickTravelRadioButton()
        offersHomePage.verifyOthersRadioButton()
    })
    it('1-KB-T8264 Verify the repayment config 5 for 3 tenure products', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-MLA20-subBandGood.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-15k.json' })
        cy.intercept('**/preloanre?productId=14&action=getNow&preLoanEvent=preLoanGetNowClick&src=cash', { fixture: 'loan/fpl/fplLoanAmountTenurePage-preLoanRE-srcCash.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-productID14.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-feescalculations.json' })
        cy.intercept('**/me/bank?productid=14', { fixture: 'bank/bankAccountVerifiedPage.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-WC.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otp-sanctionOTP.json' })
        cy.intercept('**/me/otp?reason=clickwrap', { fixture: 'otp/otpSignServicePage.json' })
        cy.intercept('**/me/loan', { fixture: 'otp/loanApplicationPage-Submitted.json' })
        cy.intercept('**/me?source=session', { fixture: 'otp/loanApplicationPage-InsSubmit.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.verifyTotalIntrestLabel('Total Interest')
        fplLoanAmountDetailsPage.verifyFeeAndchargesLabel('Fees & Charges')
        fplLoanAmountDetailsPage.verifyGSTlbl('GST @ 18%')
        fplLoanAmountDetailsPage.verifyRepaymentShedulePageButton()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.verifyPrincipalLabel('Principal')
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        signDocumentPage.clickContinueButton()
        //signServicePage - validation
        signServicePage.verifyPageTitle('Sign Service')
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.verifyContinueButtonText('Continue ')
        signServicePage.clickContinueButton()
        //OTP service validation
        cy.clock()
        signServiceOTPInputPage.verifyEnterOTPLabel('Enter OTP sent to number xxxxxxx896') //number changes w.r.t user logged in
        signServiceOTPInputPage.verifySignDocumentLabel('Sign Document with Face ID verification in the next step')
        signServiceOTPInputPage.enterOTP('123456')
        cy.tick(4000)
        loanApplicationSubmittedPage.verifypageTitle('Loan Application submitted')
    })

    it('2-KB-T8264 Verify the repayment config 5 for 3 tenure products', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-Repayments-MLA15K.json' })
        cy.intercept('**/me/loans', { fixture: 'repayments/repaymentPage-loan.json' })
        cy.intercept('**/me/loan?id=**', { fixture: 'repayments/repaymentPage-loanID-cash.json' })
        cy.visitURL('/newhome')
        homePage.verifyNextDueDateText('Your Next Due date is')
        footerPage.clickRepaymentIcon()
        repaymentPage.verifyLoanDueDateValue('01 Jan 2023')
    })

    it('1-KB-T8282 Verify the interest calculation for monthly product when interest calculation type is 3(more than 3 months SA product)', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-MLA20-subBandGood.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-15k.json' })
        cy.intercept('**/preloanre?productId=14&action=getNow&preLoanEvent=preLoanGetNowClick&src=cash', { fixture: 'loan/fpl/fplLoanAmountTenurePage-preLoanRE-srcCash.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-productID14.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-feescalculations.json' })
        cy.intercept('**/me/bank?productid=14', { fixture: 'bank/bankAccountVerifiedPage.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-WC.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otp-sanctionOTP.json' })
        cy.intercept('**/me/otp?reason=clickwrap', { fixture: 'otp/otpSignServicePage.json' })
        cy.intercept('**/me/loan', { fixture: 'otp/loanApplicationPage-Submitted.json' })
        cy.intercept('**/me?source=session', { fixture: 'otp/loanApplicationPage-InsSubmit.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.verifyTotalIntrestLabel('Total Interest')
        fplLoanAmountDetailsPage.verifyFeeAndchargesLabel('Fees & Charges')
        fplLoanAmountDetailsPage.verifyGSTlbl('GST @ 18%')
        fplLoanAmountDetailsPage.verifyRepaymentShedulePageButton()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.verifyPrincipalLabel('Principal')
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        signDocumentPage.clickContinueButton()
        //signServicePage - validation
        signServicePage.verifyPageTitle('Sign Service')
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.verifyContinueButtonText('Continue ')
        signServicePage.clickContinueButton()
        //OTP service validation
        cy.clock()
        signServiceOTPInputPage.verifyEnterOTPLabel('Enter OTP sent to number xxxxxxx896') //number changes w.r.t user logged in
        signServiceOTPInputPage.verifySignDocumentLabel('Sign Document with Face ID verification in the next step')
        signServiceOTPInputPage.enterOTP('123456')
        cy.tick(4000)
        loanApplicationSubmittedPage.verifypageTitle('Loan Application submitted')
    })

    it('2-KB-T8282 Verify the interest calculation for monthly product when interest calculation type is 3(more than 3 months SA product)', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-Repayments-MLA15K.json' })
        cy.intercept('**/me/loans', { fixture: 'repayments/repaymentPage-loan.json' })
        cy.intercept('**/me/loan?id=**', { fixture: 'repayments/repaymentPage-loanID-cash.json' })
        cy.visitURL('/newhome')
        homePage.verifyNextDueDateText('Your Next Due date is')
        footerPage.clickRepaymentIcon()
        repaymentPage.verifyLoanDueDateValue('01 Jan 2023')
    })

    it('1-KB-T8284 Verify the interest calculation for monthly product when interest calculation type is 4 for 619 band and 8 subband', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-MLA20-subBandGood.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-15k.json' })
        cy.intercept('**/preloanre?productId=14&action=getNow&preLoanEvent=preLoanGetNowClick&src=cash', { fixture: 'loan/fpl/fplLoanAmountTenurePage-preLoanRE-srcCash.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-productID14.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-feescalculations.json' })
        cy.intercept('**/me/bank?productid=14', { fixture: 'bank/bankAccountVerifiedPage.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-WC.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otp-sanctionOTP.json' })
        cy.intercept('**/me/otp?reason=clickwrap', { fixture: 'otp/otpSignServicePage.json' })
        cy.intercept('**/me/loan', { fixture: 'otp/loanApplicationPage-Submitted.json' })
        cy.intercept('**/me?source=session', { fixture: 'otp/loanApplicationPage-InsSubmit.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.verifyTotalIntrestLabel('Total Interest')
        fplLoanAmountDetailsPage.verifyFeeAndchargesLabel('Fees & Charges')
        fplLoanAmountDetailsPage.verifyGSTlbl('GST @ 18%')
        fplLoanAmountDetailsPage.verifyRepaymentShedulePageButton()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.verifyPrincipalLabel('Principal')
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        signDocumentPage.clickContinueButton()
        //signServicePage - validation
        signServicePage.verifyPageTitle('Sign Service')
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.verifyContinueButtonText('Continue ')
        signServicePage.clickContinueButton()
        //OTP service validation
        cy.clock()
        // signServiceOTPInputPage.verifyEnterOTPLabel('Enter OTP sent to number xxxxxxx896') //number changes w.r.t user logged in
        signServiceOTPInputPage.verifySignDocumentLabel('Sign Document with Face ID verification in the next step')
        signServiceOTPInputPage.enterOTP('123456')
        cy.tick(4000)
        loanApplicationSubmittedPage.verifypageTitle('Loan Application submitted')
    })

    it('2-KB-T8284 Verify the interest calculation for monthly product when interest calculation type is 4 for 619 band and 8 subband', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-Repayments-MLA15K.json' })
        cy.intercept('**/me/loans', { fixture: 'repayments/repaymentPage-loan.json' })
        cy.intercept('**/me/loan?id=**', { fixture: 'repayments/repaymentPage-loanID-cash.json' })
        cy.visitURL('/newhome')
        homePage.verifyNextDueDateText('Your Next Due date is')
        footerPage.clickRepaymentIcon()
        repaymentPage.verifyLoanDueDateValue('01 Jan 2023')
    })
})
describe('Get OTP Call', { retries: 1 }, () => {


    it('KB-T44908 (1.0)Ensure "Get OTP on call" option is displaying for "clickwrap" vendor during loan esign, when "GetOTPOnCall config"=1 and "Enable Call OTP on resend count"=1.Save 1.0 ', () => {
        cy.intercept('**/main/home', { fixture: '/home/homePage-MLASILVER.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: '/loan/fpl/fplPage-5k.json' })
        cy.intercept('**/main/preloanre?productId=14&action=getNow&preLoanEvent=preLoanGetNowClick&src=cash', { fixture: '/loan/fpl/fplLoanAmountTenurePage-preLoanRE-srcCash.json' })
        cy.intercept('**/products?productId=**', { fixture: '/loan/fpl/viewSummayAndChargesPage.json' })
        cy.intercept('**/products/calcfees?productid=14&loanamt=6200&tenure=**', { fixture: 'loan/fpl/fplLoanAmountDetailsPage-FeesCalculation.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/selectBankAccountPage-BankSelected.json' })
        cy.intercept('**/loan/la?updateMFILimit=0&productid=5&pointType=&csrFee=**', { fixture: 'loan/sa/signLoanDocumentPage.json' })
        cy.intercept('**/loan/la?type=kb&productid=**', { fixture: 'loan/sa/sanctionLetterPage.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/sa/loanSanctionLetterPage.json' })
        cy.intercept('**/me/tnc/loanSignService', { fixture: 'loan/sa/signServicePage.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otpPage-SignService.json' })
        // cy.intercept('**/me/otp?reason=**',{ fixture: 'onBoarding/general/OTPInputPage-getOncall.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        // cy.clock();
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.verifyPageTitle('Sign Loan Document')
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.verifypageTitle('KFS & Sanction letter')
        kfsSanctionLetterPage.selectBoxSanctionLetter('Continue to Sign Loan Document')
        kfsSanctionLetterPage.verifyContinueToSignLoanDocumentText('Continue to Sign Loan Document')
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        signDocumentPage.verifyPageTitle('Sign Document')
        signDocumentPage.verifyContinueText('Continue')
        signDocumentPage.clickContinueButton()
        signServicePage.clickConsentReadText()
        signServicePage.clickConsentUnderstoodText()
        signServicePage.clickConsentLegalAndBindingText()
        signServicePage.clickContinueButton()
        cy.clock()
        signServiceOTPInputPage.verifySignDocumentLabel('Sign Document with Face ID verification in the next step')
        cy.tick(30000)
        signServiceOTPInputPage.verifyResentText(' Resend ?')
    })
    it('KB-T44908 (1.0)Ensure "Get OTP on call" option is displaying for "clickwrap" vendor during loan esign, when "GetOTPOnCall config"=1 and "Enable Call OTP on resend count"=1.Save 1.0 ', () => {
        cy.clock()
        cy.intercept('**/me/otp?reason=**', { fixture: 'onBoarding/general/OTPInputPage-getOncall.json' })
        signServiceOTPInputPage.clickResentText()
        cy.tick(30000)
        signServiceOTPInputPage.verifyGetOTPOnCallIcon()
        signServiceOTPInputPage.verifyGetOTPOnCallText('Get OTP on call')
    })
})

describe('Business-csr-Loan suits', () => {

    it('KB-T57653 (1.0)Ensure GST is not charged for Agreement Fee (bangalore) and irrespective of agreementFeeGStExclusion config', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-MLA4-subBandDefault1.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/Amount21k-Tenure5-MLA4-subBandDefault1.json' })
        cy.intercept('**/preloanre?productId=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-preLoanRE-srcCash.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/LoanAmountTenurePage/FPL-Amount21k-Tenure5.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: '/loan/fpl/fpl-LoanAmount-DocumnetFee30.json' })
        cy.intercept('**/ins/policies/details?premium_id=**', { fixture: '/insurance/premiumDetailsPage-ICICI.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/selectBankAccountPage-BankSelected.json' })
        cy.intercept('**/loan/la?updateMFILimit=0&productid=5&pointType=&csrFee=**', { fixture: 'loan/sa/signLoanDocumentPage.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-CHOLA.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/sa/loanSanctionLetterPage.json' })
        cy.intercept('**/me/tnc/loanSignService', { fixture: 'loan/sa/signServicePage.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otpPage-SignService.json' })
        cy.intercept('**/me?source=session', { fixture: 'loan/sa/loanApplicationSubmittedPage.json' })
        cy.intercept('**/me/otp?reason=clickwrap', { fixture: 'loan/sa/otpPage-otpsubmit.json' })
        cy.intercept('**/me/loan', { fixture: 'loan/sa/LoanApplicationSubmittedPage-applSubmitted.json' })

        cy.visitURL('/newhome')
        homePage.verifyFlexiPersonalLoanLabel('FLEXI PERSONAL LOAN')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickSliderSelectLoanAmount()
        fplLoanAmountTenurePage.verifyLoanAmountValue('20,000')
        fplLoanAmountTenurePage.verifyViewSummaryAndChargesText('View Summary & charges')
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.verifyLoanDocumantSigningFee('Loan Document Fee')
        fplLoanAmountDetailsPage.verifyLoanDocumantSigningFeeValue('â‚¹ 30')
        fplLoanAmountDetailsPage.verifyGSTlbl('GST @ 18%')
        fplLoanAmountDetailsPage.verifyGSTValue('â‚¹ 247')
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentPage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.verifypageTitle('KFS & Sanction letter')
        kfsSanctionLetterPage.verifyLoanSanctionedByLabel('Your loan is being sanctioned by:')
        kfsSanctionLetterPage.verifyLenderNameText('Cholamandalam Investment and Finance Company Limited & Krazybee Services Private Limited.')
        kfsSanctionLetterPage.verifyConsentSanctionLetterText('I have read and understood the Key Fact Statement and Sanction Letter issued by the Lender(s) in respect of my loan application and I accept the same. I also understand and agree to continue receiving promotional communication from the Lenders and in respect of the value added services being offered by KreditBee.')
        kfsSanctionLetterPage.selectBoxSanctionLetter('Continue to Sign Loan Document')
        kfsSanctionLetterPage.verifyContinueToSignLoanDocumentText('Continue to Sign Loan Document')
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        signDocumentPage.verifyPageTitle('Sign Document')
        signDocumentPage.verifyInfoSignDocumentText('These Standard Terms & Conditions along with the Most Important Terms and Conditions form a legal and binding agreement upon acceptance pursuant to the Indian Contract Act, 1872 and the Information Technology Act, 2000.')
        signDocumentPage.verifyContinueText('Continue')
        signDocumentPage.clickContinueButton()
        signServicePage.clickConsentReadText()
        signServicePage.clickConsentUnderstoodText()
        signServicePage.clickConsentLegalAndBindingText()
        signServicePage.clickContinueButton()
        signServiceOTPInputPage.enterOTP('395389')
        loanApplicationSubmittedPage.verifypageTitle('Loan Application submitted')
    })

    it('KB-T57650 (1.0) Ensure GST is not charged for Agreement Fee (chennai) and respective tables are updated', () => {
        cy.intercept('**/main/home', { fixture: '/home/homePage-MLASILVER.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: '/loan/fpl/fplPage-5k.json' })
        cy.intercept('**/main/preloanre?productId=14&action=getNow&preLoanEvent=preLoanGetNowClick&src=cash', { fixture: '/loan/fpl/fplLoanAmountTenurePage-preLoanRE-srcCash.json' })
        cy.intercept('**/main/products?productId=**', { fixture: '/loan/fpl/fplLoanAmountTenurePage-productID14.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: '/loan/fpl/fplLoanAmountTenurePage-feescalculations.json' })
        cy.intercept('**/ins/policies/details?premium_id=**', { fixture: '/insurance/premiumDetailsPage-ICICI.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/selectBankAccountPage-BankSelected.json' })
        cy.intercept('**/loan/la?updateMFILimit=0&productid=5&pointType=&csrFee=**', { fixture: 'loan/sa/signLoanDocumentPage.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-CHOLA.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/sa/loanSanctionLetterPage.json' })
        cy.intercept('**/me/tnc/loanSignService', { fixture: 'loan/sa/signServicePage.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otpPage-SignService.json' })
        cy.intercept('**/me?source=session', { fixture: 'loan/sa/loanApplicationSubmittedPage.json' })
        cy.intercept('**/me/otp?reason=clickwrap', { fixture: 'loan/sa/otpPage-otpsubmit.json' })
        cy.intercept('**/me/loan', { fixture: 'loan/sa/LoanApplicationSubmittedPage-applSubmitted.json' })

        cy.visitURL('/newhome')
        homePage.verifyFlexiPersonalLoanLabel('FLEXI PERSONAL LOAN')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.verifyLoanAmountValue('6,200')
        fplLoanAmountTenurePage.clickSliderSelectLoanAmount()
        fplLoanAmountTenurePage.verifyViewSummaryAndChargesText('View Summary & charges')
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.verifyLoanDocumantSigningFee('Loan Document Fee')
        fplLoanAmountDetailsPage.verifyLoanDocumantSigningFeeValue('â‚¹ 20')
        fplLoanAmountDetailsPage.verifyGSTlbl('GST @ 18%')
        fplLoanAmountDetailsPage.verifyGSTValue('â‚¹ 84')
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentPage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.verifypageTitle('KFS & Sanction letter')
        kfsSanctionLetterPage.verifyLoanSanctionedByLabel('Your loan is being sanctioned by:')
        kfsSanctionLetterPage.verifyLenderNameText('Cholamandalam Investment and Finance Company Limited & Krazybee Services Private Limited.')
        kfsSanctionLetterPage.verifyConsentSanctionLetterText('I have read and understood the Key Fact Statement and Sanction Letter issued by the Lender(s) in respect of my loan application and I accept the same. I also understand and agree to continue receiving promotional communication from the Lenders and in respect of the value added services being offered by KreditBee.')
        kfsSanctionLetterPage.selectBoxSanctionLetter('Continue to Sign Loan Document')
        kfsSanctionLetterPage.verifyContinueToSignLoanDocumentText('Continue to Sign Loan Document')
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        signDocumentPage.verifyPageTitle('Sign Document')
        signDocumentPage.verifyInfoSignDocumentText('These Standard Terms & Conditions along with the Most Important Terms and Conditions form a legal and binding agreement upon acceptance pursuant to the Indian Contract Act, 1872 and the Information Technology Act, 2000.')
        signDocumentPage.verifyContinueText('Continue')
        signDocumentPage.clickContinueButton()
        signServicePage.clickConsentReadText()
        signServicePage.clickConsentUnderstoodText()
        signServicePage.clickConsentLegalAndBindingText()
        signServicePage.clickContinueButton()
        signServiceOTPInputPage.enterOTP('395389')
        loanApplicationSubmittedPage.verifypageTitle('Loan Application submitted')
    })

    it('KB-T47019 (1.0)Verify Confirmed user is able to Generate the CSR Report when config =1 for "credit/score/productConfig/confirmed in the yp_config table"', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-8k.json' })
        cy.intercept('**/myaccount', { fixture: 'accounts/accountsPage.json' })
        cy.intercept('**/creditreport', { fixture: '/creditScoreReport/CSRPayAndGetOTP.json' })
        cy.intercept('**/otp?reason=**', { fixture: 'creditScoreReport/CSRPaymentOptionsPage.json' })
        cy.intercept('**/payment?v=**', { fixture: '/creditScoreReport/CSRPaymentOption-Debitcard.json' })

        cy.visitURL('/newhome')
        footerPage.clickAccountIcon()
        accountsPage.clickCreditScoreText()
        csrInfoPage.clickPayAndGetReportButton()
        csrOTPInputPage.enterOTP('123456')
        csrOTPInputPage.clickOnCheckBoxText()
        csrOTPInputPage.clickSubmitBtn()
        csrPaymentOptionsPage.clickPayNowButton()
        paymentOptionPage.clickPayWithDebitCard()
    })

    it('KB-T21452 Ensure user is able to apply the coupon or points during the CSR flow', () => {
        cy.intercept('**/home', { fixture: '/home/homePage-8k.json' })
        cy.intercept('**/creditreport', { fixture: '/creditScoreReport/CSRPayAndGetOfterfilling.json' })
        cy.intercept('**/me/otp?reason=creditreport', { fixture: '/creditScoreReport/CSRPaymentOptionsPage.json' })
        cy.intercept('**/main/products/verifycoupon?couponType=**', { fixture: 'generic/applyCouponCodeSuccessfully-CSR123.json' })
        cy.intercept('**/payment?v=sp3&reqId=6279006&type=**', { fixture: 'creditScoreReport/CSRPaymentOption-Debitcard.json' })
        cy.visitURL('/newhome')
        homePage.clickcreditScoreIcon()
        csrInfoPage.clickPayAndGetReportButton()
        csrOTPInputPage.enterOTP('123456')
        csrOTPInputPage.checkConsentBox()
        csrOTPInputPage.clickSubmitBtn()
        csrPaymentOptionsPage.clickPayWithCouponCodeBtn()
        applyCouponCodeOrPointsPage.enterCSRCouponCode('CSR123')
        applyCouponCodeOrPointsPage.clickApplyCodeBtn()
        csrPaymentOptionsPage.verifyCouponSuccessFullMeassage(' applied successfully !')
        csrPaymentOptionsPage.clickPayNowButton()
        paymentOptionPage.clickPayWithDebitCard()
    })

    it('KB-T49001 CSR: Check if the Download Credit report option is working', () => {
        cy.intercept('**/home', { fixture: 'creditScoreReport/CSRConfirmedProfile.json' })
        cy.intercept('**/myaccount', { fixture: 'accounts/accountsPage.json' })
        cy.intercept('**/creditreport', { fixture: '/creditScoreReport/CSRPayAndGetOfterfilling.json' })
        cy.intercept('**/me/otp?reason=creditreport', { fixture: 'creditScoreReport/CSROTPInput.json' })
        cy.intercept('**/otp?reason=creditreport', { fixture: 'creditScoreReport/CSRPaymentOptionsPage.json' })
        cy.intercept('**/payment?v=sp3&reqId=6279006&type=**', { fixture: 'creditScoreReport/CSRPaymentOption-Debitcard.json' })
        cy.visitURL('/newhome')
        footerPage.clickAccountIcon()
        accountsPage.clickCreditScoreText()
        csrInfoPage.clickPayAndGetReportButton()
        csrOTPInputPage.enterOTP('123456')
        csrOTPInputPage.checkConsentBox()
        csrOTPInputPage.clickSubmitBtn()
        csrPaymentOptionsPage.clickPayNowButton()
        paymentOptionPage.clickPayWithDebitCard()
    })

    it('1.KB-T24082 (1.0) [CSR Phase 3]:Check the CSR report is generated when the loan is disbursed', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-MLASILVER.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-5k.json' })
        cy.intercept('**/preloanre?productId=14&action=getNow&preLoanEvent=preLoanGetNowClick&src=cash',
            { fixture: 'loan/fpl/fplLoanAmountTenurePage-preLoanRE-srcCash.json' })
        cy.intercept('**/products?productId=14', { fixture: 'loan/fpl/fplLoanAmountTenurePage-productID14.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-feescalculations.json' })
        cy.intercept('**/me/bank?productid=14', { fixture: 'bank/bankAccountVerifiedPage.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-INCRED.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otp-sanctionOTP.json' })
        cy.intercept('**/me/otp?reason=clickwrap', { fixture: 'otp/otpSignServicePage.json' })
        cy.intercept('**/me/loan', { fixture: 'otp/loanApplicationPage-Submitted.json' })
        cy.intercept('**/me?source=session', { fixture: 'otp/loanApplicationPage-InsSubmit.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.clickGetMyCSRCheckBox()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        //kfs sanction letter - validation
        kfsSanctionLetterPage.verifyPageTitle('Sanction letter')
        kfsSanctionLetterPage.verifyLoanSanctionedByLabel('Your loan is being sanctioned by:')
        kfsSanctionLetterPage.verifyLenderNameText('Visu Leasing and Finance Private Limited.')
        kfsSanctionLetterPage.verifyContinueToSignLoanDocumentText('Continue to Sign Loan Document')
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        //sanction letter -validation
        signDocumentPage.verifyPageTitle('Sign Document')
        signDocumentPage.verifyInfoSignDocumentText('These Standard Terms & Conditions along with the Most Important Terms and Conditions form a legal and binding agreement upon acceptance pursuant to the Indian Contract Act, 1872 and the Information Technology Act, 2000.')
        signDocumentPage.verifyContinueText('Continue')
        signDocumentPage.clickContinueButton()
        //signServicePage - validation
        signServicePage.verifyPageTitle('Sign Service')
        signServicePage.verifyTransactionIDLabel('Transaction ID:')
        signServicePage.verifyTransactionIDValue('KBDID202203161WMdPiEj8o811837')
        signServicePage.verifyDateAndTimeLabel('Date & Time:')
        signServicePage.verifyDeviceIDLabel('Device ID:')
        signServicePage.verifyDeviceIDValue('')
        signServicePage.verifyIPAddressLabel('IP Address:')
        signServicePage.verifyIPAddressValue('122.185.107.110')
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.verifyContinueButtonText('Continue ')
        signServicePage.clickContinueButton()
        // //OTP service validation
        signServiceOTPInputPage.verifyEnterOTPLabel('Enter OTP sent to number xxxxxxx896') //number changes w.r.t user logged in
        signServiceOTPInputPage.verifySignDocumentLabel('Sign Document with Face ID verification in the next step')
        signServiceOTPInputPage.enterOTP('123456')
        loanApplicationSubmittedPage.verifypageTitle('Loan Application submitted')
    })

    it('2.KB-T24082 (1.0) [CSR Phase 3]:Check the CSR report is generated when the loan is disbursed', () => {
        cy.intercept('**/home', { fixture: '/home/homePage-8k.json' })
        cy.intercept('**/me/creditreport', { fixture: '/creditScoreReport/CSR-New-AnalyzePage.json' })

        cy.visitURL('/newhome')
        homePage.clickcreditScoreIcon()
        csrAnalysisPage.verifyPageTitle()
        csrAnalysisPage.verifyCreditStatusText('Credit status')
    })


    it('KB-T47026 (1.0)Check Weather Rejected user is able to generate the CSR Report when "credit/score/productConfig/Non Confirmed " is 1 in yp_config table', () => {

        cy.intercept('**/home', { fixture: 'home/homePage-CSRReject.json' })
        cy.intercept('**/me/creditreport', { fixture: '/creditScoreReport/CSRCreditReportDetails.json' })
        cy.intercept('**/misc/pincode?pincode=**', { fixture: '/creditScoreReport/CSRProfileInformation.json' })
        cy.intercept('**/creditreport/details', { fixture: '/creditScoreReport/CSROTPDetails.json' })
        cy.intercept('**/otp?reason=creditreport', { fixture: '/creditScoreReport/CSROTPInput.json' })
        cy.intercept('**/me/otp?reason=**', { fixture: 'creditScoreReport/CSRPaymentOptionsPage.json' })
        cy.intercept('**/payment?v=**', { fixture: '/creditScoreReport/CSRPaymentOption-Debitcard.json' })

        cy.visitURL('/newhome')
        homePage.clickcreditScoreIcon()
        csrInfoPage.clickPayAndGetReportButton()
        csrProfileInformationPage.enterPan('FMHPM0640A')
        csrProfileInformationPage.enterDate('7')
        csrProfileInformationPage.enterMonth('Aug')
        csrProfileInformationPage.enterYear('1998')

        csrProfileInformationPage.enterFNameinput('mastan')
        csrProfileInformationPage.enterLastName('komodheen')
        csrProfileInformationPage.enterEmail('komodheen.mastan@krazybee.com')
        csrProfileInformationPage.clickAddressLine2Input('Madanapalli')
        csrProfileInformationPage.submitButton()
        csrOTPInputPage.enterOTP('123456')


        csrOTPInputPage.checkConsentBox()
        csrOTPInputPage.clickSubmitBtn()
        csrPaymentOptionsPage.clickPayNowButton()
        paymentOptionPage.clickPayWithDebitCard()

    })

    it('KB-T57651 (1.0)Ensure GST is not charged for Agreement Fee (bangalore) and respective tables are updated', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-MLA4-subBandDefault1.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/Amount21k-Tenure5-MLA4-subBandDefault1.json' })
        cy.intercept('**/preloanre?productId=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-preLoanRE-srcCash.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/LoanAmountTenurePage/FPL-Amount21k-Tenure5.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: '/loan/fpl/fpl-LoanAmountGSTNotApply.json' })
        cy.intercept('**/ins/policies/details?premium_id=**', { fixture: 'insurance/premiumDetailsPage-ICICI.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/selectBankAccountPage-BankSelected.json' })
        cy.intercept('**/loan/la?updateMFILimit=0&productid=5&pointType=&csrFee=**', { fixture: 'loan/sa/signLoanDocumentPage.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-CHOLA.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/sa/loanSanctionLetterPage.json' })
        cy.intercept('**/me/tnc/loanSignService', { fixture: 'loan/sa/signServicePage.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otpPage-SignService.json' })
        cy.intercept('**/me?source=session', { fixture: 'loan/sa/loanApplicationSubmittedPage.json' })
        cy.intercept('**/me/otp?reason=clickwrap', { fixture: 'loan/sa/otpPage-otpsubmit.json' })
        cy.intercept('**/me/loan', { fixture: 'loan/sa/LoanApplicationSubmittedPage-applSubmitted.json' })

        cy.visitURL('/newhome')
        homePage.verifyFlexiPersonalLoanLabel('FLEXI PERSONAL LOAN')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickSliderSelectLoanAmount()
        fplLoanAmountTenurePage.verifyLoanAmountValue('20,000')
        fplLoanAmountTenurePage.verifyViewSummaryAndChargesText('View Summary & charges')
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.verifyLoanDocumantSigningFee('Loan Document Fee')
        fplLoanAmountDetailsPage.verifyLoanDocumantSigningFeeValue('â‚¹ 30')
        fplLoanAmountDetailsPage.verifyGSTlbl('GST @ 18%')
        fplLoanAmountDetailsPage.verifyCSRText('Get my Credit Score Report : â‚¹ 50')
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentPage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.verifypageTitle('KFS & Sanction letter')
        kfsSanctionLetterPage.verifyLoanSanctionedByLabel('Your loan is being sanctioned by:')
        kfsSanctionLetterPage.verifyLenderNameText('Cholamandalam Investment and Finance Company Limited & Krazybee Services Private Limited.')
        kfsSanctionLetterPage.verifyConsentSanctionLetterText('I have read and understood the Key Fact Statement and Sanction Letter issued by the Lender(s) in respect of my loan application and I accept the same. I also understand and agree to continue receiving promotional communication from the Lenders and in respect of the value added services being offered by KreditBee.')
        kfsSanctionLetterPage.selectBoxSanctionLetter('Continue to Sign Loan Document')
        kfsSanctionLetterPage.verifyContinueToSignLoanDocumentText('Continue to Sign Loan Document')
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        signDocumentPage.verifyPageTitle('Sign Document')
        signDocumentPage.verifyInfoSignDocumentText('These Standard Terms & Conditions along with the Most Important Terms and Conditions form a legal and binding agreement upon acceptance pursuant to the Indian Contract Act, 1872 and the Information Technology Act, 2000.')
        signDocumentPage.verifyContinueText('Continue')
        signDocumentPage.clickContinueButton()
        signServicePage.clickConsentReadText()
        signServicePage.clickConsentUnderstoodText()
        signServicePage.clickConsentLegalAndBindingText()
        signServicePage.clickContinueButton()
        signServiceOTPInputPage.enterOTP('395389')
        loanApplicationSubmittedPage.verifypageTitle('Loan Application submitted')
    })

    it('KB-T57652 (1.0) When agreementFeeGStExclusion config is set to 0, ensure GST is charged for Agreement Fee (chennai) and respective tables are updated', () => {
        cy.intercept('**/main/home', { fixture: 'home/homePage-MLASILVER.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-5k.json' })
        cy.intercept('**/main/preloanre?productId=14&action=getNow&preLoanEvent=preLoanGetNowClick&src=cash', { fixture: 'loan/fpl/fplLoanAmountTenurePage-preLoanRE-srcCash.json' })
        cy.intercept('**/main/products?productId=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-productID14.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: '/loan/fpl/fplLoanAmountTenurePage-feescalculations.json' })
        cy.intercept('**/ins/policies/details?premium_id=**', { fixture: 'insurance/premiumDetailsPage-ICICI.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/selectBankAccountPage-BankSelected.json' })
        cy.intercept('**/loan/la?updateMFILimit=0&productid=5&pointType=&csrFee=**', { fixture: 'loan/sa/signLoanDocumentPage.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-CHOLA.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/sa/loanSanctionLetterPage.json' })
        cy.intercept('**/me/tnc/loanSignService', { fixture: 'loan/sa/signServicePage.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otpPage-SignService.json' })
        cy.intercept('**/me?source=session', { fixture: 'loan/sa/loanApplicationSubmittedPage.json' })
        cy.intercept('**/me/otp?reason=clickwrap', { fixture: 'loan/sa/otpPage-otpsubmit.json' })
        cy.intercept('**/me/loan', { fixture: 'loan/sa/LoanApplicationSubmittedPage-applSubmitted.json' })

        cy.visitURL('/newhome')
        homePage.verifyFlexiPersonalLoanLabel('FLEXI PERSONAL LOAN')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.verifyLoanAmountValue('6,200')
        fplLoanAmountTenurePage.clickSliderSelectLoanAmount()
        fplLoanAmountTenurePage.verifyViewSummaryAndChargesText('View Summary & charges')
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.verifyLoanDocumantSigningFee('Loan Document Fee')
        fplLoanAmountDetailsPage.verifyLoanDocumantSigningFeeValue('â‚¹ 20')
        fplLoanAmountDetailsPage.verifyGSTlbl('GST @ 18%')
        fplLoanAmountDetailsPage.verifyGSTValue('â‚¹ 84')
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentPage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.selectBoxSanctionLetter('Continue to Sign Loan Document')
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        signDocumentPage.clickContinueButton()
        signServicePage.clickConsentReadText()
        signServicePage.clickConsentUnderstoodText()
        signServicePage.clickConsentLegalAndBindingText()
        signServicePage.clickContinueButton()
        signServiceOTPInputPage.enterOTP('395389')
        loanApplicationSubmittedPage.verifypageTitle('Loan Application submitted')
    })

    it('KB-T41423 (1.0) Verify SA product loan creation with insurance fee', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-SA.json' })
        cy.intercept('**/preloanre?productId=**', { fixture: 'loan/sa/SA-Amount15k-Tenure6.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/sa/SA-Amount15k-Tenure6-MLA2-SubbandGood-APR-Enabled.json' })
        cy.intercept('**/products?productId=**', { fixture: '/loan/fpl/viewSummayAndChargesPage.json' })
        cy.intercept('**/products/calcfees?productid=14&loanamt=6200&tenure=**', { fixture: 'loan/fpl/fplLoanAmountDetailsPage-FeesCalculation.json' })
        cy.intercept('**/ins/policies/details?premium_id=**', { fixture: 'insurance/premiumDetailsPage-ICICI.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/selectBankAccountPage-BankSelected.json' })
        cy.intercept('**/loan/la?updateMFILimit=0&productid=5&pointType=&csrFee=**', { fixture: 'loan/sa/signLoanDocumentPage.json' })
        cy.intercept('**/loan/la?type=kb&productid=**', { fixture: 'loan/sa/sanctionLetterPage.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/sa/loanSanctionLetterPage.json' })
        cy.intercept('**/me/tnc/loanSignService', { fixture: 'loan/sa/signServicePage.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otpPage-SignService.json' })
        cy.intercept('**/me?source=session', { fixture: 'loan/sa/loanApplicationSubmittedPage.json' })
        cy.intercept('**/me/otp?reason=clickwrap', { fixture: 'loan/sa/otpPage-otpsubmit.json' })
        cy.intercept('**/me/loan', { fixture: 'loan/sa/LoanApplicationSubmittedPage-applSubmitted.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock1Btn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.clickInsuranceKnowMoreLink()
        insuranceDetailsPage.verifyCoverageUptoLabel('COVERAGE UPTO')
        insuranceDetailsPage.verifyInsuranceCoverageValue('6,200')
        insuranceDetailsPage.verifyOneTimePremiumLabel('ONE TIME PREMIUM')
        insuranceDetailsPage.verifyOneTimePremiumValue('73')
        insuranceDetailsPage.clickOkBtn()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.verifyPageTitle('Sign Loan Document')
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.verifypageTitle('KFS & Sanction letter')
        kfsSanctionLetterPage.verifyLoanSanctionedByLabel('Your loan is being sanctioned by:')
        kfsSanctionLetterPage.verifyLenderNameText('Krazybee Services Private Limited.')
        kfsSanctionLetterPage.verifyConsentSanctionLetterText('I have read and understood the Key Fact Statement and Sanction Letter issued by the Lender(s) in respect of my loan application and I accept the same. I also understand and agree to continue receiving promotional communication from the Lenders and in respect of the value added services being offered by KreditBee.')
        // kfsSanctionLetterPage.selectBoxSanctionLetter('Continue to Sign Loan Document')
        kfsSanctionLetterPage.verifyContinueToSignLoanDocumentText('Continue to Sign Loan Document')
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        signDocumentPage.verifyPageTitle('Sign Document')
        signDocumentPage.verifyInfoSignDocumentText('These Standard Terms & Conditions along with the Most Important Terms and Conditions form a legal and binding agreement upon acceptance pursuant to the Indian Contract Act, 1872 and the Information Technology Act, 2000.')
        signDocumentPage.verifyContinueText('Continue')
        signDocumentPage.clickContinueButton()
        signServicePage.clickConsentReadText()
        signServicePage.clickConsentUnderstoodText()
        signServicePage.clickConsentLegalAndBindingText()
        signServicePage.clickContinueButton()
        signServiceOTPInputPage.enterOTP('395389')
        loanApplicationSubmittedPage.verifypageTitle('Loan Application submitted')
    })

    it('1-KB-T47145 (1.0) Verify Rejected User is able to apply the Partial Points during the CSR Report Generation', () => {

        cy.intercept('**/home', { fixture: 'home/homePage-CSRReject.json' })
        cy.intercept('**/me/creditreport', { fixture: '/creditScoreReport/CSRCreditReportDetails.json' })
        cy.intercept('**/misc/pincode?pincode=**', { fixture: '/creditScoreReport/CSRProfileInformation.json' })
        cy.intercept('**/creditreport/details', { fixture: '/creditScoreReport/CSROTPDetails.json' })
        cy.intercept('**/me/tnc/csr', { fixture: '/creditScoreReport/CSRPointsinputPage.json' })
        cy.intercept('**/otp?reason=creditreport', { fixture: 'creditScoreReport/CSROtpPointsInputPage.json' })
        cy.intercept('**/me/tnc/csr', { fixture: '/creditScoreReport/CSRPointsSuccessFull.json' })
        cy.intercept('**/payment?v=**', { fixture: '/creditScoreReport/CSRPaymentOption-Debitcard.json' })

        cy.visitURL('/newhome')
        homePage.clickcreditScoreIcon()
        csrInfoPage.clickPayAndGetReportButton()
        csrProfileInformationPage.enterPan('FMHPM0640A')
        csrProfileInformationPage.enterDate('7')
        csrProfileInformationPage.enterMonth('Aug')
        csrProfileInformationPage.enterYear('1998')
        csrProfileInformationPage.enterFNameinput('mastan')
        csrProfileInformationPage.enterLastName('komodheen')
        csrProfileInformationPage.enterEmail('komodheen.mastan@krazybee.com')
        csrProfileInformationPage.clickAddressLine2Input('Madanapalli')
        csrProfileInformationPage.submitButton()
        csrOTPInputPage.enterOTP('123456')
        //csrOTPInputPage.checkConsentBox()
        csrOTPInputPage.clickSubmitBtn()
        csrPaymentOptionsPage.verifyPayNowLabel('Pay Now')
        csrPaymentOptionsPage.verifyCouponOrpointsButton('Pay with Coupon Code or Points')
        csrPaymentOptionsPage.clickCouponOrpointsButton()
        applyCouponCodeOrPointsPage.clickApplyPoints30()
        csrPaymentOptionsPage.verifyCouponSuccessFullMeassage('applied successfully !')
        csrPaymentOptionsPage.clickPayNowButton()
        paymentOptionPage.verifyPayWithDebitCardText('Pay with Debit Card')
        paymentOptionPage.verifyNetBankingText('NetBanking')
        paymentOptionPage.clickPayWithDebitCard()
    })

    it('2-KB-T47145 (1.0) Verify Rejected User is able to apply the Partial Points during the CSR Report Generation', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-CSRReject.json' })
        cy.intercept('**/me/creditreport', { fixture: '/creditScoreReport/CSR-New-AnalyzePage.json' })
        cy.intercept('**/me/creditreport/fetchAnalyticsData', { fixture: '/creditScoreReport/CSRFetchAnalyticsDataSix.json' })

        cy.visitURL('/newhome')
        homePage.clickcreditScoreIcon()
        csrAnalysisPage.verifyCreditStatusText('Credit status')
    })

    it('KB-T53577 (1.0)[CSR Enhancements]: Verify When user click on "Compare with Previous Report" user is redirected to CSR Graph Page', () => {
        cy.intercept('**/home', { fixture: '/home/homePage-8k.json' })
        cy.intercept('**/me/creditreport', { fixture: '/creditScoreReport/CSR-New-AnalyzePage.json' })
        cy.intercept('**/me/creditreport/fetchAnalyticsData', { fixture: '/creditScoreReport/CSRFetchAnalyticsDataSix.json' })

        cy.visitURL('/newhome')
        homePage.clickcreditScoreIcon()
        csrAnalysisPage.verifyCreditStatusText('Credit status')
        csrAnalysisPage.clickComparingPriviousReport()
        csrCompareInfoPage.verifyPageTitle('Credit Score & ReportCredit Score & Report')

    })

    it('KB-T53827 (1.0)[CSR Enhancements]: Verify when user has only One CSR Report Generated and user Click on "Compare with previous report" Block CTA Message Page should display "No previous report. Get your latest credit report again after <x> days to compare"', () => {
        cy.intercept('**/home', { fixture: '/home/homePage-8k.json' })
        cy.intercept('**/me/creditreport', { fixture: '/creditScoreReport/CSR-New-AnalyzePage.json' })
        cy.intercept('**/me/creditreport/creditAccountHistory', { fixture: '/creditScoreReport/CSRCreditAccountHistory.json' })

        cy.visitURL('/newhome')
        homePage.clickcreditScoreIcon()
        csrAnalysisPage.verifyCreditStatusText('Credit status')
        csrAnalysisPage.verifyComparingPriviousReport()
        csrAnalysisPage.verifyCrediAccountAndHistory()
        csrAnalysisPage.verifyCreditPaymentHistory()
        csrAnalysisPage.verifyCheckCreditsEnquires()
        csrAnalysisPage.clickCreditAccountAndHistory()
        csrAccountHistoryPage.verifyPageTitle('Credit Score & ReportCredit Score & Report')
    })

    it('KB-T47047 (1.0)Check when CSR Report is already generated Rejected User is able to redirect to Downloaded CSR Page', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-CSRReject.json' })
        cy.intercept('**/me/creditreport', { fixture: 'creditScoreReport/CSRGeneratedSuccessfully.json' })

        cy.visitURL('/newhome')
        homePage.verifyCreditReportLabel('Credit Report')
        homePage.clickcreditScoreIcon()
    })

    it('KB-T60166 (1.0) Ensure confirmed User is able to apply the Points during the CSR flow', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-8k.json' })
        cy.intercept('**/myaccount', { fixture: 'accounts/accountsPage.json' })
        cy.intercept('**/me/creditreport', { fixture: '/creditScoreReport/CSRCouponCodePayandGet.json' })
        cy.intercept('**/me/credtreport', { fixture: '/creditScoreReport/CSRPaymentOptionsPage.json' })
        cy.intercept('**/main/products/verifycoupon?couponType=**', { fixture: 'generic/applyCouponCodeSuccessfully.json' })

        cy.visitURL('/newhome')
        footerPage.clickAccountIcon()
        accountsPage.clickCreditScoreText()
        csrInfoPage.clickPayAndGetReportButton()
        csrPaymentOptionsPage.verifyPayNowLabel('Pay Now')
        csrPaymentOptionsPage.verifyCouponOrpointsButton('Pay with Coupon Code or Points')
        csrPaymentOptionsPage.clickCouponOrpointsButton()
        applyCouponCodeOrPointsPage.clickApplyPoints50()
        csrPaymentOptionsPage.verifyCouponSuccessFullMeassage('applied successfully !')
        csrPaymentOptionsPage.clickContinueButton()
    })

    it('KB-T54079 (1.0)Ensure for cash loan source loanSignService Consent should be store in yp_user_consent table whenever user is doing esign during loan creation along with tncid,Policyid, Usercashlimit,Consnetid , ConsentBody ,Version and appytpe .', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-MLASILVER.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-5k.json' })
        cy.intercept('**/preloanre?productId=14&action=getNow&preLoanEvent=preLoanGetNowClick&src=cash', { fixture: 'loan/fpl/fplLoanAmountTenurePage-preLoanRE-srcCash.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-productID14.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-feescalculations.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/bankAccountVerifiedPage.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-WC.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otp-sanctionOTP.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.verifyTotalIntrestLabel('Total Interest')
        fplLoanAmountDetailsPage.verifyFeeAndchargesLabel('Fees & Charges')
        fplLoanAmountDetailsPage.verifyGSTlbl('GST @ 18%')
        fplLoanAmountDetailsPage.verifyTenureLabel('TENURE')
        fplLoanAmountDetailsPage.verifyTransferToBankLabel('TRANSFER TO BANK')
        fplLoanAmountDetailsPage.verifyBuyEMIText('Buy EMI Protect : â‚¹ 73')
        fplLoanAmountDetailsPage.verifyApplyCouponCodeLabel_1('Apply Coupon code or Points')
        fplLoanAmountDetailsPage.verifyRepaymentShedulePageButton()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.verifyPrincipalLabel('Principal')
        repaymentSchedulePage.verifyInterestLabel('Interest')
        repaymentSchedulePage.verifyDueDateLabel('Due Date')
        repaymentSchedulePage.verifyRepayableAmountLabel('Repayable Amount')
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        //kfs sanction letter - validation
        kfsSanctionLetterPage.verifyPageTitle('Sanction letter')
        kfsSanctionLetterPage.verifyLoanSanctionedByLabel('Your loan is being sanctioned by:')
        kfsSanctionLetterPage.verifyLenderNameText('Western Capital Advisors Private Limited & Krazybee Services Private Limited.')
        kfsSanctionLetterPage.verifyContinueToSignLoanDocumentText('Continue to Sign Loan Document')
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        //sanction letter -validation
        signDocumentPage.verifyPageTitle('Sign Document')
        signDocumentPage.verifyInfoSignDocumentText('These Standard Terms & Conditions along with the Most Important Terms and Conditions form a legal and binding agreement upon acceptance pursuant to the Indian Contract Act, 1872 and the Information Technology Act, 2000.')
        signDocumentPage.verifyContinueText('Continue')
        signDocumentPage.clickContinueButton()
        //signServicePage - validation
        signServicePage.verifyPageTitle('Sign Service')
        signServicePage.verifyTransactionIDLabel('Transaction ID:')
        signServicePage.verifyTransactionIDValue('KBDID20221125cR9ofKxteb811837')
        signServicePage.verifyDateAndTimeLabel('Date & Time:')
        signServicePage.verifyDeviceIDLabel('Device ID:')
        signServicePage.verifyDeviceIDValue('')
        signServicePage.verifyIPAddressLabel('IP Address:')
        signServicePage.verifyIPAddressValue('122.185.107.110')
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.verifyContinueButtonText('Continue ')
        signServicePage.clickContinueButton()
        // //OTP service validation
        cy.clock()
        signServiceOTPInputPage.enterOTP('123456')
        // cy.tick(4000)
        //signServiceOTPInputPage.verifyTimerValue('(00:26)')
    })

    it('KB-T52699 (1.0) Ensure SA Loan Creation is success when both PD Points and Coupon is applied', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-MLASILVER.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-5k.json' })
        cy.intercept('**/preloanre?productId=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-preLoanRE-srcCash.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-productID14.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-feescalculations.json' })
        cy.intercept('**/products/verifycoupon?productid=**', { fixture: 'loan/repaymentSchedulePage/verifyCouponcode.json' })
        cy.intercept('**/me/bank?couponCode=**', { fixture: 'bank/bankAccountVerificationPage-CouponCode.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-KreditBeePVTLTD.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/loanSanctionLetterPage.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otp-sanctionOTP.json' })

        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.scrollSliderselectLoanAmount()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.clickApplyCouponCodeLabel()
        applyCouponCodeOrPointsPage.enterCouponCodeInput('TEST11')
        applyCouponCodeOrPointsPage.verifyPageTitle('Apply Coupon code or Points')
        applyCouponCodeOrPointsPage.clickApplyBtn()
        // fplLoanAmountDetailsPage.verifyCouponAppliedLabel('Apply Coupon code ')
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        signDocumentPage.verifyContinueText('Continue')
        signDocumentPage.clickContinueButton()
        signServicePage.verifyIPAddressValue('122.185.107.110')
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.verifyContinueButtonText('Continue ')
        signServicePage.clickContinueButton()
        cy.clock()
        signServiceOTPInputPage.enterOTP('123456')
        cy.tick(4000)
        signServiceOTPInputPage.verifyTimerValue('(00:26)')
    })

    it('KB-T4838 (1.0) Check whether SA banner with Apply Now is displayed in My Accounts', () => {
        cy.intercept('**/home', { fixture: '/home/homePage-SA-Accounts-Open.json' })
        cy.intercept('**/myaccount', { fixture: '/accounts/accoutPage-SA-Enabled.json' })

        cy.visitURL('/newhome')
        footerPage.clickAccountIcon()
        accountsPage.verifySALoanLabel('Salaried Loan')
        accountsPage.verifySALoanSubText('Complete your Salary profile to avail higher amount')
        accountsPage.verifySAApplyNowButton('Apply Now')

    })

    it('1-KB-T59856 (1.0)[Business Case] Verify cooloff option is shown based on the monthlyCooloffCount config set', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-MLAX-disbursal.json' })
        cy.intercept('**/me/loans', { fixture: 'repayments/repaymentPage-loanMLAX.json' })
        cy.intercept('**/pg/me/payment?v=sp3&reqId=30105322&type=foreclosure', { fixture: 'payments/paymentOptionPage.json' })
        cy.intercept('**/me/loan?id=KBST221215ITJ', { fixture: 'repayments/repaymentPage-loanID-MLAX.json' })
        cy.visitURL('/newhome')
        homePage.clickPayNowButton()
        repaymentPage.verifyForecloseTitle('Foreclose Loan')
        repaymentPage.verifyForecloseTitle('Foreclose Loan')
    })

    it('2-KB-T59856 (1.0)[Business Case] Verify cooloff option is shown based on the monthlyCooloffCount config set', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-MLAX-disbursal.json' })
        cy.intercept('**/me/loans', { fixture: 'repayments/repaymentPage-loanMLAX.json' })
        cy.intercept('**/me/loan?id=**', { fixture: 'repayments/repaymentPage-loanID-MLAX.json' })
        cy.intercept('**/pg/me/payment?v=sp3&reqId=30105322&type=foreclosure', { fixture: 'payments/paymentOptionPage.json' })
        cy.visitURL('/newhome')
        homePage.clickPayNowButton()
        repaymentPage.verifyForecloseTitle('Foreclose Loan')
        repaymentPage.verifyForecloseTitle('Foreclose Loan')
        repaymentPage.clickForeclosePaynow()
        forecloseLoanPage.verifyForeCloseloanLabel('Foreclose Loan')
        // forecloseLoanPage.clickPayLoanAmountBtn()
    })

    it('3-KB-T59856 (1.0)[Business Case] Verify cooloff option is shown based on the monthlyCooloffCount config set', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-MLAX-disbursal.json' })
        cy.intercept('**/me/loans', { fixture: 'repayments/repaymentPage-loanMLAX.json' })
        cy.intercept('**/me/loan?id=KBST221215ITJ', { fixture: 'repayments/repaymentPAge-loanID-MLAX-Foreclosure-Amount1500.json' })
        cy.intercept('**/loan/foreclosure/event', { fixture: 'repayments/repaymentPage-event.json' })
        cy.intercept('**/loan/foreclosure/reasons', { fixture: 'repayments/repaymentPage-ForeclosureReasons.json' })
        cy.intercept('**/pg/me/payment?v=**', { fixture: 'payments/paymentOptionPage.json' })
        cy.visitURL('/newhome')
        homePage.clickPayNowButton()
        repaymentPage.clickForeclosePaynow()
        forecloseLoanPage.clickPayLoanAmountBtn()
        foreclosureReasonPage.selectForecloseReason('I do not need the loan now')
        foreclosureReasonPage.clickContinueBtn()
        paymentOptionPage.clickDebitCardBlock()
    })

    it('KB-T3725 (1.0)Check that for cash loan if any of the Onboarding Fees/Reassessment Fees/Doc Collect Fees is enabled for the user should be deducted in amount disbursed', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-6.2kFPL.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-6.2k.json' })
        cy.intercept('**/preloanre?productId=14&action=getNow&prIeLoanEvent=preLoanGetNowClick&src=cash', { fixture: 'loan/fpl/fpl6.2KPreloanREPage.json' })
        cy.intercept('**/products?productId=**', { fixture: '/loan/fpl/viewSummayAndChargesPage.json' })
        cy.intercept('**/products/calcfees?productid=14&loanamt=6200&tenure=**', { fixture: 'loan/fpl/fplLoanAmountDetailsPage-FeesCalculation.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.verifyFeeAndchargesLabel('Fees & Charges')
        fplLoanAmountDetailsPage.verifyProcessingFee('Processing Fee')
        fplLoanAmountDetailsPage.verifyOnboardingFeeLabel('One Time Onboarding Fee')
        fplLoanAmountDetailsPage.verifyCSRFeeLabel('Credit Score Report Fee')
        fplLoanAmountDetailsPage.verifyGSTlbl('GST @ 18%')
        fplLoanAmountDetailsPage.verifyLoanDocumantSigningFee('Loan Document Fee')
        fplLoanAmountDetailsPage.verifyTransferToBankLabel('TRANSFER TO BANK')
    })

    it('KB-T21311 (1.0)Check the soft back and hard back buttons on Work Email Validation info screen after Extra Details page in profile flow', () => {
        cy.intercept('**/home', { fixture: '/home/homePage-HomePage-ContinueApplication.json' })
        cy.intercept('**/me', { fixture: 'onBoarding/profile/profileInformation-KYCCompleted.json' })
        cy.intercept('**/me/substateinfo', { fixture: 'onBoarding/profile/profileinfo-Sub-General.json' })
        cy.intercept('**/email?reason=verificationStatus', { fixture: 'onBoarding/profile/EmailAdressPage.entering.json' })
        cy.intercept('**/otp?reason=emailRegister&email=**', { fixture: 'onBoarding/profile/verifyEmailOtp-Submitted.json' })
        cy.intercept('**/me?type=thumbnail', { fixture: 'onBoarding/profile/KycDocSubmited.json' })

        cy.visit('/newhome ', { failOnStatusCode: false })
        homePage.clickContinueApplicationBtn()
        profileInformationPage.clickGeneralInformation()
        emailAddressInputPage.verifyPageTitle('Email Address')
        emailAddressInputPage.enterEmailAddress('tasmiya.k@krazybee.com')
        emailAddressInputPage.verifyBackLabel()
        emailAddressInputPage.clickBackLabel()
        profileInformationPage.verifyPagetitle('Profile Information')
        profileInformationPage.clickGeneralInformation()
        emailAddressInputPage.verifyPageTitle('Email Address')
        cy.go('back')
        profileInformationPage.verifyPagetitle('Profile Information')

    })

    it('KB-T21309 (1.0)Check the soft back and hard back buttons on Work Email Validation info screen after post loan flow ', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-SA-emplymentTab.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/sa/SA-EmploymentTab.json' })
        cy.intercept('**/me?type=employment&productid=**', { fixture: 'loan/sa/SA-EmpTabEnabled.json' })
        cy.intercept('**/me?type=employment', { fixture: 'loan/sa/SA-Emp-EmailidTab.json' })

        cy.visit('/newhome', { failOnStatusCode: false })
        homePage.verifyPersonalLoanSalariedLabel('PERSONAL LOAN - SALARIED')
        homePage.clickApplyNowBtn()
        saProductDetailsPage.verifyLoanAmountUptoLabel('Loan amount up to')
        saProductDetailsPage.clickApplyNowBtn()
        saEmpDetailsPage.clickEmploymentTab()
        saVerifyEmploymentPage.verifyPageTitle('Verify Employment')
        saVerifyEmploymentPage.verifyWorkEmailLabel('Work Email')
        saVerifyEmploymentPage.verifyBackLabel()
        saVerifyEmploymentPage.clickBackLabel()
        saEmpDetailsPage.verifyPageTitle('Employment details')
        saEmpDetailsPage.clickEmploymentTab()
        cy.go(-1)
        saVerifyEmploymentPage.verifyPageTitle('Verify Employment')
    })

    it('1-KB-T37393 (1.0) DISBURSAL: Check if the disbursal is happening for the MLA-5K (E-sign with Aadhar Digitap)', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-6.2kFPL.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-6.2k.json' })
        cy.intercept('**/preloanre?productId=14&action=getNow&prIeLoanEvent=preLoanGetNowClick&src=cash', { fixture: 'loan/fpl/fpl6.2KPreloanREPage.json' })
        cy.intercept('**/products?productId=**', { fixture: '/loan/fpl/viewSummayAndChargesPage.json' })
        cy.intercept('**/products/calcfees?productid=14&loanamt=6200&tenure=**', { fixture: 'loan/fpl/fplLoanAmountDetailsPage-FeesCalculation.json' })
        cy.intercept('**/ins/policies/details?premium_id=**', { fixture: 'insurance/premiumDetailsPage-FPL.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/selectBankAccountPage-BankSelected.json' })
        cy.intercept('**//loan/la?updateMFILimit=0&productid=**', { fixture: '/loan/esignWithDigitab.json' })
        // cy.intercept('**/loan/la?updateMFILimit=**', { fixture: '/loan/esignWithAdhar.json' })
        cy.intercept('**/loan/la?type=digitap&productid**', { fixture: 'loan/sa/sanctionLetterPage.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: '/loan/loanSanctionLetterEsingnAdhar.json' })
        cy.intercept('**/me/tnc/loanSignService', { fixture: '/loan/esignDigitabSignService.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.verifyPageTitle('Sign Loan Document')
        signLoanDocumentPage.verifyDigitalSignInText('Digital sign with Face IDRequires OTP + Face verification')
        signLoanDocumentPage.varifyEsingnLabel('E-sign with Aadhaar')
        signLoanDocumentPage.clickEsingnLabel()
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.verifyContinueToSignLoanDocumentText('Continue to Sign Loan Document')
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        signServicePage.clickContinueButton()
        signServiceOTPInputPage.enterOTP('395389')
    })
    it('2-KB-T37393 (1.0) DISBURSAL: Check if the disbursal is happening for the MLA-5K (E-sign with Aadhar Digitap)', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-PendingFPLLoan.json' })
        cy.visitURL('/newhome')
        homePage.verifyLoanActiveText(' Loan Active')
    })

    it('KB-T52698 (1.0) Ensure FPL Loan Creation is success when both PD Points and Coupon is applied', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-MLASILVER.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-5k.json' })
        cy.intercept('**/preloanre?productId=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-preLoanRE-srcCash.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-productID14.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-feescalculations.json' })
        cy.intercept('**/products/verifycoupon?productid=**', { fixture: 'loan/repaymentSchedulePage/verifyCouponcode.json' })
        cy.intercept('**/me/bank?couponCode=**', { fixture: 'bank/bankAccountVerificationPage-CouponCode.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-KreditBeePVTLTD.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/loanSanctionLetterPage.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otp-sanctionOTP.json' })

        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.scrollSliderselectLoanAmount()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.clickApplyCouponCodeLabel()
        applyCouponCodeOrPointsPage.enterCouponCodeInput('TEST11')
        applyCouponCodeOrPointsPage.verifyPageTitle('Apply Coupon code or Points')
        applyCouponCodeOrPointsPage.clickApplyBtn()
        // fplLoanAmountDetailsPage.verifyCouponAppliedLabel('Apply Coupon code ')
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        signDocumentPage.verifyContinueText('Continue')
        signDocumentPage.clickContinueButton()
        signServicePage.verifyIPAddressValue('122.185.107.110')
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.verifyContinueButtonText('Continue ')
        signServicePage.clickContinueButton()
        cy.clock()
        signServiceOTPInputPage.enterOTP('123456')
        signServiceOTPInputPage.verifyTimerValue('(00:30)')
    })

    it('1-KB-T18261 (1.0)Check whether the loan creation is happening or not through E-sign with aadhaar gateway.', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-6.2kFPL.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-6.2k.json' })
        cy.intercept('**/preloanre?productId=14&action=getNow&prIeLoanEvent=preLoanGetNowClick&src=cash', { fixture: 'loan/fpl/fpl6.2KPreloanREPage.json' })
        cy.intercept('**/products?productId=**', { fixture: '/loan/fpl/viewSummayAndChargesPage.json' })
        cy.intercept('**/products/calcfees?productid=14&loanamt=6200&tenure=**', { fixture: 'loan/fpl/fplLoanAmountDetailsPage-FeesCalculation.json' })
        cy.intercept('**/ins/policies/details?premium_id=**', { fixture: 'insurance/premiumDetailsPage-FPL.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/selectBankAccountPage-BankSelected.json' })
        cy.intercept('**//loan/la?updateMFILimit=0&productid=**', { fixture: '/loan/esignWithDigitab.json' })
        // cy.intercept('**/loan/la?updateMFILimit=**', { fixture: '/loan/esignWithAdhar.json' })
        cy.intercept('**/loan/la?type=digitap&productid**', { fixture: 'loan/sa/sanctionLetterPage.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: '/loan/loanSanctionLetterEsingnAdhar.json' })
        cy.intercept('**/me/tnc/loanSignService', { fixture: '/loan/esignDigitabSignService.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.verifyPageTitle('Sign Loan Document')
        signLoanDocumentPage.verifyDigitalSignInText('Digital sign with Face IDRequires OTP + Face verification')
        signLoanDocumentPage.varifyEsingnLabel('E-sign with Aadhaar')
        signLoanDocumentPage.clickEsingnLabel()
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.verifyContinueToSignLoanDocumentText('Continue to Sign Loan Document')
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        signServicePage.clickContinueButton()
        signServiceOTPInputPage.enterOTP('395389')
    })

    it('2-KB-T18261 (1.0)Check whether the loan creation is happening or not through E-sign with aadhaar gateway.', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-PendingFPLLoan.json' })
        cy.visitURL('/newhome')
        homePage.verifyLoanActiveText(' Loan Active')
    })

    it('1-KB-T11627 (1.0)Check whether the loan creation is happening or not for Paperless aadhaar users.', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-6.2kFPL.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-6.2k.json' })
        cy.intercept('**/preloanre?productId=14&action=getNow&prIeLoanEvent=preLoanGetNowClick&src=cash', { fixture: 'loan/fpl/fpl6.2KPreloanREPage.json' })
        cy.intercept('**/products?productId=**', { fixture: '/loan/fpl/viewSummayAndChargesPage.json' })
        cy.intercept('**/products/calcfees?productid=14&loanamt=6200&tenure=**', { fixture: 'loan/fpl/fplLoanAmountDetailsPage-FeesCalculation.json' })
        cy.intercept('**/ins/policies/details?premium_id=**', { fixture: 'insurance/premiumDetailsPage-FPL.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/selectBankAccountPage-BankSelected.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=kb&productid=**', { fixture: '/loan/sanctionLetterPaperlessAdhar.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/sa/loanSanctionLetterPage.json' })
        cy.intercept('**/me/tnc/loanSignService', { fixture: 'loan/sa/signServicePage.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otpPage-SignService.json' })
        cy.intercept('**/me?source=session', { fixture: 'loan/sa/loanApplicationSubmittedPage.json' })
        cy.intercept('**/me/otp?reason=clickwrap', { fixture: 'loan/sa/otpPage-otpsubmit.json' })
        cy.intercept('**/me/loan', { fixture: 'loan/sa/LoanApplicationSubmittedPage-applSubmitted.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.verifyPageTitle('Sign Loan Document')
        signLoanDocumentPage.verifyDigitalSignInText('Digital sign with Face IDRequires OTP + Face verification')
        signLoanDocumentPage.varifyEsingnLabel('E-sign with Aadhaar')
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.verifypageTitle('KFS & Sanction letter')
        kfsSanctionLetterPage.verifyLoanSanctionedByLabel('Your loan is being sanctioned by:')
        kfsSanctionLetterPage.verifyLenderNameText('Krazybee Services Private Limited.')
        kfsSanctionLetterPage.verifyConsentSanctionLetterText('I have read and understood the Key Fact Statement and Sanction Letter issued by the Lender(s) in respect of my loan application and I accept the same. I also understand and agree to continue receiving promotional communication from the Lenders and in respect of the value added services being offered by KreditBee.')
        kfsSanctionLetterPage.selectBoxSanctionLetter('Continue to Sign Loan Document')
        kfsSanctionLetterPage.verifyContinueToSignLoanDocumentText('Continue to Sign Loan Document')
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        signDocumentPage.verifyPageTitle('Sign Document')
        cy.get('[data-lazyload-listened="32"]').scrollTo('bottom')
        signDocumentPage.verifyPaperlessAdharImage()
        signDocumentPage.verifyInfoSignDocumentText('These Standard Terms & Conditions along with the Most Important Terms and Conditions form a legal and binding agreement upon acceptance pursuant to the Indian Contract Act, 1872 and the Information Technology Act, 2000.')
        signDocumentPage.verifyContinueText('Continue')
        signDocumentPage.clickContinueButton()
        signServicePage.clickConsentReadText()
        signServicePage.clickConsentUnderstoodText()
        signServicePage.clickConsentLegalAndBindingText()
        signServicePage.clickContinueButton()
        signServiceOTPInputPage.enterOTP('395389')
        loanApplicationSubmittedPage.verifypageTitle('Loan Application submitted')
    })

    it('2-KB-T11627 (1.0)Check whether the loan creation is happening or not for Paperless aadhaar users.', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-PendingFPLLoan.json' })
        cy.visitURL('/newhome')
        homePage.verifyLoanActiveText(' Loan Active')
    })

    it('KB-T58196 (1.0) When Agreement fee is not set or set to 0/NULL, ensure Agreement fee is not charged for chennai office', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-6.2kFPL.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-6.2k.json' })
        cy.intercept('**/preloanre?productId=14&action=getNow&prIeLoanEvent=preLoanGetNowClick&src=cash', { fixture: 'loan/fpl/fpl6.2KPreloanREPage.json' })
        cy.intercept('**/products?productId=**', { fixture: '/loan/fpl/viewSummaryPageWithNoDocFees.json' })
        cy.intercept('**/products/calcfees?productid=14&loanamt=6200&tenure=**', { fixture: 'loan/fpl/fplLoanAmountDetailsPage-FeesCalculation.json' })
        cy.intercept('**/ins/policies/details?premium_id=**', { fixture: 'insurance/premiumDetailsPage-FPL.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/selectBankAccountPage-BankSelected.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=kb&productid=**', { fixture: '/loan/sanctionLetterPaperlessAdhar.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/sa/loanSanctionLetterPage.json' })
        cy.intercept('**/me/tnc/loanSignService', { fixture: 'loan/sa/signServicePage.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otpPage-SignService.json' })
        cy.intercept('**/me?source=session', { fixture: 'loan/sa/loanApplicationSubmittedPage.json' })
        cy.intercept('**/me/otp?reason=clickwrap', { fixture: 'loan/sa/otpPage-otpsubmit.json' })
        cy.intercept('**/me/loan', { fixture: 'loan/sa/LoanApplicationSubmittedPage-applSubmitted.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.verifyLoanDocumantSigningFeeDisabled()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.verifyPageTitle('Sign Loan Document')
        signLoanDocumentPage.verifyDigitalSignInText('Digital sign with Face IDRequires OTP + Face verification')
        signLoanDocumentPage.varifyEsingnLabel('E-sign with Aadhaar')
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.verifypageTitle('KFS & Sanction letter')
        kfsSanctionLetterPage.verifyLoanSanctionedByLabel('Your loan is being sanctioned by:')
        kfsSanctionLetterPage.verifyLenderNameText('Krazybee Services Private Limited.')
        kfsSanctionLetterPage.verifyConsentSanctionLetterText('I have read and understood the Key Fact Statement and Sanction Letter issued by the Lender(s) in respect of my loan application and I accept the same. I also understand and agree to continue receiving promotional communication from the Lenders and in respect of the value added services being offered by KreditBee.')
        kfsSanctionLetterPage.selectBoxSanctionLetter('Continue to Sign Loan Document')
        kfsSanctionLetterPage.verifyContinueToSignLoanDocumentText('Continue to Sign Loan Document')
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        signDocumentPage.verifyPageTitle('Sign Document')
        cy.get('[data-lazyload-listened="32"]').scrollTo('bottom')
        signDocumentPage.verifyPaperlessAdharImage()
        signDocumentPage.verifyInfoSignDocumentText('These Standard Terms & Conditions along with the Most Important Terms and Conditions form a legal and binding agreement upon acceptance pursuant to the Indian Contract Act, 1872 and the Information Technology Act, 2000.')
        signDocumentPage.verifyContinueText('Continue')
        signDocumentPage.clickContinueButton()
        signServicePage.clickConsentReadText()
        signServicePage.clickConsentUnderstoodText()
        signServicePage.clickConsentLegalAndBindingText()
        signServicePage.clickContinueButton()
        signServiceOTPInputPage.enterOTP('395389')
        loanApplicationSubmittedPage.verifypageTitle('Loan Application submitted')
    })

    it('KB-T60806 (1.0) [CSR] Verify Confirm User is able to apply the Partial Points during the CSR Report Generation', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-8k.json' })
        cy.intercept('**/myaccount', { fixture: 'accounts/accountsPage.json' })
        cy.intercept('**/creditreport', { fixture: '/creditScoreReport/CSRPayAndGetOTP.json' })
        cy.intercept('**/otp?reason=creditreport', { fixture: 'creditScoreReport/CSROtpPointsInputPage.json' })
        cy.intercept('**/payment?v=**', { fixture: '/creditScoreReport/CSRPaymentOption-Debitcard.json' })

        cy.visitURL('/newhome')
        homePage.clickcreditScoreIcon()
        csrInfoPage.clickPayAndGetReportButton()
        csrOTPInputPage.enterOTP('123456')
        csrOTPInputPage.checkConsentBox()
        csrOTPInputPage.clickSubmitBtn()
        csrPaymentOptionsPage.verifyPayNowLabel('Pay Now')
        csrPaymentOptionsPage.verifyCouponOrpointsButton('Pay with Coupon Code or Points')
        csrPaymentOptionsPage.verifyPayWithNextLoanLabel('Pay with Next Loan')
        csrPaymentOptionsPage.clickCouponOrpointsButton()
        applyCouponCodeOrPointsPage.clickApplyPoints30()
        csrPaymentOptionsPage.verifyCouponSuccessFullMeassage('applied successfully !')
        csrPaymentOptionsPage.clickPayNowButton()
        paymentOptionPage.verifyPayWithDebitCardText('Pay with Debit Card')
        paymentOptionPage.verifyNetBankingText('NetBanking')
        paymentOptionPage.clickPayWithDebitCard()

    })

    it('KB-T56042 (1.0) When proc_fee_flag = 1, ensure Processing fee is charged for both Partner and KB for non KB fund and KB Points is applied along with default PD points and CSR + Insurance opted', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-MLASILVER.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-5k.json' })
        cy.intercept('**/preloanre?productId=14&action=getNow&preLoanEvent=preLoanGetNowClick&src=cash', { fixture: 'loan/fpl/fplLoanAmountTenurePage-preLoanRE-srcCash.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-productID14.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-feescalculations.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/bankAccountVerifiedPage.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-WC.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otp-sanctionOTP.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.verifyBuyEMIText('Buy EMI Protect : â‚¹ 73')
        fplLoanAmountDetailsPage.verifyApplyCouponCodeLabel_1('Apply Coupon code or Points')
        fplLoanAmountDetailsPage.clickApplyCouponCodeLabel()
        applyCouponCodeOrPointsPage.clickApplyPointsButton()
        fplLoanAmountDetailsPage.verifyCouponCodeSuccessfullLoanText('points applied successfully !')
        fplLoanAmountDetailsPage.verifyCSRFeeLabel('Credit Score Report Fee')
        fplLoanAmountDetailsPage.verifyInsurancePremiumLabel('Insurance Premium ')
        fplLoanAmountDetailsPage.verifyRepaymentShedulePageButton()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.verifyPrincipalLabel('Principal')
        repaymentSchedulePage.verifyInterestLabel('Interest')
        repaymentSchedulePage.verifyDueDateLabel('Due Date')
        repaymentSchedulePage.verifyRepayableAmountLabel('Repayable Amount')
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        //kfs sanction letter - validation
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        //sanction letter -validation

        signDocumentPage.clickContinueButton()
        //signServicePage - validation
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.verifyContinueButtonText('Continue ')
        signServicePage.clickContinueButton()
        // //OTP service validation
        cy.clock()
        signServiceOTPInputPage.enterOTP('123456')
        // cy.tick(4000)
        //signServiceOTPInputPage.verifyTimerValue('(00:26)')
    })
    it('KB-T56056 (1.0)When proc_fee_flag = 2, ensure entire Processing fee is charged by Partner for non KB fund and KB Points is applied along with default PD points and CSR opted', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-MLASILVER.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-5k.json' })
        cy.intercept('**/preloanre?productId=14&action=getNow&preLoanEvent=preLoanGetNowClick&src=cash', { fixture: 'loan/fpl/fplLoanAmountTenurePage-preLoanRE-srcCash.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-productID14.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-feescalculations.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/bankAccountVerifiedPage.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-WC.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otp-sanctionOTP.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.verifyBuyEMIText('Buy EMI Protect : â‚¹ 73')
        fplLoanAmountDetailsPage.verifyApplyCouponCodeLabel_1('Apply Coupon code or Points')
        fplLoanAmountDetailsPage.clickApplyCouponCodeLabel()
        applyCouponCodeOrPointsPage.clickApplyPointsButton()
        fplLoanAmountDetailsPage.verifyCouponCodeSuccessfullLoanText('points applied successfully !')
        fplLoanAmountDetailsPage.verifyCSRFeeLabel('Credit Score Report Fee')
        fplLoanAmountDetailsPage.verifyInsurancePremiumLabel('Insurance Premium ')
        fplLoanAmountDetailsPage.verifyRepaymentShedulePageButton()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        //kfs sanction letter - validation
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        //sanction letter -validation

        signDocumentPage.clickContinueButton()
        //signServicePage - validation
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.verifyContinueButtonText('Continue ')
        signServicePage.clickContinueButton()
        // //OTP service validation
        cy.clock()
        signServiceOTPInputPage.enterOTP('123456')
        cy.tick(4000)
        signServiceOTPInputPage.verifyTimerValue('(00:26)')
    })

    it('KB-T56028 (1.0)When proc_fee_flag = 0, ensure entire Processing fee is charged by KB for non KB fund and KB Points is applied along with default PD points and CSR + Insurance opted', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-MLASILVER.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-5k.json' })
        cy.intercept('**//ecom/offers?type=preloanBanner', { fixture: '/loan/fpl/fplOffres6k.json' })
        cy.intercept('**/preloanre?productId=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-preLoanRE-srcCash.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/fpl/fpllLoanAmountTernurepage-product.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-feescalculations.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/bankAccountVerifiedPage.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-WC.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otp-sanctionOTP.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickSelectLoanAmountMinValue()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.verifyBuyEMIText('Buy EMI Protect : â‚¹ 73')
        fplLoanAmountDetailsPage.verifyApplyCouponCodeLabel_1('Apply Coupon code or Points')
        fplLoanAmountDetailsPage.clickApplyCouponCodeLabel()
        applyCouponCodeOrPointsPage.clickApplyPointsButton()
        fplLoanAmountDetailsPage.verifyCouponCodeSuccessfullLoanText('points applied successfully !')
        fplLoanAmountDetailsPage.clickGetMyCSRCheckBox()
        fplLoanAmountDetailsPage.verifyCSRFeeLabel('Credit Score Report Fee')
        fplLoanAmountDetailsPage.verifyInsurancePremiumLabel('Insurance Premium ')
        fplLoanAmountDetailsPage.verifyRepaymentShedulePageButton()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        //kfs sanction letter - validation
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        //sanction letter -validation
        signDocumentPage.clickContinueButton()
        //signServicePage - validation
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.verifyContinueButtonText('Continue ')
        signServicePage.clickContinueButton()
        // //OTP service validation
        cy.clock()
        signServiceOTPInputPage.enterOTP('123456')
        cy.tick(4000)
        signServiceOTPInputPage.verifyTimerValue('(00:26)')
    })

    it('KB-T56030 (1.0)When proc_fee_flag = 1, ensure Processing fee is charged for both partner and KB based on colendingpercentage for non KB fund', () => {
        cy.intercept('**/home', { fixture: 'home/homepage-MLAX.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/Amount3k-Tenure3-MLASILVER-subBandBad.json' })
        cy.intercept('**/products?productId=**', { fixture: '/loan/fpl/viewSummayAndChargesPage.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-feescalculations.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/bankAccountVerifiedPage.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-INCRED.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otp-sanctionOTP.json' })
        cy.intercept('**/me/otp?reason=clickwrap', { fixture: 'otp/otpSignServicePage.json' })
        cy.intercept('**/me/loan', { fixture: 'otp/loanApplicationPage-Submitted.json' })
        cy.intercept('**/me?source=session', { fixture: 'otp/loanApplicationPage-InsSubmit.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.scrollSliderselectLoanAmount()
        fplLoanAmountTenurePage.scrollSliderselectLoanAmountLeft()
        fplLoanAmountTenurePage.verifySelectLoanAmountMinValue3000()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.verifyProcessingFeeValue('â‚¹ 175')
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        //kfs sanction letter - validation
        kfsSanctionLetterPage.verifyPageTitle('Sanction letter')
        kfsSanctionLetterPage.verifyLoanSanctionedByLabel('Your loan is being sanctioned by:')
        kfsSanctionLetterPage.verifyLenderNameText('Visu Leasing and Finance Private Limited.')
        kfsSanctionLetterPage.verifyContinueToSignLoanDocumentText('Continue to Sign Loan Document')
        kfsSanctionLetterPage.verifysanctionLetterdocument()
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        //sanction letter -validation
        signDocumentPage.verifyPageTitle('Sign Document')
        signDocumentPage.verifyInfoSignDocumentText('These Standard Terms & Conditions along with the Most Important Terms and Conditions form a legal and binding agreement upon acceptance pursuant to the Indian Contract Act, 1872 and the Information Technology Act, 2000.')
        signDocumentPage.verifyContinueText('Continue')
        signDocumentPage.clickContinueButton()
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.verifyContinueButtonText('Continue ')
        signServicePage.clickContinueButton()
        // //OTP service validation
        signServiceOTPInputPage.enterOTP('123456')
        loanApplicationSubmittedPage.verifypageTitle('Loan Application submitted')
    })

    it('KB-T60167 (1.0)Verify Confirmed user is able to Generate the CSR Report with NetBanking (NB) mode', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-8k.json' })
        cy.intercept('**/myaccount', { fixture: 'accounts/accountsPage.json' })
        cy.intercept('**/creditreport', { fixture: '/creditScoreReport/CSRPayAndGetOTP.json' })
        cy.intercept('**/otp?reason=creditreport', { fixture: 'creditScoreReport/CSROtpPointsInputPage.json' })
        cy.intercept('**/payment?v=**', { fixture: '/creditScoreReport/CSRPaymentOption-Debitcard.json' })

        cy.visitURL('/newhome')
        homePage.clickcreditScoreIcon()
        csrInfoPage.clickPayAndGetReportButton()
        csrOTPInputPage.enterOTP('123456')
        csrOTPInputPage.checkConsentBox()
        csrOTPInputPage.clickSubmitBtn()
        csrPaymentOptionsPage.verifyPayNowLabel('Pay Now')
        csrPaymentOptionsPage.verifyCouponOrpointsButton('Pay with Coupon Code or Points')
        csrPaymentOptionsPage.verifyPayWithNextLoanLabel('Pay with Next Loan')
        csrPaymentOptionsPage.clickCouponOrpointsButton()
        applyCouponCodeOrPointsPage.clickApplyPoints30()
        csrPaymentOptionsPage.verifyCouponSuccessFullMeassage('applied successfully !')
        csrPaymentOptionsPage.clickPayNowButton()
        paymentOptionPage.verifyPayWithDebitCardText('Pay with Debit Card')
        paymentOptionPage.verifyNetBankingText('NetBanking')
        paymentOptionPage.clickNetBankingBlock()
        paymentOptionPage.clickSBIBankText()
    })

    it('KB-T52701 (1.0)Ensure SA Loan Creation is success when ProcessingFee becomes zero after applying coupon code', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-SA-NoProccessingFee.json' })
        cy.intercept('**/preloanre?productId=**', { fixture: 'loan/sa/SA-Amount30k-TenurePage.json' })
        cy.intercept('**/ecom/offers?type=preloanBanner', { fixture: '/loan/sa/SA-PreloanBaner-Offers.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/sa/viewRepaymentSchedulePage-SA30k.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/sa/SA-LoanAmountTenurePage-feescalculationsProcessingFeesZero.json' })
        cy.intercept('**/products/verifycoupon?productid=**', { fixture: '/loan/repaymentSchedulePage/RepaymentSchedule30k-Couponcode.json' })
        cy.intercept('**/me/bank?couponCode=**', { fixture: 'bank/bankAccountVerificationPageProcessingFeesZero-CouponCode.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-KreditBeePVTLTD.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/loanSanctionLetterPage.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otp-sanctionOTP.json' })

        cy.visitURL('/newhome')
        homePage.clickBlock1Btn()
        saLoanAmountTenurePage.verifySelectLoanAmountLabel()
        saLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        // fplLoanAmountDetailsPage.verifyProcessingFee()
        fplLoanAmountDetailsPage.verifyProcessingFeeText('â‚¹ 1,315')
        fplLoanAmountDetailsPage.verifyApplyCouponCodeLabel()
        saLoanAmountDetailsPage.clickGetMyCSRCheckBox()
        saLoanAmountDetailsPage.verifyApplyCouponCodeLabel()
        applyCouponCodeOrPointsPage.enterCouponCodeInput('TEST11')
        applyCouponCodeOrPointsPage.clickApplyBtn()
        fplLoanAmountDetailsPage.verifyProcessingFee()
        fplLoanAmountDetailsPage.verifyProcessingFeeText('â‚¹ 0')
        saLoanAmountDetailsPage.clickGetMyCSRCheckBox()
        fplLoanAmountDetailsPage.verifyBuyEMIcheckBox()
        fplLoanAmountDetailsPage.verifyGSTlbl('GST @ 18%')
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton('Digital sign with Face ID')
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        signDocumentPage.verifyInfoSignDocumentText('These Standard Terms & Conditions along with the Most Important Terms and Conditions form a legal and binding agreement upon acceptance pursuant to the Indian Contract Act, 1872 and the Information Technology Act, 2000.')
        signDocumentPage.clickContinueButton()
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.clickContinueButton()
        cy.clock()
        signServiceOTPInputPage.enterOTP('123456')
        cy.tick(4000)
        signServiceOTPInputPage.verifyTimerValue('(00:26)')
    })

    it('KB-T52700 (1.0)Ensure FPL Loan Creation is success when ProcessingFee becomes zero after applying coupon code', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-30K-NoProcessingFee.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: '/loan/fpl/AmountMLA30K-Tenure.json' })
        cy.intercept('**/preloanre?productId=10&action=getNow&preLoanEvent=**', { fixture: '/loan/fpl/fplLoanAmountTenurePage-preLoanRE-srcCash30K.json' })
        cy.intercept('**/ecom/offers?type=preloanBanner', { fixture: '/loan/fpl/FplMLA30K-PreloanBaner-Offers.json' })
        cy.intercept('**/products?productId=**', { fixture: '/loan/fpl/fplLoanAmount-MLA30K-TenurePage.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: '/loan/fpl/fplLoanAmount-MLA30K-TenurePage-feesCalculations.json' })
        cy.intercept('**/products/verifycoupon?productid=**', { fixture: '/loan/repaymentSchedulePage/RepaymentSchedule30k-Couponcode.json' })
        cy.intercept('**/me/bank?couponCode=**', { fixture: 'bank/bankAccountVerificationPageProcessingFeesZero-CouponCode.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-MLA10K-KreditBeePVTLTD.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/loanSanctionLetterPage-MLA10K.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otpPage-SignService.json' })

        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFplGetNowCard1Button()
        fplLoanAmountTenurePage.verifySelectLoanAmountLabel()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.verifyProcessingFee()
        fplLoanAmountDetailsPage.verifyProcessingFeeText('â‚¹ 1,903')
        fplLoanAmountDetailsPage.verifyApplyCouponCodeLabel()
        fplLoanAmountDetailsPage.clickApplyCouponCodeLabel()
        applyCouponCodeOrPointsPage.enterCouponCodeInput('TEST11')
        applyCouponCodeOrPointsPage.clickApplyBtn()
        fplLoanAmountDetailsPage.verifyProcessingFee()
        fplLoanAmountDetailsPage.verifyProcessingFeeText('â‚¹ 0')
        fplLoanAmountDetailsPage.verifyInsurancePremiumLabel()
        fplLoanAmountDetailsPage.verifyBuyEMIcheckBox()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton('Digital sign with Face ID')
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        signDocumentPage.clickContinueButton()
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.verifyContinueButtonText('Continue ')
        signServicePage.clickContinueButton()
        cy.clock()
        signServiceOTPInputPage.enterOTP('123456')
        cy.tick(4000)
        signServiceOTPInputPage.verifyTimerValue('(00:26)')

    })

    it('KB-T52706 (1.0)Ensure FPL Loan Creation is success when both PD Points and Coupon is applied and CSR with insurance is opted', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-MLA10K.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: '/loan/fpl/AmountMLA10K-Tenure.json' })
        cy.intercept('**/preloanre?productId=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-preLoanRE-srcCash.json' })
        cy.intercept('**/ecom/offers?type=preloanBanner', { fixture: '/loan/fpl/FplMLA10K-PreloanBaner-Offers.json' })
        cy.intercept('**/products?productId=**', { fixture: '/loan/fpl/fplLoanAmount-MLA10K-TenurePage.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: '/loan/fpl/fplLoanAmount-MLA10K-TenurePage-feesCalculations.json' })
        cy.intercept('**/products/verifycoupon?productid=**', { fixture: '/loan/repaymentSchedulePage/RepaymentSchedule-Couponcode.json' })
        cy.intercept('**/me/bank?couponCode=**', { fixture: 'bank/bankAccountVerificationPage-CouponCode.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-MLA10K-KreditBeePVTLTD.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/loanSanctionLetterPage-MLA10K.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otpPage-SignService.json' })
        cy.intercept('**/me?source=session', { fixture: 'loan/sa/loanApplicationSubmittedPage.json' })
        cy.intercept('**/me/otp?reason=clickwrap', { fixture: 'loan/sa/otpPage-otpsubmit.json' })
        cy.intercept('**/me/loan', { fixture: 'loan/sa/LoanApplicationSubmittedPage-applSubmitted.json' })


        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFplGetNowCard1Button()
        fplLoanAmountTenurePage.verifySelectLoanAmountLabel()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.verifyProcessingFee()
        fplLoanAmountDetailsPage.verifyProcessingFeeText('â‚¹ 1,250')
        fplLoanAmountDetailsPage.verifyApplyCouponCodeLabel()
        fplLoanAmountDetailsPage.clickApplyCouponCodeLabel()
        applyCouponCodeOrPointsPage.enterCouponCodeInput('PRO123')
        applyCouponCodeOrPointsPage.clickApplyBtn()
        fplLoanAmountDetailsPage.verifyCouponAppliedLabel('applied successfully !')
        fplLoanAmountDetailsPage.verifyProcessingFee()
        fplLoanAmountDetailsPage.verifyProcessingFeeText('â‚¹ 470')
        fplLoanAmountDetailsPage.verifyInsurancePremiumLabel()
        fplLoanAmountDetailsPage.verifyBuyEMIcheckBox()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton('Digital sign with Face ID')
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        signDocumentPage.clickContinueButton()
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.verifyContinueButtonText('Continue ')
        signServicePage.clickContinueButton()
        cy.clock()
        signServiceOTPInputPage.enterOTP('123456')
        //  loanApplicationSubmittedPage.verifyPageTitle('Loan Application submitted')
    })

    it('KB-T60168 (1.0) Ensure for Rejected customer is able to generate the CSR Report with Net Banking (NB) mode', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-CSRReject.json' })
        cy.intercept('**/me/creditreport', { fixture: '/creditScoreReport/CSRCreditReportDetails.json' })
        cy.intercept('**/misc/pincode?pincode=**', { fixture: '/creditScoreReport/CSRProfileInformation.json' })
        cy.intercept('**/creditreport/details', { fixture: '/creditScoreReport/CSROTPDetails.json' })
        cy.intercept('**/otp?reason=creditreport', { fixture: '/creditScoreReport/CSROTPInput.json' })
        cy.intercept('**/me/otp?reason=**', { fixture: 'creditScoreReport/CSRPaymentOptionsPage.json' })
        cy.intercept('**/payment?v=**', { fixture: '/creditScoreReport/CSRPaymentOption-Debitcard.json' })

        cy.visitURL('/newhome')
        homePage.clickcreditScoreIcon()
        csrInfoPage.clickPayAndGetReportButton()
        csrProfileInformationPage.enterPan('FMHPM0640A')
        csrProfileInformationPage.enterDate('7')
        csrProfileInformationPage.enterMonth('Aug')
        csrProfileInformationPage.enterYear('1998')
        csrProfileInformationPage.enterFNameinput('mastan')
        csrProfileInformationPage.enterLastName('komodheen')
        csrProfileInformationPage.enterEmail('komodheen.mastan@krazybee.com')
        csrProfileInformationPage.clickAddressLine2Input('Madanapalli')
        csrProfileInformationPage.submitButton()
        csrOTPInputPage.enterOTP('123456')
        csrOTPInputPage.checkConsentBox()
        csrOTPInputPage.clickSubmitBtn()
        csrPaymentOptionsPage.clickPayNowButton()
        paymentOptionPage.verifyPayWithDebitCardText('Pay with Debit Card')
        paymentOptionPage.verifyNetBankingText('NetBanking')
        paymentOptionPage.clickNetBankingBlock()
        paymentOptionPage.clickSBIBankText()
    })

    it('KB-T37804 (1.0)Complete the work email flow in employment details of SA', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-SA-emplymentTab.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/sa/SA-EmploymentTab.json' })
        cy.intercept('**/me?type=employment&productid=**', { fixture: 'loan/sa/SA-EmpTabEnabled.json' })
        cy.intercept('**/me?type=employment', { fixture: 'loan/sa/SA-Emp-EmailidTab.json' })
        cy.intercept('**/me/extradetails/sa/workemailverification/otp', { fixture: '/loan/sa/SAEmpDetailsPage/EmployeeDetaile-OtpValidation.json' })
        cy.intercept('**/me/extradetails/sa/workemailverification/otp?email=**', { fixture: '/loan/sa/SAEmpDetailsPage/EmployeeDetails-EmailValidation.json' })
        cy.intercept('**/me/profile/doc', { fixture: '/loan/sa/SAEmpDetailsPage/EmloyeementDocumentSuccess.json' })
        cy.visit('/newhome', { failOnStatusCode: false })
        homePage.verifyPersonalLoanSalariedLabel('PERSONAL LOAN - SALARIED')
        homePage.clickApplyNowBtn()
        saProductDetailsPage.verifyLoanAmountUptoLabel('Loan amount up to')
        saProductDetailsPage.clickApplyNowBtn()
        saEmpDetailsPage.clickEmploymentTab()
        saVerifyEmploymentPage.verifyPageTitle('Verify Employment')
        saVerifyEmploymentPage.clickBackLabel()
        saEmpDetailsPage.clickEmploymentTab()
        cy.go(-1)
        saEmpDetailsPage.clickEmploymentTab()
        saVerifyEmploymentPage.verifyWorkEmailLabel('Work Email')
        saVerifyEmploymentPage.clickVerifyEmailButton()
        verifyWorkEmailInfoPage.verifyBackLabel()
        verifyWorkEmailInfoPage.clickBackLabel()
        saVerifyEmploymentPage.clickVerifyEmailButton()
        cy.go(-1)
        saVerifyEmploymentPage.clickVerifyEmailButton()
        verifyWorkEmailInfoPage.verifyPageTitle(' Verify Work Email ')
        verifyWorkEmailInfoPage.clickContinueButton()
        verifyWorkEmailPage.enterWorkEmail('komodheen.mastan@krazybee.com')
        verifyWorkEmailPage.clickSendOTP()
        verifyWorkEmailOTPInputPage.enterOTP('123456')
        verifyWorkEmailOTPInputPage.clickSubmitButton()
        cy.intercept('**/me?type=employment', { fixture: '/loan/sa/SAEmpDetailsPage/EmployeeEmailsucess.json' })
        saVerifyEmploymentPage.verfiyEmailVerified('Email Verified')
        saVerifyEmploymentPage.verfiyConfirmAndContinueButton('Confirm and Continue')
        saVerifyEmploymentPage.clickConfirmAndContinueButton()
        cy.intercept('**/me?type=**', { fixture: '/loan/sa/SAEmpDetailsPage/SAEmployeementProductVerifyingPage.json' })
        saVerifyWorkEmailRefreshPage.verifyPageTitle('Verifying your employment details')
        saVerifyWorkEmailRefreshPage.verifySubTextOfVerifyingDetails('Please wait while we verify your employment details. This may take a couple of minutes.')
        saVerifyWorkEmailRefreshPage.verifyRefreshButton('Refresh')

    })


})

describe('Business cases ,Digi Gold', () => {

    it('KB-T8427 (1.0)Check that Users should get an error message when invalid domain variants are entered in the Change email page.', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-changeEmail.json' })
        cy.intercept('**/myaccount', { fixture: 'accounts/accountPage-changeEmail.json' })
        cy.intercept('**/me/tnc/emailChange', { fixture: 'onBoarding/profile/enterYourNewEmailAddressPage.json' })
        cy.visitURL('/newhome')
        homePage.clickMyAccountIcon()
        accountsPage.clickSettingsBtn()
        settingsPage.clickChangeEmailText()
        enterYourNewEmailAddressPage.enterEmailAddress('username@123xyz.cam')
        enterYourNewEmailAddressPage.clickEmailAddressConfirmationCheckBox()
        enterYourNewEmailAddressPage.clickSendOTPButton()
        enterYourNewEmailAddressPage.verifyInvalidEmailAddressText('Invalid Email address')
    })

    it('KB-T49301 (1.0)Check if Grievance Redressal Policy page is displayed proper', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-changeEmail.json' })
        cy.visitURL('/newhome')
        headerPage.clickSettingBtn()
        settingsPage.clickGrevanceRedressalPolicyBtn()
        grievanceRedressalPolicyInfoPage.verifyPageTitle('Grievance Redressal Policy')
        grievanceRedressalPolicyInfoPage.verifyPurposeLabel('Purpose')
    })

    it('KB-T49302 (1.0)Check if Lending Partners page is displayed proper', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-changeEmail.json' })
        cy.intercept('**/lendingpartners', { fixture: 'lendingPartners/lendingPartnerBanksPage.json' })
        cy.visitURL('/newhome')
        headerPage.clickSettingBtn()
        settingsPage.clickLendingPartnersBtn()
        lendingPartnerBanksPage.verifyPageTitle('Lending Partners')
        lendingPartnerBanksPage.verifyServicedByPartnerBankKisetsuSaisonFinancelabel('Kisetsu Saison Finance (India) Private Limited (KSF)')
        lendingPartnerBanksPage.verifyServicedByPartnerBankKrazybeeServicesPrivateLimitedlabel('Krazybee Services Private Limited')
        lendingPartnerBanksPage.verifyServicedByPartnerBankIIFLFinanceLimitedlabel('IIFL Finance Limited')
    })

    it('KB-T38626 (1.0)[Digital Gold Buy]Verify the conversion of entered Grams to rupees is displaying in 24K Gold page', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-gold-ConfirmUser.json' })
        cy.intercept('**/vasgold/digitalgold/investment/details', { fixture: 'gold/goldHomePage-rejectuser.json' })
        cy.intercept('**/vasgold/digitalgold/home', { fixture: 'gold/goldHomePage-rejecteduser1.json' })
        cy.intercept('**/ecom/offers?type=goldHomeBanner', { fixture: 'gold/goldHomePage-banners.json' })
        cy.intercept('**vasgold/digitalgold/calculator', { fixture: 'gold/goldBuyPage-DecimalGramsPrefilled.json' })

        cy.visit('/newhome', { failOnStatusCode: false });
        homePage.clickGoldIcon()
        goldHomePage.verifyPageTitle('24K Gold')
        goldHomePage.verifyGoldCoinsImage()
        goldHomePage.verifyGoldBalanceLabel('GOLD BALANCE')
        goldHomePage.clickInvestNowButton()
        goldBuyPage.enterGramsFieldInput()
        goldBuyPage.verifyAmountInRupeesPrefilled()
    })

    it('KB-T40229 (1.0)[Digital Gold Homepage] Verify by default Gold live buy price is displaying in gold homepage', function () {
        cy.intercept('**/home', { fixture: 'gold/GoldNewHomePage.json' })
        cy.intercept('**/vasgold/digitalgold/investment/details', { fixture: 'gold/goldHomePage-Details1.json' })
        cy.intercept('**/vasgold/digitalgold/home', { fixture: 'gold/goldHomePage-newgoldHome.json' })
        cy.intercept('**/vasgold/digitalgold/transaction/eligibility', { fixture: 'gold/trasn.json' })
        cy.intercept('**/ecom/offers?type=goldHomeBanner', { fixture: 'gold/goldHomePage-NBanners.json' })

        cy.visit('/newhome', { failOnStatusCode: false });
        // cy.wait(3000)
        // cy.reload()
        homePage.clickGoldIcon()

        // cy.wait(8000)
        goldHomePage.verifyPageTitle('24K Gold')
        goldHomePage.verifyBuyPricePerGramLabel('Buy Price per gram:')
    })

    it('KB-T17154 (1.0)Check if payment history page is displayed', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-PendingLoan-FirstInstallmentPaid.json' })
        cy.intercept('**/me/loans', { fixture: 'repayments/repaymentPage-FirstInstallmentPaid.json' })
        cy.intercept('**/me/loan?id=**', { fixture: 'repayments/repaymentPage-LoanID-FirstInstallmentPaid.json' })
        cy.intercept('**/pg/me/payment/history?requestId=**', { fixture: 'repayments/paymentHistoryPage-InstallmentPaid.json' })
        cy.visitURL('/newhome')
        footerPage.clickRepaymentText()
        repaymentPage.clickPaymentHistoryLabel()
        paymentHistoryPage.verifyPageTitle('Payment history')
    })

    it('KB-T8398 (1.0)Check whether user is being redirected to DC page', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-PendingFPLLoan.json' })
        cy.intercept('**/me/loans', { fixture: 'repayments/repaymentPage-FPL.json' })
        cy.intercept('**/me/loan?id=KBST230209SZF', { fixture: 'repayments/repaymentPage-FPLLoan.json' })
        cy.intercept('**/pg/me/payment?v=sp3&reqId=31989669&type=', { fixture: 'payments/paymentOptionsPage-FPL.json' })
        cy.intercept('**/pg/me/payment/order?type=', { fixtutre: 'payments/paymentOptionsPage-DC.json' })
        cy.intercept('https://api.razorpay.com/v1/standard_checkout/preferences?session_token=**', { fixtutre: 'payments/debitCardDetailsPage-RazorPay.json' })
        cy.intercept('https://api.razorpay.com/v1/standard_checkout/checkout/rewards?session_token=**', { fixtutre: 'payments/debitCardDetailsPage-FPL.json' })
        cy.visitURL('/newhome')
        footerPage.clickRepaymentText()
        repaymentPage.clickPayNowBtn()
        paymentOptionPage.clickPayWithDebitCard()
    })

    it('KB-T13830 (1.0)Check if the fee and charges are highlighted and are as per the loan amount taken', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-MLASILVER.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fpl6.2KPage-Passport.json' })
        cy.intercept('**/preloanre?productId=**', { fixture: 'loan/sa/SA-Amount15k-Tenure6.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/sa/SA-Amount15k-Tenure6-MLA2-SubbandGood-APR-Enabled.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountDetailsPage-FeesCalculation.json' })
        cy.intercept('**/ins/policies/details?premium_id=**', { fixture: 'insurance/premiumDetailsPage-ICICI.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/selectBankAccountPage-BankSelected.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/sa/signLoanDocumentPage.json' })
        cy.intercept('**/loan/la?type=kb&productid=**', { fixture: 'loan/sa/sanctionLetterPage.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/sa/loanSanctionLetterPage.json' })
        cy.intercept('**/me/tnc/loanSignService', { fixture: 'loan/sa/signServicePage.json' })
        cy.intercept('**/me?source=session', { fixture: 'loan/sa/loanApplicationSubmittedPage.json' })

        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.verifyPageTitle('Sign Loan Document')
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.verifypageTitle('KFS & Sanction letter')
        kfsSanctionLetterPage.verifyDetailsOfFeeAndChargesPageImage('https://kimaginary.buynsta.com/path//f4Ea5VsssAWGpObJ90IlHSU8GUH3/docs/KBST230102VWE/SANC73f81c68-c5a1-9a2b-78f6-7a64e156b4ca.pdf?page=1')
        kfsSanctionLetterPage.selectBoxSanctionLetter('Continue to Sign Loan Document')
        kfsSanctionLetterPage.verifyContinueToSignLoanDocumentText('Continue to Sign Loan Document')
    })

    it('KB-T20934 (1.0)check preloan RE call is not happening when user is in cooldown period', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-CooldownPeriod.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-Cooldown.json' })
        cy.intercept('**/me/lacd?productId=14&loanProductType=cash', { fixture: 'loan/fpl/loanTenurePage-Cooldown.json' })
        cy.visitURL('/newhome')
        homePage.clickFPLGetNowBtn()
        fplPage.clickFPL4KGetNowBtn()
        cooldownPeriodPage.verifyYouNeedToWaitTillLabel('You need to wait till')
        cooldownPeriodPage.verifyYouNeedToWaitTillDateValue('01 Mar 2023')
        cooldownPeriodPage.verifyRetryToApplyForLoanText('Due to delays in repayment, you need to wait for a while to apply for a loan. Please retry again on the above mentioned date to apply.')
    })

    it('KB-T11613 (1.0)Check whether the Passport front and back is displaying in LFA page or not while taking loan.', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-Passport.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fpl6.2KPage-Passport.json' })
        cy.intercept('**/preloanre?productId=**', { fixture: 'loan/sa/SA-Amount15k-Tenure6.json' })
        // cy.intercept('**/products?productId=**', { fixture: 'loan/sa/SA-Amount15k-Tenure6-MLA2-SubbandGood-APR-Enabled.json' })
        cy.intercept('**/products?productId=**', { fixture: '/loan/fpl/viewSummayAndChargesPage.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountDetailsPage-FeesCalculation.json' })
        cy.intercept('**/ins/policies/details?premium_id=**', { fixture: 'insurance/premiumDetailsPage-ICICI.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/selectBankAccountPage-BankSelected.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/sa/signLoanDocumentPage.json' })
        cy.intercept('**/loan/la?type=kb&productid=**', { fixture: 'loan/fpl/loanSanctionLetterPage-Passport-LFA.json' })
        //      cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/fpl/loanSanctionLetterPage-LFA-Passport.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/fpl/loanSanctionLetterPage-Passport.json' })
        cy.intercept('**/me/tnc/loanSignService', { fixture: 'loan/sa/signServicePage.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otpPage-SignService.json' })
        cy.intercept('**/me?source=session', { fixture: 'loan/sa/loanApplicationSubmittedPage.json' })
        cy.intercept('**/me/otp?reason=clickwrap', { fixture: 'loan/sa/otpPage-otpsubmit.json' })
        cy.intercept('**/me/loan', { fixture: 'loan/sa/LoanApplicationSubmittedPage-applSubmitted.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.verifyPageTitle('Sign Loan Document')
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.verifypageTitle('KFS & Sanction letter')
        kfsSanctionLetterPage.verifyContinueToSignLoanDocumentText('Continue to Sign Loan Document')
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        signDocumentPage.verifyPageTitle('Sign Document')
        cy.get('[data-lazyload-listened="32"]').scrollTo('bottom', { ensureScrollable: false })
        signDocumentPage.verifyPassportFrontAndBackImage()
        signDocumentPage.verifySelfieImage()
        signDocumentPage.verifyContinueText('Continue')
    })
})

describe('Account , Settings , Loan , SA', () => {

    it('KB-T45408 (1.0) [Login] Check "Referral code" screen is displayed', () => {
        cy.visit('/home/referral', { failOnStatusCode: false });
        referalPopupPage.verifyPageTitle('Do you have a Referral Code ?')
    })

    it('KB-T41396 Verify that loan getting disburse with intermediate amount (3.5k) for FPL product', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-MLASILVER.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-5k.json' })
        cy.intercept('**/preloanre?productId=14&action=getNow&preLoanEvent=preLoanGetNowClick&src=cash',
            { fixture: 'loan/fpl/fplLoanAmountTenurePage-preLoanRE-srcCash.json' })
        cy.intercept('**/products?productId=14', { fixture: 'loan/fpl/fplLoanAmountTenurePage-productID14.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-feescalculations.json' })
        cy.intercept('**/me/bank?productid=14', { fixture: 'bank/bankAccountVerifiedPage.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-INCRED.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otp-sanctionOTP.json' })
        cy.intercept('**/me/otp?reason=clickwrap', { fixture: 'otp/otpSignServicePage.json' })
        cy.intercept('**/me/loan', { fixture: 'otp/loanApplicationPage-Submitted.json' })
        cy.intercept('**/me?source=session', { fixture: 'otp/loanApplicationPage-InsSubmit.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        //kfs sanction letter - validation
        kfsSanctionLetterPage.verifyPageTitle('Sanction letter')
        kfsSanctionLetterPage.verifyLoanSanctionedByLabel('Your loan is being sanctioned by:')
        kfsSanctionLetterPage.verifyLenderNameText('Visu Leasing and Finance Private Limited.')
        kfsSanctionLetterPage.verifyContinueToSignLoanDocumentText('Continue to Sign Loan Document')
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        //sanction letter -validation
        signDocumentPage.verifyPageTitle('Sign Document')
        signDocumentPage.verifyInfoSignDocumentText('These Standard Terms & Conditions along with the Most Important Terms and Conditions form a legal and binding agreement upon acceptance pursuant to the Indian Contract Act, 1872 and the Information Technology Act, 2000.')
        signDocumentPage.verifyContinueText('Continue')
        signDocumentPage.clickContinueButton()
        //signServicePage - validation
        signServicePage.verifyPageTitle('Sign Service')
        signServicePage.verifyTransactionIDLabel('Transaction ID:')
        signServicePage.verifyTransactionIDValue('KBDID202203161WMdPiEj8o811837')
        signServicePage.verifyDateAndTimeLabel('Date & Time:')
        signServicePage.verifyDeviceIDLabel('Device ID:')
        signServicePage.verifyDeviceIDValue('')
        signServicePage.verifyIPAddressLabel('IP Address:')
        signServicePage.verifyIPAddressValue('122.185.107.110')
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.verifyContinueButtonText('Continue ')
        signServicePage.clickContinueButton()
        // //OTP service validation
        signServiceOTPInputPage.verifyEnterOTPLabel('Enter OTP sent to number xxxxxxx896') //number changes w.r.t user logged in
        signServiceOTPInputPage.verifySignDocumentLabel('Sign Document with Face ID verification in the next step')
        signServiceOTPInputPage.enterOTP('123456')
        loanApplicationSubmittedPage.verifypageTitle('Loan Application submitted')
    })

    it('KB-T45618 (1.0) [Login] Check by default "No; i dont have referral code" option is highlighted in referral code', function () {
        cy.intercept('**/referralCode', { fixture: 'referalcodePopUp/referalcodePopUp-skipped.json' }).as('referralPopupSkipped')
        cy.intercept('**/eligible', { fixture: 'home/homePage-eligibleVerification.json' }).as('homeEligibleVerification')
        cy.intercept('**/me/pan', { fixture: 'pan/panInpPage-processingStatePending.json' }).as('panProcessingStatePending')

        cy.visitURL('/home/referral')

        referalPopupPage.verifyPageTitle('Do you have a Referral Code ?')
        referalPopupPage.verifyNoIDontHaveReferalCodeText("No; I don't have a referral code")
        referalPopupPage.verifySubmitTextGreyedOut()
    })

    it('KB-T45409 (1.0) [Login] Check "Referral code" is optional/skippable and is navigate to PAN page', function () {
        cy.intercept('**/referralCode', { fixture: 'referalcodePopUp/referalcodePopUp-skipped.json' }).as('referralPopupSkipped')
        cy.intercept('**/eligible', { fixture: 'home/homePage-eligibleVerification.json' }).as('homeEligibleVerification')
        cy.intercept('**/me/pan', { fixture: 'pan/panInpPage-processingStatePending.json' }).as('panProcessingStatePending')

        cy.visitURL('/home/referral')

        referalPopupPage.verifyPageTitle('Do you have a Referral Code ?')
        referalPopupPage.verifyNoIDontHaveReferalCodeText("No; I don't have a referral code")
        referalPopupPage.verifySubmitTextGreyedOut()
        referalPopupPage.verifyCloseIcon()
        referalPopupPage.clickCloseIconBtn()
        panInputPage.verifyPanPageTitle('PAN')
    })

    it('KB-T45411 (1.0) [Login] Verify after submitting the referral code is navigating to PAN page', function () {
        cy.intercept('**/referralCode', { fixture: 'referalcodePopUp/referalcodePopUp-skipped.json' }).as('referralPopupSkipped')
        cy.intercept('**/eligible', { fixture: 'home/homePage-eligibleVerification.json' }).as('homeEligibleVerification')
        cy.intercept('**/me/pan', { fixture: 'pan/panInpPage-processingStatePending.json' }).as('panProcessingStatePending')

        cy.visitURL('/home/referral')

        referalPopupPage.verifyPageTitle('Do you have a Referral Code ?')
        referalPopupPage.verifyNoIDontHaveReferalCodeText("No; I don't have a referral code")
        referalPopupPage.verifySubmitTextGreyedOut()
        referalPopupPage.enterReferalCode('rgsid123')
        referalPopupPage.verifySubmitText('Submit')
        referalPopupPage.clickSubmitBtn()
        panInputPage.verifyPageTitle('PAN')
    })

    it('KB-T45249 [PAN] Check "Please Wait" Loading screen is displayed after submitting the PAN number', () => {

        cy.intercept('**/me/pan', { fixture: 'onBoarding/eligibility/eligibility-PANInput.json' })
        cy.intercept('**/me/pan/status', { fixture: 'onBoarding/eligibility/incomeDetailsPage-status.json' })

        cy.visit('/eligibility/pan', { failOnStatusCode: false });
        panInputPage.verifyPageTitle('PAN')
        panInputPage.verifyEnterYourPANLabel('Enter your PAN')
        panInputPage.enterPan('DCFPM0646N')
        panInputPage.clickSubmitBtn()
        loaderScreenPage.verifyPleaseWaitLabel('Please wait')
        loaderScreenPage.verifyPleaseWaitSubtext('This may take up to a minute')
    })

    it('KB-T45243 [PAN] Check for Duplicate PAN screen', () => {

        cy.intercept('**/me/eligible', { fixture: 'onBoarding/eligibility/PANPage-EligiblityPan.json' })
        cy.intercept('**/me/pan', { fixture: 'onBoarding/eligibility/PANPage-DuplicatePan.json' })

        cy.visit('/eligibility/pan', { failOnStatusCode: false });
        panInputPage.verifyPageTitle('PAN')
        panInputPage.verifyEnterYourPANLabel('Enter your PAN')
        panInputPage.enterPan('DCFPM0646N')
        panInputPage.clickSubmitBtn()
        panInputPage.verifyLogoutButton()
        cy.contains('span', 'This PAN exists with a different profile having mobile number XXXXXX6336. Please login using the correct mobile number').should('be.extensible')
    })

    it('KB-T41412 (1.0) Verify SA Product loan creation with coupon code', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-MLASILVER.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-5k.json' })
        cy.intercept('**/preloanre?productId=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-preLoanRE-srcCash.json' })
        cy.intercept('**/products?productId=**', { fixture: '/loan/fpl/viewSummayAndChargesPage.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-feescalculations.json' })
        cy.intercept('**/products/verifycoupon?productid=**', { fixture: 'loan/repaymentSchedulePage/verifyCouponcode.json' })
        cy.intercept('**/me/bank?couponCode=**', { fixture: 'bank/bankAccountVerificationPage-CouponCode.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-KreditBeePVTLTD.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/loanSanctionLetterPage.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otp-sanctionOTP.json' })

        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.scrollSliderselectLoanAmount()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.clickApplyCouponCodeLabel()
        applyCouponCodeOrPointsPage.enterCouponCodeInput('TEST11')
        applyCouponCodeOrPointsPage.clickApplyBtn()
        fplLoanAmountDetailsPage.verifyCouponAppliedLabel('applied successfully !')
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        signDocumentPage.verifyContinueText('Continue')
        signDocumentPage.clickContinueButton()
        signServicePage.verifyIPAddressValue('122.185.107.110')
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.verifyContinueButtonText('Continue ')
        signServicePage.clickContinueButton()
        cy.clock()
        signServiceOTPInputPage.enterOTP('123456')
        cy.tick(4000)
        signServiceOTPInputPage.verifyTimerValue('(00:26)')
    })

    it('KB-T46196 (1.0)Verify Call now option displaying only for SA loan product application', function () {
        cy.intercept('**/home', { fixture: 'home/homePage-SA-ApplyNow.json' })
        cy.intercept('**/products?productId=*', { fixture: 'loan/sa/SA-ProductDetailsPage-applynow.json' })
        cy.intercept('**/me?type=employment&productid=**', { fixture: 'loan/sa/SA-EmpDetailsPage-callnowbtn.json' })

        cy.visit('/newhome', { failOnStatusCode: false })
        homePage.verifyPersonalLoanSalariedLabel('PERSONAL LOAN - SALARIED')
        homePage.clickApplyNowBtn()
        saProductDetailsPage.verifyLoanAmountUptoLabel('Loan amount up to')
        saProductDetailsPage.clickApplyNowBtn()
        saEmpDetailsPage.verifyPageTitle('Employment details')
        saEmpDetailsPage.verifyCallNowButtonBtn()
    })

    it('1.KB-T21629 Test case to Verify the Loan disbursal and repayment for SA product', () => {
        cy.intercept('**/home', { fixture: 'home/Repayment-SA-HomePage.json' })
        cy.intercept('**/preloanre?productId=**', { fixture: 'loan/sa/SA-PreLoan.json' })
        cy.intercept('**/products?productId=****', { fixture: 'loan/sa/saProductsPage.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/sa/SA-Calcfees.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/SA-AddedBank.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-KreditBeePVTLTD.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/loanSanctionLetterPage.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otp-sanctionOTP.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock1Btn()
        saLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        saLoanAmountDetailsPage.verifyAnnualPercentageRateLabel('Annual Percentage Rate')
        saLoanAmountDetailsPage.verifyAnnualPercentageRateValue()
        saLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        //kfs sanction letter - validation
        kfsSanctionLetterPage.verifyPageTitle('KFS & Sanction letter')
        kfsSanctionLetterPage.verifyLoanSanctionedByLabel('Your loan is being sanctioned by:')
        kfsSanctionLetterPage.verifyLenderNameText('Krazybee Services Private Limited.')
        kfsSanctionLetterPage.verifyContinueToSignLoanDocumentText('Continue to Sign Loan Document')
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        //sanction letter -validation
        signDocumentPage.verifyPageTitle('Sign Document')
        signDocumentPage.verifyInfoSignDocumentText('These Standard Terms & Conditions along with the Most Important Terms and Conditions form a legal and binding agreement upon acceptance pursuant to the Indian Contract Act, 1872 and the Information Technology Act, 2000.')
        signDocumentPage.verifyContinueText('Continue')
        signDocumentPage.clickContinueButton()
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.verifyContinueButtonText('Continue ')
        signServicePage.clickContinueButton()
        cy.clock()
        signServiceOTPInputPage.verifySignDocumentLabel('Sign Document with Face ID verification in the next step')
        signServiceOTPInputPage.enterOTP('123456')
    })

    it('2.KB-T21629 Test case to Verify the Loan disbursal and repayment for SA product', () => {

        cy.intercept('**/home', { fixture: 'home/repaymentPage-wallets-HomePage.json' })
        cy.intercept('**/me/loans', { fixture: 'loan/repayment/repaymentPage-wallets-Loans.json' })
        cy.intercept('**/me/loan?id=**', { fixture: 'loan/repayment/repaymentPage-wallets-Loanid.json' })
        cy.intercept('**/me/payment?v=sp3&reqId=**', { fixture: 'loan/repayment/repaymentPage-paymentPage.json' })

        cy.visitURL('/newhome')
        homePage.clickPayNowButton()
        repaymentPage.verifyLoanIcon()
        repaymentPage.verifyPaymentHistoryLabel('Payment history')
        repaymentPage.verifyHowToRepayLabel('How to Repay?')
        repaymentPage.clickPayNowBtn()
        paymentOptionPage.verifyDebitCardText('Debit Card')
        paymentOptionPage.clickDebitCardBlock()
    })

    it('KB-T2885 (1.0) Check whether Bank Account field is displayed at top in My Accounts page', () => {
        cy.intercept('**/home', { fixture: 'home/homepage-Notransaction.json' })
        cy.intercept('**/myaccount', { fixture: 'accounts/accountPage-PDDisabled.json' })

        cy.visitURL('/newhome')
        footerPage.clickAccountIcon()
        accountsPage.verifyBankAccountsLink('https://ik.imagekit.io/kreditbee/app-static/icons/C/ic-chevron-right.svg')
        accountsPage.verifyBankAccountsIcon('https://ik.imagekit.io/kreditbee/app-static/icons/B/ic-bank1.svg')
        accountsPage.verifyBankAccountsText('Bank Accounts')
    })

    it('KB-T52707 (1.0)Ensure SA Loan Creation is success when both PD Points and Coupon is applied and CSR is opted', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-SA.json' })
        cy.intercept('**/preloanre?productId=**', { fixture: 'loan/sa/SA-Amount15k-Tenure6.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/sa/viewRepaymentSchedulePage-SA.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/sa/SA-LoanAmountTenurePage-feescalculations.json' })
        cy.intercept('**/products/verifycoupon?productid=**', { fixture: 'loan/repaymentSchedulePage/verifyCouponcode-Documentfees-0.json' })
        cy.intercept('**/me/bank?couponCode=**', { fixture: 'bank/bankAccountVerificationPage-CouponCode.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-KreditBeePVTLTD.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/loanSanctionLetterPage.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otp-sanctionOTP.json' })

        cy.visitURL('/newhome')
        homePage.clickBlock1Btn()
        saLoanAmountTenurePage.verifySelectLoanAmountLabel()
        saLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        saLoanAmountDetailsPage.verifyAnnualPercentageRateLabel('Annual Percentage Rate')
        saLoanAmountDetailsPage.verifyTotalIntrestLabel('Total Interest')
        saLoanAmountDetailsPage.verifyFeeAndchargesLabel('Fees & Charges')
        saLoanAmountDetailsPage.clickGetMyCSRCheckBox()
        saLoanAmountDetailsPage.verifyApplyCouponCodeLabel()
        applyCouponCodeOrPointsPage.enterCouponCodeInput('TEST11')
        applyCouponCodeOrPointsPage.clickApplyBtn()
        saLoanAmountDetailsPage.verifyAnnualPercentageRateValue()
        fplLoanAmountDetailsPage.verifyCouponAppliedLabel('applied successfully !')
        saLoanAmountDetailsPage.verifyCSRFeeLabel('Credit Score Report Fee')
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.verifyPrincipalLabel('Principal')
        repaymentSchedulePage.verifyInterestLabel('Interest')
        repaymentSchedulePage.verifyDueDateLabel('Due Date')
        repaymentSchedulePage.verifyRepayableAmountLabel('Repayable Amount')
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.verifyESignText('E-sign with Aadhaar')
        signLoanDocumentPage.verifyDigitalSignInText('Digital sign with Face IDRequires OTP + Face verification')
        signLoanDocumentPage.clickDigitalSignButton('Digital sign with Face ID')
        signLoanDocumentPage.clickContinueBtn()
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        signDocumentPage.verifyContinueText('Continue')
        signDocumentPage.verifyInfoSignDocumentText('These Standard Terms & Conditions along with the Most Important Terms and Conditions form a legal and binding agreement upon acceptance pursuant to the Indian Contract Act, 1872 and the Information Technology Act, 2000.')
        signDocumentPage.clickContinueButton()
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.verifyContinueButtonText('Continue ')
        signServicePage.clickContinueButton()
        cy.clock()
        signServiceOTPInputPage.enterOTP('123456')
        cy.tick(4000)
        signServiceOTPInputPage.verifyTimerValue('(00:26)')
    })

    it('KB-T21689 (1.0) check the refer and earn option present in my accounts page', () => {
        cy.intercept('**/main/home', { fixture: 'home/homepage-Notransaction.json' })
        cy.intercept('**/main/myaccount', { fixture: 'accounts/accountPage-Notransction.json' })

        cy.visitURL('/newhome')
        footerPage.clickAccountIcon()
        accountsPage.verifyReferAndEarnLink('https://ik.imagekit.io/kreditbee/app-static/icons/C/ic-chevron-right.svg')
        accountsPage.verifyReferAndEarnIcon('https://ik.imagekit.io/kreditbee/app-static/icons/R/ic-refer-new.svg')
        accountsPage.verifyReferandEarnText('Refer & Earn')
        accountsPage.clickReferAndEarnText()
        referAndEarn.verifyPageTitle('Refer & Earn')
        referAndEarn.verifyMyReferralsText('My Referrals')
        referAndEarn.verifyHowToEarnText('How to Earn')
        referAndEarn.verifyMyPointsHistoryText('My Points history')

    })

    it('KB-T21688 (1.0) check the VKYC option present in my accounts page', () => {
        cy.intercept('**/main/home', { fixture: 'home/homepage-Notransaction.json' })
        cy.intercept('**/main/myaccount', { fixture: 'accounts/accountPage-PDDisabled.json' })

        cy.visitURL('/newhome')
        footerPage.clickAccountIcon()
        accountsPage.verifyVideoVerificationText('Video Verification')
    })

    it('KB-T37228 Check if PD option is shown in homepage and MyAccounts page when pd is enabled', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-VKYC.json' })
        cy.intercept('**/me/pd?type=list', { fixture: 'pd/pdVKYCPage.json' })

        cy.visitURL('/newhome', { failOnStatusCode: false })
        homePage.clickCreditLimitAndDiscountText()
        pdPage.verifyAssestvalidationLabel('Asset Validation')
        pdPage.verifyBasicDetailsLabel('Basic Details')
        cy.go(-1)
        footerPage.clickAccountIcon()
        accountsPage.clickDiscountAndCreditText()
        pdPage.verifyAutoDebitSetupLabel('Auto Debit Setup')
        pdPage.verifyKYCLabel('KYC')
    })

    it('KB-T38066 (1.0) To Verify change language option for english language', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-continueApplication.json' })
        cy.visitURL('/newhome')
        homePage.verifyContinueApplicationText('Continue Application')
        headerPage.clickSettingBtn()
        settingsPage.verifyChangeLanguageText('Change Language / à¤­à¤¾à¤·à¤¾ à¤¬à¤¦à¤²à¥‡à¤‚')
        settingsPage.clickChangeLanguageBtn()
        changeLanguage.verifyPageTitle('Change Language / à¤­à¤¾à¤·à¤¾ à¤¬à¤¦à¤²à¥‡à¤‚')
        //English
        changeLanguage.verifyEnglishLabel('English')
        changeLanguage.clickEnglishChkBox()

    })

    it('KB-T32666 (1.0) Check the Homepage block display order is correct when Profile is Rejected', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-Rejected.json' })
        cy.visitURL('/newhome')
        homePage.verifyWarningLabel('We are unable to process your loan at this time either due to certain anomalies in your profile or due to bad repayment behaviour. We suggest you improve your credit profile and retry with us after 6 months')
        homePage.verifyQueriesText('For any queries, reach out to us on')
        homePage.verifyKnowmoreFPL('KNOW MORE')
        homePage.verifyKnowmoreSA('KNOW MORE')
        homePage.verifyKnowmorePL('KNOW MORE')
    })
    it('KB-T180 Check for About Us page in Settings', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-continueApplication.json' })
        cy.visitURL('/newhome')
        homePage.verifyContinueApplicationText('Continue Application')
        headerPage.clickSettingBtn()
        settingsPage.verifyAboutUsText('About Us')
        settingsPage.clickAboutUsBtn()
    })
    it('KB-T21751 (1.0) Check on clicking Login and Logout', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-MLASILVER.json' })
        cy.visitURL('/newhome')
        headerPage.clickSettingBtn()
        settingsPage.verifyLogoutText('Logout')
        settingsPage.clickLogoutBtn()
    })
})

describe('Login', () => {

    it('KB-T21751 (1.0) Check on clicking Login and Logout', () => {

        cy.intercept('https://identitytoolkit.googleapis.com/v1/accounts:lookup?key=AIzaSyB8sVCUx2de592MmSgwrgM5NCTuYXdGuRM', { fixture: 'login/lgetaccinfo.json' })
        cy.intercept('https://identitytoolkit.googleapis.com/v1/accounts:signInWithCustomToken?key=AIzaSyB8sVCUx2de592MmSgwrgM5NCTuYXdGuRM', { fixture: 'login/lverifycustoken.json' })
        cy.intercept('**/me/otp?reason=loginOrRegister&mobile=**', { fixture: 'login/t1otp.json' })
        cy.intercept('**/me/otp?reason=loginOrRegister', { fixture: 'login/t1loginormob.json' })
        cy.intercept('**/me?source=login', { fixture: 'login/loginme.json' })
        cy.intercept('**/me/tnc/login', { fixture: 'login/loginsuccess.json' })
        cy.intercept('https://firestore.googleapis.com/v1/projects/kreditbee-stage/databases/(default)/documents/ypuserlocales/**', { fixture: 'login/ypuserlocal.json' })
        cy.intercept('**/home', { fixture: 'home/homePage-MLASILVER.json' })

        cy.visit('/login', { failOnStatusCode: false });
        cy.wait(1000)
        cy.contains('Login/Signup with Mobile', { timeout: 7000 }).should('be.visible')
        cy.contains('Login/Signup with Mobile').click({ force: true });
        cy.url().should('include', '/loginwithmob/mobileform', { timeout: 7000 });
        cy.get('input')
            .should('be.visible')
            // .and('be.focused')
            .and('have.attr', 'placeholder', '10 digit mobile number')
            .and('have.attr', 'maxlength', '10')
            .next()
            .prev()
            .type("9071581718");
        cy.get('[data-cy="checkboxText"]').click()
        cy.get('button')
            .should('have.text', 'Continue')
            .and('be.enabled').click();
        cy.get('input', { timeout: 7000 }).should('not.be.disabled')
            .and('have.attr', 'placeholder', 'Enter OTP Here')
            .and('have.attr', 'maxlength', '6')
            .and('have.attr', 'autocomplete', 'new-password')
            .click()
            .type("123456");
        cy.wait(4000)
        cy.visit('/newhome', { failOnStatusCode: false });
        cy.wait(3000)
    })
})

describe('Bank', { retries: 1 }, () => {

    it('KB-T21471 (1.0) Check whether Bank is added successfully in App', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-8k.json' })
        cy.intercept('**/category?name=fpl*', { fixture: 'loan/fpl/fplPage-8k.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/fpl/fplLoanAmountDetailPage-8k.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountDetailsPage-FeesCalculation.json' })
        cy.intercept('**/me/bank', { fixture: 'bank/bankAccountVerificationPage-NoBankAdded.json' })
        cy.intercept('**/misc/bank?ifsc=**', { fixture: 'bank/bankAccountVerificationPage-IFSCSearchResult.json' })
        cy.visitURL('/newhome')
        homePage.clickFPL8KGetNow();
        fplPage.clickFPL4KGetNowBtn();
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentPage.clickContinueBtn()
        loanPurposePage.clickSelectLoanPurposeDD()
        loanPurposePage.selectPurposeFromDDL('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickAddSavingBankAccount()
        addBankAccountPage.enterIFSC('CBIN0283979')
        addBankAccountPage.enterAccountNumber('3379955585')
        addBankAccountPage.enterConfirmAccountNumber('3379955585')
        addBankAccountPage.clickAddAccountBtn()
        bankAccountVerificationPage.verifyPageTitle('Account verification')
    })

    it('KB-T35467 (1.0)Check if the error string is displayed when user bank is facing down time issues in Add Bank Account Page', function () {
        cy.intercept('**/home', { fixture: 'home/homePage-8k.json' })
        cy.intercept('**/category?name=fpl*', { fixture: 'loan/fpl/fplPage-8k.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/fpl/fplLoanAmountDetailPage-8k.json' })
        cy.intercept('**/misc/bank?bank=hdfc_bank', { fixture: 'bank/bankAccountVerificationPage-BankDowntime.json' })
        cy.visitURL('/newhome')
        homePage.clickFPL8KGetNow();
        fplPage.clickFPL4KGetNowBtn();
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentPage.clickContinueBtn()
        loanPurposePage.clickSelectLoanPurposeDD()
        loanPurposePage.selectPurposeFromDDL('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickAddSavingBankAccount()
        addBankAccountPage.clickFindIFSCLink()
        findIFSCPage.verifyPageTitle('Find IFSC')
        findIFSCPage.enterBankName('HDFC')
        findIFSCPage.clickSuggestedBank()
        findIFSCPage.verifyBankNameErrorMessageText('This bank is currently facing technical difficulties. Bank verification may be delayed by a few hours. Please add another bank account for faster verification.')
    })

    it('KB-T35579 (1.0) Check if the soft and Hard back buttons are working in Select Bank Account page', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-8k.json' })
        cy.intercept('**/category?name=fpl*', { fixture: 'loan/fpl/fplPage-8k.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountDetailsPage-FeesCalculation.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/fpl/fplLoanAmountDetailPage-8k.json' })
        cy.intercept('**/me/bank', { fixture: 'bank/bankAccountVerificationPage-NoBankAdded.json' })
        cy.intercept('**/misc/bank?ifsc=**', { fixture: 'bank/bankAccountVerificationPage-IFSCSearchResult.json' })
        cy.visitURL('/newhome')
        homePage.clickFPL8KGetNow();
        fplPage.clickFPL4KGetNowBtn();
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentPage.clickContinueBtn()
        loanPurposePage.clickSelectLoanPurposeDD()
        loanPurposePage.selectPurposeFromDDL('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.verifyPageTitle('Select Bank Account')
        cy.go('back')
        loanPurposePage.clickSelectLoanPurposeDD()
        loanPurposePage.clickLoanPurposeWedding('Wedding expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.verifyPageTitle('Select Bank Account')
        headerPage.clickBackBtn()
        loanPurposePage.clickSelectLoanPurposeDD()
        loanPurposePage.clickLoanPurposePersonalReason('Personal reason')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.verifyPageTitle('Select Bank Account')
    })

    it('KB-T35583 (1.0) Check if Select Bank Account page is as per VD when Bank is in new State', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-8k.json' })
        cy.intercept('**/category?name=fpl*', { fixture: 'loan/fpl/fplPage-8k.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountDetailsPage-FeesCalculation.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/fpl/fplLoanAmountDetailPage-8k.json' })
        cy.intercept('**/me/bank', { fixture: 'bank/bankAccountVerificationPage-NoBankAdded.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/selectBankAccountPage-VerifyBank.json' })
        cy.intercept('**/me/bank?id=**', { fixture: 'bank/bankAccountDetailsPage-EditIFSC.json' })
        cy.intercept('**/misc/bank?ifsc=**', { fixture: 'bank/bankAccountVerificationPage-IFSCSearchResult.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/selectBankAccountPage-BankAddedSuccessfully.json' })
        cy.visitURL('/newhome')
        homePage.clickFPL8KGetNow();
        fplPage.clickFPL4KGetNowBtn();
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentPage.clickContinueBtn()
        loanPurposePage.clickSelectLoanPurposeDD()
        loanPurposePage.selectPurposeFromDDL('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.verifyPageTitle('Select Bank Account')
        selectBankAccountPage.clickVerifyBtn()
        bankAccountDetailsPage.verifyPageTitle('Bank Account Details')
        bankAccountDetailsPage.clickAddSavingsBankAccountBtn()
        addBankAccountPage.enterIFSC('HDFC0009286')
        addBankAccountPage.enterAccountNumber('50100278181960')
        addBankAccountPage.enterConfirmAccountNumber('50100278181960')
        addBankAccountPage.clickAddAccountBtn()
        bankAccountVerificationPage.clickContinueBtn()
        selectBankAccountPage.verifyPageTitle('Select Bank Account')
        selectBankAccountPage.verifyVerifiedBankStatus('Verified')
    })

    it('KB-T35479 (1.0) Check if the Flow is going to Find IFSC page on clicking edit option from Bank Account details page [EDIT]', () => {
        cy.intercept('**/home', { fixture: 'home/homePage.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fpl8kPage.json' })
        cy.intercept('**/preloanre?productId=**', { fixture: 'loan/fpl/fpl8KPreloanREPage.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountDetailsPage-FeesCalculation.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/fpl/fplLoanAmountDetailPage-8k.json' })
        cy.intercept('**/me/bank?id=**', { fixture: 'bank/bankAccountDetailsPage-EditIFSC.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/bankAccountDetailsPage-VerifyButton.json' })
        cy.visitURL('/newhome')
        homePage.clickFPL8KGetNow()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentPage.clickContinueBtn()
        loanPurposePage.clickSelectLoanPurposeDD()
        loanPurposePage.selectPurposeFromDDL('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.verifyPageTitle('Select Bank Account')
        selectBankAccountPage.clickVerifyBtn()
        bankAccountDetailsPage.verifyPageTitle('Bank Account Details')
        bankAccountDetailsPage.clickEditIFSCLink()
        findIFSCPage.verifyPageTitle('Find IFSC')
        findIFSCPage.verifyBankNameLabel('Bank Name')
    })

    it('KB-T4828 (1.0) Check whether No Bank Accounts added screen is dispplayed in Bank Accounts page', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-8k.json' })
        cy.intercept('**/category?name=fpl*', { fixture: 'loan/fpl/fplPage-8k.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountDetailsPage-FeesCalculation.json' })
        cy.intercept('**/products?productId=**', { fixture: 'loan/fpl/fplLoanAmountDetailPage-8k.json' })
        cy.intercept('**/bank?productid=**', { fixture: 'bank/bankAccountVerificationPage-NoBankAdded.json' })

        cy.visitURL('/newhome')
        homePage.clickFPL8KGetNow();
        fplPage.clickFPL4KGetNowBtn();
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentPage.clickContinueBtn()
        loanPurposePage.clickSelectLoanPurposeDD()
        loanPurposePage.selectPurposeFromDDL('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.verifyPageTitle('Select Bank Account')
        selectBankAccountPage.verifyAddBankText('We need your Bank Account to disburse the Loan')
        selectBankAccountPage.verifyAddBankSubText('You should be the primary account holder for the Bank Account')
    })

    it('KB-T32655 (1.0) Verify the help Icon from home page and its working.', () => {
        cy.intercept('**/main/home', { fixture: 'home/homepage-Notransaction.json' })
        cy.intercept('**/main/myaccount', { fixture: 'accounts/accountPage-Notransction.json' })
        cy.intercept('**/contactus/rule?categoryId=r_faq', { fixture: 'help/helpPage.json' })
        cy.visitURL('/newhome')
        headerPage.clickHelpBtn()
        help.verifyPageTitle('Help')
        help.verifyCreditLimitEnhancementLabel()
        help.verifyProfileVerificationLabel('Profile Verification')
    })

    it('KB-T32677 (1.0) Check the homepage loan block when loan is overdue', () => {
        cy.intercept('**/home', { fixture: 'home/repaymentPage-overdueIntrest-HomePage.json' })
        cy.intercept('**/me/loans', { fixture: 'loan/repayment/repaymentPage-FPLOverDue-Loan.json' })
        cy.intercept('**/me/loan?id=**', { fixture: 'loan/repayment/repaymentPage-FPLOverDue-LoanId.json' })

        cy.visitURL('/newhome')
        homePage.verifyPayNowText('PAY NOW')
        homePage.verifyGoldIconVisible()
        homePage.verifyNextDueDateRedText('rgb(238, 82, 113)')
        footerPage.clickRepaymentIcon()
        repaymentPage.verifyLoanIcon()
        repaymentPage.verifyPaymentHistoryLabel('Payment history')
        repaymentPage.verifyHowToRepayLabel('How to Repay?')
        repaymentPage.clickViewDetailsLink()
        repaymentSchedulePage.verifyPageTitle('Repayment Schedule')
        repaymentSchedulePage.verifyOverdueInterestText('Overdue interest at an annualized interest rate of 29.95% p.a. will be applicable per day on principal overdue')
        repaymentSchedulePage.verifyConsentRoundToRupeeText('*round to nearest rupee')
    })
})

describe('Account Deactivation', () => {

    it('KB-T46423 Verify account deactivation for user which is deactivated from admin', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-gold.json' })
        cy.intercept('**/myaccount', { fixture: 'accounts/accountsPage.json' })
        cy.intercept('**/main/me/delete', { fixture: 'accounts/deleteAccount-NoStatus.json' })
        cy.intercept('**/main/me/otp?reason=deleteAccount', { fixture: 'otp/otp-deleteAccountPage.json' })
        cy.visitURL('/newhome', { failOnStatusCode: false })
        homePage.clickMyAccountIcon()
        accountsPage.verifySettingsText('Settings')
        accountsPage.clickSettingsBtn()
        settingsPage.verifyPageTitle('Settings')
        settingsPage.verifyDeleteAccountText('Delete Account')
        settingsPage.clickDeleteAccountBtn()
        deleteAccountPage.verifyContinueDeleteText('Continue to delete')
        deleteAccountPage.clickContinueToDeleteButton()
        deleteAccountPage.clickDeleteAccountButton()
        deleteAccountPage.clickContinueToDeleteButton()
        otpInputPage.enterDeleteAccountOTP('111111')
        otpInputPage.verifySubmitBtnText('Submit')
        otpInputPage.clickSubmitBtn()
        loginPage.clickLoginOrSignupWithMobileBtn()
    })
})
describe('Login max reached', () => {
    before(() => {
        cy.clock();
        cy.visitURL('/login')
    })


    it('KB-T44914 (1.0) Ensure "Maximum attempts Reached" page is displaying while signup, when user exceeded the maximum try.', () => {
        cy.intercept('**/me/otp?reason=loginOrRegister&mobile=**', { fixture: 'tokensForLogin/loginOrRegister-mobilenumber.json' })
        cy.intercept('**/me/otp?reason=loginOrRegister', { fixture: 'otp/otp-invalid.json' })
        loginPage.verifyLoginFlow(0, 'Know more about our products') //know more about our products - does not exist when value is 0 
        loginPage.clickLoginOrSignupWithMobileBtn()
        mobileInputPage.bkPerformLogin('9611991897')
        otpInputPage.verifyPageTitle('Verify mobile')
        otpInputPage.verifyEnterSixDigitOTPText('Enter the 6 digit OTP received on your mobile ')
        otpInputPage.verifyChangeMobeileNumberLink('change?')
        otpInputPage.verifyOTPLabel('OTP')
        otpInputPage.enterOTP('111111')
        cy.tick(30000)
        otpInputPage.verifyResendOTPLink('  Resend ?')
        otpInputPage.clickResendOTPLink()
        otpInputPage.enterOTP('111112')
        cy.tick(30000)
        otpInputPage.verifyGetOTPOnCallText('Get OTP on call')
        otpInputPage.enterOTP('111113')
        otpInputPage.verifyOTPInputMessage('Invalid OTP')
        otpInputPage.enterOTP('111114')
        cy.visitURL('/loginwithmob/maxtries?otpRetryExpiry=300')
        otpMaximumAttemptsReachedPage.verifyPageTitle('Maximum attempts reached')
        otpMaximumAttemptsReachedPage.verifyRetryText('Please retry after 5 minutes')
        otpMaximumAttemptsReachedPage.verifyOKText('OK')
        otpMaximumAttemptsReachedPage.clickOKBtn()
    })

    it('KB-T49500 Check whether new screen with all product details displayed in welcome screen when preLoginFlowVersion config is set as 2', function () {
        cy.visitURL('/login')
        knowAboutProductPage.verifyPageTitle('Welcome to KreditBee')
        knowAboutProductPage.verifyKreditBeeIcon()
        knowAboutProductPage.verifyBackgroundIcon()
        knowAboutProductPage.verifyGetInstantPersonalLoanUpto('Get instant Personal Loan upto 3 Lakhs')
        knowAboutProductPage.verifyLoanAmountRupees('3 Lakhs')
        //PLSalaried
        knowAboutProductPage.verifyPLSalariedLabel('PERSONAL LOAN - SALARIED')
        knowAboutProductPage.verifyPLSalariedUptoText('UPTO')
        knowAboutProductPage.verifyPLSalariedValue('3,00,000')
        knowAboutProductPage.verifyPLSalariedIcon()
        knowAboutProductPage.verifyPLSalariedKnowmoreLink('KNOW MORE')
        knowAboutProductPage.verifyPLSalariedTenureUptoSubText('Tenure upto ')
        //lblFPL
        knowAboutProductPage.verifyFPLLabel('FLEXI PERSONAL LOAN ')
        knowAboutProductPage.verifyFPLUptoText('UPTO')
        knowAboutProductPage.verifyFPLValue('50,000')
        knowAboutProductPage.verifyFPLIcon()
        knowAboutProductPage.verifyFPLKnowmoreLink('KNOW MORE')
        knowAboutProductPage.verifyFPLTenureUptoSubText('Tenure upto ')
        //Purchase Loan
        knowAboutProductPage.verifyPurchaseLoanLabel('PURCHASE LOAN')
        knowAboutProductPage.verifyPurchaseLoanUptoText('UPTO')
        knowAboutProductPage.verifyPurchaseLoanAmountValue('1,00,000')
        knowAboutProductPage.verifyPurchaseLoanIcon()
        knowAboutProductPage.verifyPurchaseLoanKnowmoreLink('KNOW MORE')
        knowAboutProductPage.verifyPurchaseLoanTenureUptoSubText('Tenure upto ')
        //VAS Section
        knowAboutProductPage.verifyCreditReportIcon()
        knowAboutProductPage.verifyCreditReportText('Credit Report')
        knowAboutProductPage.verify24kGoldIcon()
        knowAboutProductPage.verify24kGoldText('24K Gold')
        knowAboutProductPage.verifyMyExpensesIcon()
        knowAboutProductPage.verifyMyExpensesText('My Expenses')
        //Login Button
        knowAboutProductPage.verifyLoginOrSignupWithMobileText('Login/Signup with Mobile')
    })

    // Digital Gold
    it('KB-T39815 (1.0)[Digital Gold Sell] Validate "Sell Gold Successfull" screen is displayed when Safe golds transaction and bank transfer are in success state', function () {
        cy.intercept('**/home', { fixture: 'home/homePage-Gold-CouponPoints.json' })
        cy.intercept('**/ecom/offers?type=goldHomeBanner', { fixture: 'gold/goldHomePage-banners.json' })
        cy.intercept('**/vasgold/digitalgold/home', { fixture: 'gold/goldHomePage-CouponCode.json' })
        cy.intercept('**/vasgold/digitalgold/investment/details', { fixture: 'gold/goldHomePage-Delivery.json' })
        cy.intercept('**/vasgold/digitalgold/transaction/eligibility', { fixture: 'gold/goldHomePage-eligibility.json' })
        cy.intercept('**/vasgold/digitalgold/calculator', { fixture: 'gold/goldSellPage-enteramount101.json' })
        cy.intercept('**/vasgold/digitalgold/transaction/sell/verify', { fixture: 'gold/goldPurchasePage-verifysell.json' })
        cy.intercept('**/me/bank?source=gold', { fixture: 'gold/goldPurchasePage-banksource.json' })
        cy.intercept('**/me/tnc/gold_sale', { fixture: 'gold/goldPurchasePage-goldsale.json' })
        cy.intercept('**/vasgold/digitalgold/transaction/sell/confirm', { fixture: 'gold/goldSellSucessfull-confrm.json' })
        cy.intercept('**/vas/me/tnc/gold_sale', { fixture: 'gold/goldSucessfull-SellComplte.json' })
        cy.intercept('**/vasgold/digitalgold/transaction/******?getBankStatus=*', { fixture: 'gold/goldSucessfull-CompltedStatus.json' })

        cy.visit('/newhome', { failOnStatusCode: false });
        homePage.clickGoldIcon()
        goldHomePage.verifyPageTitle('24K Gold')
        goldHomePage.clickSell24KGoldButton()
        goldSellPage.enterRupeeFieldInput('101')
        goldSellPage.clickSellButton()
        goldSellSummaryPage.verifyPageTitle('Sell Summary')
        goldSellSummaryPage.clickContinueButton()
        goldSellSucessfulPage.verifySellGoldSucessfullLabel('Sell Gold Successful')
    })
    it('KB-T42692 (1.0)[Digital Gold Homepage] Verify clicking on FAQ button is redirecting to help page', function () {
        cy.intercept('**/home', { fixture: 'home/homePage-gold-ConfirmUser.json' })
        cy.intercept('**/ecom/offers?type=goldHomeBanner', { fixture: 'gold/goldHomePage-banners.json' })
        cy.intercept('**/vasgold/digitalgold/home', { fixture: 'gold/goldHomePage-NoNugde.json' })
        cy.intercept('**/vasgold/digitalgold/investment/details', { fixture: 'gold/goldHomePage-Delivery.json' })
        cy.intercept('**/vasgold/digitalgold/transaction/eligibility', { fixture: 'gold/goldHomePage-eligibility.json' })

        cy.visit('/newhome', { failOnStatusCode: false });
        homePage.clickGoldIcon()
        goldHomePage.verifyPageTitle('24K Gold')
        goldHomePage.clickFAQLabl()
        help.verifyPageTitle('Help')
    })
    it('KB-T48765 (1.0)[Digital Gold Phase 4.5] :Check whether " Gold Banner" is display between "Invest in 24K Gold Starting from Just â‚¹1 " i.e Invest â‚¹1 section and "Sell 24K Gold " when User register for first time in 24K Gold (Confirmed State )', function () {
        cy.intercept('**/home', { fixture: 'home/homePage-gold-ConfirmUser.json' })
        cy.intercept('**/ecom/offers?type=goldHomeBanner', { fixture: 'gold/goldHomePage-banners.json' })
        cy.intercept('**/vasgold/digitalgold/home', { fixture: 'gold/goldHomePage-NoNugde.json' })
        cy.intercept('**/vasgold/digitalgold/investment/details', { fixture: 'gold/goldHomePage-Delivery.json' })
        cy.intercept('**/vasgold/digitalgold/transaction/eligibility', { fixture: 'gold/goldHomePage-eligibility.json' })

        cy.visit('/newhome', { failOnStatusCode: false });
        homePage.clickGoldIcon()
        goldHomePage.verifyPageTitle('24K Gold')
        goldHomePage.verifyBannersImage()
        goldHomePage.verifySell24KGoldLabel()
    })
    it('KB-T45327 (1.0)[Refer & Earn] Verify the redirection when the existing user is clicked on 24K Gold Investment tab in Kreditbee Points page', function () {
        cy.intercept('**/home', { fixture: 'home/homePage-referAndEarn.json' })
        cy.intercept('**/myaccount', { fixture: 'accounts/accountPage-ReferAndEarn.json' })
        cy.intercept('**/me/offers', { fixture: 'accounts/Refer-Earn-24kgoldInvestment.json' })
        cy.intercept('**/ecom/offers?type=goldHomeBanner', { fixture: 'gold/goldHomePage-banners.json' })
        cy.intercept('**/vasgold/digitalgold/home', { fixture: 'gold/goldHomePage-NoNugde.json' })
        cy.intercept('**/vasgold/digitalgold/investment/details', { fixture: 'gold/goldHomePage-Delivery.json' })
        cy.intercept('**/vasgold/digitalgold/transaction/eligibility', { fixture: 'gold/goldHomePage-eligibility.json' })

        cy.visitURL('/newhome')

        homePage.clickMyAccountIcon()
        accountsPage.verifyReferandEarnText('Refer & Earn')
        accountsPage.clickReferAndEarnText()
        referAndEarn.clickRedeemPointsLabel()
        kbPointsPage.click24KGoldInvestmentLabel()
        kbPointsPage.clickContinueBtn()
        goldHomePage.verifyPageTitle('24K Gold')
    })

})

describe('Loan KB-21144: Config for assigning loans to KBNBFC', () => {

    it('KB-T60481 Ensure that fund should get assigned to KB when customerDefaultFundSource=2 in yp_user table, assignToKB=0 in yp_lead_config and assignToKB=0 in yp_loan_product table', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-MLASILVER.json' })
        cy.intercept('**/category?name=fplfalse', { fixture: 'loan/fpl/fplPage-5k.json' })
        cy.intercept('**/preloanre?productId=14&action=getNow&preLoanEvent=preLoanGetNowClick&src=cash',
            { fixture: 'loan/fpl/fplLoanAmountTenurePage-preLoanRE-srcCash.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/fpl/fplLoanAmountTenurePage-feescalculations.json' })
        cy.intercept('**/products?productId=14', { fixture: 'loan/fpl/fplLoanAmountTenurePage-productID14.json' })
        cy.intercept('**/me/bank', { fixture: 'bank/bankAccountVerificationPage-NoBankAdded.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/selectBankAccountPage-Verified.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/fpl/sanctionPage-fund-KreditBeePVTLTD.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/loanSanctionLetterPage.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otp-sanctionOTP.json' })
        cy.intercept('**/me/otp?reason=clickwrap', { fixture: 'otp/otpSignServicePage.json' })
        cy.intercept('**/me/loan', { fixture: 'otp/loanApplicationPage-Submitted.json' })
        cy.intercept('**/me?source=session', { fixture: 'otp/loanApplicationPage-InsSubmit.json' })

        cy.visitURL('/newhome')
        homePage.clickBlock2Btn()
        fplPage.clickFPL4KGetNowBtn()
        fplLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        fplLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickAddSavingBankAccount()
        addBankAccountPage.enterIFSC('UBIN0533335')
        addBankAccountPage.enterAccountNumber('33335051547')
        addBankAccountPage.enterConfirmAccountNumber('33335051547')
        addBankAccountPage.clickAddAccountBtn()
        bankAccountVerificationPage.verifyTransferTextInformation('We may transfer â‚¹ 1 to your bank account for account verification')
        bankAccountVerificationPage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickDigitalSignButton()
        signLoanDocumentPage.clickContinueBtn()
        //kfs sanction letter - validation
        kfsSanctionLetterPage.verifyPageTitle('KFS & Sanction letter')
        kfsSanctionLetterPage.verifyLoanSanctionedByLabel('Your loan is being sanctioned by:')
        kfsSanctionLetterPage.verifyLenderNameText('Krazybee Services Private Limited.')
        kfsSanctionLetterPage.verifyContinueToSignLoanDocumentText('Continue to Sign Loan Document')
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        //sanction letter -validation
        signDocumentPage.verifyPageTitle('Sign Document')
        signDocumentPage.verifyInfoSignDocumentText('These Standard Terms & Conditions along with the Most Important Terms and Conditions form a legal and binding agreement upon acceptance pursuant to the Indian Contract Act, 1872 and the Information Technology Act, 2000.')
        signDocumentPage.verifyContinueText('Continue')
        signDocumentPage.clickContinueButton()
        //signServicePage - validation
        signServicePage.verifyPageTitle('Sign Service')
        signServicePage.verifyTransactionIDLabel('Transaction ID:')
        signServicePage.verifyTransactionIDValue('KBDID20221124RQzHneocfB811837')
        signServicePage.verifyDateAndTimeLabel('Date & Time:')
        signServicePage.verifyDeviceIDLabel('Device ID:')
        signServicePage.verifyDeviceIDValue('')
        signServicePage.verifyIPAddressLabel('IP Address:')
        signServicePage.verifyIPAddressValue('122.185.107.110')
        signServicePage.verifyConsentReadText('I had carefully read the Standard Terms and Conditions and the Most important Terms and Conditions for availing loan from the lender')
        signServicePage.verifyConsentUnderstoodText(' I had understood and read the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender.')
        signServicePage.verifyConsentLegalAndBindingText(' I had further understand that upon acceptance of the Standard Terms and Conditions and the Most Important Terms and Conditions for availing loan from the Lender, a legal and binding agreement shall be created between us under the Indian Contract Act, 1872 read with Information Technology Act, 2000.')
        signServicePage.selectConsent()
        signServicePage.verifyContinueButtonText('Continue ')
        signServicePage.clickContinueButton()
        // //OTP service page
        signServiceOTPInputPage.verifyEnterOTPLabel('Enter OTP sent to number xxxxxxx281') //number changes w.r.t user logged in
        signServiceOTPInputPage.verifySignDocumentLabel('Sign Document with Face ID verification in the next step')
        signServiceOTPInputPage.enterOTP('123456')
        loanApplicationSubmittedPage.verifypageTitle('Loan Application submitted')
    })
})

describe('Sanction Doc & LFA', () => {
    it('KB-T37417 DISBURSAL: Check if the disbursal is happening for the PK-SA (E-sign with Aadhar signbee)', () => {
        cy.intercept('**/home', { fixture: 'home/homePage-SA.json' })
        cy.intercept('**/preloanre?productId=**', { fixture: 'loan/sa/SA-Amount15k-Tenure6.json' })
        cy.intercept('**/products?productId=5', { fixture: 'loan/sa/SA-Amount15k-Tenure6-MLA2-SubbandGood.json' })
        cy.intercept('**/products/calcfees?productid=**', { fixture: 'loan/sa/SA-LoanAmountTenurePage-feescalculations.json' })
        cy.intercept('**/me/bank?productid=**', { fixture: 'bank/bankAccountVerifiedPage.json' })
        cy.intercept('**/loan/la?updateMFILimit=**', { fixture: 'loan/signLoanDocumentPage-Enable-ESignAndDigFaceID.json' })
        cy.intercept('**/loan/la?type=**', { fixture: 'loan/sanctionPage-fund-signbee-KreditBeePVTLTD.json' })
        cy.intercept('**/me/tnc/loanSanctionLetter', { fixture: 'loan/loanSanctionLetterPage.json' })
        cy.intercept('**/me/otp?reason=clickwrap&kbloanId=**', { fixture: 'otp/otp-sanctionOTP.json' })
        cy.visitURL('/newhome')
        homePage.clickBlock1Btn()
        saLoanAmountTenurePage.clickViewSummaryAndChargesBtn()
        saLoanAmountDetailsPage.clickViewRepaymentScheduleBtn()
        repaymentSchedulePage.clickContinueBtn()
        loanPurposePage.selectLoanPurpose('Medical expenses')
        loanPurposePage.clickContinueBtn()
        selectBankAccountPage.clickContinueBtn()
        signLoanDocumentPage.clickESignButton()
        signLoanDocumentPage.clickContinueBtn()
        //kfs sanction letter - validation
        kfsSanctionLetterPage.verifyPageTitle('KFS & Sanction letter')
        kfsSanctionLetterPage.verifyLoanSanctionedByLabel('Your loan is being sanctioned by:')
        kfsSanctionLetterPage.verifyLenderNameText('Krazybee Services Private Limited.')
        kfsSanctionLetterPage.verifyContinueToSignLoanDocumentText('Continue to Sign Loan Document')
        kfsSanctionLetterPage.clickContinueToSignLoanDocumentButton()
        //sanction letter -validation
        signDocumentPage.verifyPageTitleSA('Sign Document')
        signDocumentPage.verifyInfoSignDocumentText('These Standard Terms & Conditions along with the Most Important Terms and Conditions form a legal and binding agreement upon acceptance pursuant to the Indian Contract Act, 1872 and the Information Technology Act, 2000.')
        signDocumentPage.verifyContinueTextSA('Continue')
        signDocumentPage.clickContinueSAButton()
        // //signServicePage - validation
        signServicePage.clickContinueSAButton()
        // //OTP service validation
        cy.clock()
        signServiceOTPInputPage.verifyEnterOTPLabel('Enter OTP sent to number xxxxxxx281') //number changes w.r.t user logged in
        signServiceOTPInputPage.enterOTPSA('123456')
        cy.tick(4000)
        signServiceOTPInputPage.verifyTimerValue('(00:26)')
    })
})